import{o as Me,c as qe,a as J,n as ur,b as Ns,r as Ul,d as Zn,e as Rt,F as oy,f as ly,t as Qi,w as ay,_ as jl,p as cf,g as ff,h as hy,s as er,i as cy,j as fy,k as uy,l as si,m as dy,q as py,u as my,v as gy,x as So,y as Ct,z as uh,A as dh,B as yy}from"./index-OHKcpTLM.js";const by={key:0},wy={role:"status"},ky=J("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"},null,-1),xy=J("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"},null,-1),vy=[ky,xy],Sy={__name:"loading-animation",props:{show:{type:Boolean,default:!1},size:{type:String,default:"w-8 h-8"},color:{type:String,default:"fill-blue-600"}},setup(s){return(e,t)=>s.show?(Me(),qe("div",by,[J("div",wy,[(Me(),qe("svg",{"aria-hidden":"true",class:ur([[s.size,s.color],"text-gray-200 animate-spin dark:text-gray-600"]),viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vy,2))])])):Ns("",!0)}},uf=1024;let Cy=0,Co=class{constructor(e,t){this.from=e,this.to=t}};class Q{constructor(e={}){this.id=Cy++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ze.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Q.closedBy=new Q({deserialize:s=>s.split(" ")});Q.openedBy=new Q({deserialize:s=>s.split(" ")});Q.group=new Q({deserialize:s=>s.split(" ")});Q.isolate=new Q({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}});Q.contextHash=new Q({perNode:!0});Q.lookAhead=new Q({perNode:!0});Q.mounted=new Q({perNode:!0});class dr{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Q.mounted.id]}}const My=Object.create(null);class Ze{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):My,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new Ze(e.name||"",t,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Q.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(Q.group),r=-1;r<(n?n.length:0);r++){let o=t[r<0?i.name:n[r]];if(o)return o}}}}Ze.none=new Ze("",Object.create(null),0,8);class ql{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let r of e){let o=r(i);o&&(n||(n=Object.assign({},i.props)),n[o[0].id]=o[1])}t.push(n?new Ze(i.name,n,i.id,i.flags):i)}return new ql(t)}}const Tn=new WeakMap,ph=new WeakMap;var Te;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(Te||(Te={}));class xe{constructor(e,t,i,n,r){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=dr.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Jo(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Tn.get(this)||this.topNode,r=new Jo(n);return r.moveTo(e,t),Tn.set(this,r._tree),r}get topNode(){return new ut(this,0,0,null)}resolve(e,t=0){let i=Hs(Tn.get(this)||this.topNode,e,t,!1);return Tn.set(this,i),i}resolveInner(e,t=0){let i=Hs(ph.get(this)||this.topNode,e,t,!0);return ph.set(this,i),i}resolveStack(e,t=0){return Ay(this,e,t)}iterate(e){let{enter:t,leave:i,from:n=0,to:r=this.length}=e,o=e.mode||0,l=(o&Te.IncludeAnonymous)>0;for(let h=this.cursor(o|Te.IncludeAnonymous);;){let c=!1;if(h.from<=r&&h.to>=n&&(!l&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;c=!0}for(;c&&i&&(l||!h.type.isAnonymous)&&i(h),!h.nextSibling();){if(!h.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Ql(Ze.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new xe(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new xe(Ze.none,t,i,n)))}static build(e){return Ty(e)}}xe.empty=new xe(Ze.none,[],[],0);class Gl{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Gl(this.buffer,this.index)}}class pi{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Ze.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,i,n,r){let{buffer:o}=this,l=-1;for(let h=e;h!=t&&!(df(r,n,o[h+1],o[h+2])&&(l=h,i>0));h=o[h+3]);return l}slice(e,t,i){let n=this.buffer,r=new Uint16Array(t-e),o=0;for(let l=e,h=0;l<t;){r[h++]=n[l++],r[h++]=n[l++]-i;let c=r[h++]=n[l++]-i;r[h++]=n[l++]-e,o=Math.max(o,c)}return new pi(r,o,this.set)}}function df(s,e,t,i){switch(s){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Hs(s,e,t,i){for(var n;s.from==s.to||(t<1?s.from>=e:s.from>e)||(t>-1?s.to<=e:s.to<e);){let o=!i&&s instanceof ut&&s.index<0?null:s.parent;if(!o)return s;s=o}let r=i?0:Te.IgnoreOverlays;if(i)for(let o=s,l=o.parent;l;o=l,l=o.parent)o instanceof ut&&o.index<0&&((n=l.enter(e,t,r))===null||n===void 0?void 0:n.from)!=o.from&&(s=l);for(;;){let o=s.enter(e,t,r);if(!o)return s;s=o}}class pf{cursor(e=0){return new Jo(this,e)}getChild(e,t=null,i=null){let n=mh(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return mh(this,e,t,i)}resolve(e,t=0){return Hs(this,e,t,!1)}resolveInner(e,t=0){return Hs(this,e,t,!0)}matchContext(e){return Qo(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(i=t,t=n.prevSibling):t=n}return i}get node(){return this}get next(){return this.parent}}class ut extends pf{constructor(e,t,i,n){super(),this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,r=0){for(let o=this;;){for(let{children:l,positions:h}=o._tree,c=t>0?l.length:-1;e!=c;e+=t){let u=l[e],p=h[e]+o.from;if(df(n,i,p,p+u.length)){if(u instanceof pi){if(r&Te.ExcludeBuffers)continue;let g=u.findChild(0,u.buffer.length,t,i-p,n);if(g>-1)return new li(new Oy(o,u,e,p),null,g)}else if(r&Te.IncludeAnonymous||!u.type.isAnonymous||Kl(u)){let g;if(!(r&Te.IgnoreMounts)&&(g=dr.get(u))&&!g.overlay)return new ut(g.tree,p,e,o);let b=new ut(u,p,e,o);return r&Te.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(r&Te.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Te.IgnoreOverlays)&&(n=dr.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=r:o<r)&&(t<0?l>=r:l>r))return new ut(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function mh(s,e,t,i){let n=s.cursor(),r=[];if(!n.firstChild())return r;if(t!=null){for(let o=!1;!o;)if(o=n.type.is(t),!n.nextSibling())return r}for(;;){if(i!=null&&n.type.is(i))return r;if(n.type.is(e)&&r.push(n.node),!n.nextSibling())return i==null?r:[]}}function Qo(s,e,t=e.length-1){for(let i=s.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class Oy{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class li extends pf{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return r<0?null:new li(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Te.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new li(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new li(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new li(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,r=i.buffer[this.index+3];if(r>n){let o=i.buffer[this.index+1];e.push(i.slice(n,r,o)),t.push(0)}return new xe(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function mf(s){if(!s.length)return null;let e=0,t=s[0];for(let r=1;r<s.length;r++){let o=s[r];(o.from>t.from||o.to<t.to)&&(t=o,e=r)}let i=t instanceof ut&&t.index<0?null:t.parent,n=s.slice();return i?n[e]=i:n.splice(e,1),new Dy(n,t)}class Dy{constructor(e,t){this.heads=e,this.node=t}get next(){return mf(this.heads)}}function Ay(s,e,t){let i=s.resolveInner(e,t),n=null;for(let r=i instanceof ut?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(n||(n=[i])).push(o.resolve(e,t)),r=o}else{let o=dr.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new ut(o.tree,o.overlay[0].from+r.from,-1,r);(n||(n=[i])).push(Hs(l,e,t,!1))}}return n?mf(n):i}class Jo{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ut)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof ut?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,r=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Te.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Te.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Te.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(n.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let r=t+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let l=i._tree.children[r];if(this.mode&Te.IncludeAnonymous||l instanceof pi||!l.type.isAnonymous||Kl(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=r+1;break e}n=this.stack[--r]}for(let n=i;n<this.stack.length;n++)t=new li(this.buffer,t,this.stack[n]);return this.bufferNode=new li(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Qo(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,r=this.stack.length-1;n>=0;r--){if(r<0)return Qo(this.node,e,n);let o=i[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function Kl(s){return s.children.some(e=>e instanceof pi||!e.type.isAnonymous||Kl(e))}function Ty(s){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=uf,reused:r=[],minRepeatType:o=i.types.length}=s,l=Array.isArray(t)?new Gl(t,t.length):t,h=i.types,c=0,u=0;function p(A,N,P,Y,G,z){let{id:j,start:U,end:K,size:ie}=l,ae=u;for(;ie<0;)if(l.next(),ie==-1){let oe=r[j];P.push(oe),Y.push(U-A);return}else if(ie==-3){c=j;return}else if(ie==-4){u=j;return}else throw new RangeError(`Unrecognized record size: ${ie}`);let De=h[j],Ae,Ve,Qe=U-A;if(K-U<=n&&(Ve=k(l.pos-N,G))){let oe=new Uint16Array(Ve.size-Ve.skip),Ee=l.pos-Ve.size,ze=oe.length;for(;l.pos>Ee;)ze=S(Ve.start,oe,ze);Ae=new pi(oe,K-Ve.start,i),Qe=Ve.start-A}else{let oe=l.pos-ie;l.next();let Ee=[],ze=[],gt=j>=o?j:-1,et=0,H=K;for(;l.pos>oe;)gt>=0&&l.id==gt&&l.size>=0?(l.end<=H-n&&(w(Ee,ze,U,et,l.end,H,gt,ae),et=Ee.length,H=l.end),l.next()):z>2500?g(U,oe,Ee,ze):p(U,oe,Ee,ze,gt,z+1);if(gt>=0&&et>0&&et<Ee.length&&w(Ee,ze,U,et,U,H,gt,ae),Ee.reverse(),ze.reverse(),gt>-1&&et>0){let hn=b(De);Ae=Ql(De,Ee,ze,0,Ee.length,0,K-U,hn,hn)}else Ae=v(De,Ee,ze,K-U,ae-K)}P.push(Ae),Y.push(Qe)}function g(A,N,P,Y){let G=[],z=0,j=-1;for(;l.pos>N;){let{id:U,start:K,end:ie,size:ae}=l;if(ae>4)l.next();else{if(j>-1&&K<j)break;j<0&&(j=ie-n),G.push(U,K,ie),z++,l.next()}}if(z){let U=new Uint16Array(z*4),K=G[G.length-2];for(let ie=G.length-3,ae=0;ie>=0;ie-=3)U[ae++]=G[ie],U[ae++]=G[ie+1]-K,U[ae++]=G[ie+2]-K,U[ae++]=ae;P.push(new pi(U,G[2]-K,i)),Y.push(K-A)}}function b(A){return(N,P,Y)=>{let G=0,z=N.length-1,j,U;if(z>=0&&(j=N[z])instanceof xe){if(!z&&j.type==A&&j.length==Y)return j;(U=j.prop(Q.lookAhead))&&(G=P[z]+j.length+U)}return v(A,N,P,Y,G)}}function w(A,N,P,Y,G,z,j,U){let K=[],ie=[];for(;A.length>Y;)K.push(A.pop()),ie.push(N.pop()+P-G);A.push(v(i.types[j],K,ie,z-G,U-z)),N.push(G-P)}function v(A,N,P,Y,G=0,z){if(c){let j=[Q.contextHash,c];z=z?[j].concat(z):[j]}if(G>25){let j=[Q.lookAhead,G];z=z?[j].concat(z):[j]}return new xe(A,N,P,Y,z)}function k(A,N){let P=l.fork(),Y=0,G=0,z=0,j=P.end-n,U={size:0,start:0,skip:0};e:for(let K=P.pos-A;P.pos>K;){let ie=P.size;if(P.id==N&&ie>=0){U.size=Y,U.start=G,U.skip=z,z+=4,Y+=4,P.next();continue}let ae=P.pos-ie;if(ie<0||ae<K||P.start<j)break;let De=P.id>=o?4:0,Ae=P.start;for(P.next();P.pos>ae;){if(P.size<0)if(P.size==-3)De+=4;else break e;else P.id>=o&&(De+=4);P.next()}G=Ae,Y+=ie,z+=De}return(N<0||Y==A)&&(U.size=Y,U.start=G,U.skip=z),U.size>4?U:void 0}function S(A,N,P){let{id:Y,start:G,end:z,size:j}=l;if(l.next(),j>=0&&Y<o){let U=P;if(j>4){let K=l.pos-(j-4);for(;l.pos>K;)P=S(A,N,P)}N[--P]=U,N[--P]=z-A,N[--P]=G-A,N[--P]=Y}else j==-3?c=Y:j==-4&&(u=Y);return P}let D=[],R=[];for(;l.pos>0;)p(s.start||0,s.bufferStart||0,D,R,-1,0);let _=(e=s.length)!==null&&e!==void 0?e:D.length?R[0]+D[0].length:0;return new xe(h[s.topID],D.reverse(),R.reverse(),_)}const gh=new WeakMap;function tr(s,e){if(!s.isAnonymous||e instanceof pi||e.type!=s)return 1;let t=gh.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=s||!(i instanceof xe)){t=1;break}t+=tr(s,i)}gh.set(e,t)}return t}function Ql(s,e,t,i,n,r,o,l,h){let c=0;for(let w=i;w<n;w++)c+=tr(s,e[w]);let u=Math.ceil(c*1.5/8),p=[],g=[];function b(w,v,k,S,D){for(let R=k;R<S;){let _=R,A=v[R],N=tr(s,w[R]);for(R++;R<S;R++){let P=tr(s,w[R]);if(N+P>=u)break;N+=P}if(R==_+1){if(N>u){let P=w[_];b(P.children,P.positions,0,P.children.length,v[_]+D);continue}p.push(w[_])}else{let P=v[R-1]+w[R-1].length-A;p.push(Ql(s,w,v,_,R,A,P,null,h))}g.push(A+D-r)}}return b(e,t,i,n,0),(l||h)(p,g,o)}class _i{constructor(e,t,i,n,r=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new _i(0,e.length,e,0,!1,i)];for(let r of t)r.to>e.length&&n.push(r);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],r=1,o=e.length?e[0]:null;for(let l=0,h=0,c=0;;l++){let u=l<t.length?t[l]:null,p=u?u.fromA:1e9;if(p-h>=i)for(;o&&o.from<p;){let g=o;if(h>=g.from||p<=g.to||c){let b=Math.max(g.from,h)-c,w=Math.min(g.to,p)-c;g=b>=w?null:new _i(b,w,g.tree,g.offset+c,l>0,!!u)}if(g&&n.push(g),o.to>p)break;o=r<e.length?e[r++]:null}if(!u)break;h=u.toA,c=u.toA-u.toB}return n}}class gf{startParse(e,t,i){return typeof e=="string"&&(e=new _y(e)),i=i?i.length?i.map(n=>new Co(n.from,n.to)):[new Co(0,0)]:[new Co(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let r=n.advance();if(r)return r}}}class _y{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Q({perNode:!0});var yh={};class pr{constructor(e,t,i,n,r,o,l,h,c,u=0,p){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=r,this.score=o,this.buffer=l,this.bufferBase=h,this.curContext=c,this.lookAhead=u,this.parent=p}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new pr(e,[],t,i,i,0,[],0,n?new bh(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,n=e&65535,{parser:r}=this.p,o=r.dynamicPrecedence(n);if(o&&(this.score+=o),i==0){this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),this.reduceContext(n,this.reducePos);return}let l=this.stack.length-(i-1)*3-(e&262144?6:0),h=l?this.stack[l-2]:this.p.ranges[0].from,c=this.reducePos-h;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[n])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=c));let u=l?this.stack[l-1]:0,p=this.bufferBase+this.buffer.length-u;if(n<r.minRepeatTerm||e&131072){let g=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,h,g,p+4,!0)}if(e&262144)this.state=this.stack[l];else{let g=this.stack[l-3];this.state=r.getGoto(g,n,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(n,h)}storeNode(e,t,i,n=4,r=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(e,t,i,n);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,n>4&&(n-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=n}}shift(e,t,i,n){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=n,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,n,4);else{let r=e,{parser:o}=this.p;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(r,1)||(this.reducePos=n)),this.pushState(r,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,n,4)}}apply(e,t,i,n){e&65536?this.reduce(e):this.shift(e,t,i,n)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new pr(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Py(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r=0,o;r<t.length;r+=2)(o=t[r+1])!=this.state&&this.p.parser.hasAction(o,e)&&n.push(t[r],o);if(this.stack.length<120)for(let r=0;n.length<8&&r<t.length;r+=2){let o=t[r+1];n.some((l,h)=>h&1&&l==o)||n.push(t[r],o)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let r=t[n+1];if(r==this.state)continue;let o=this.split();o.pushState(r,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[n],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,n=t&65535,r=this.stack.length-i*3;if(r<0||e.getGoto(this.stack[r],n,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(n,r)=>{if(!t.includes(n))return t.push(n),e.allActions(n,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-r;if(l>1){let h=o&65535,c=this.stack.length-l*3;if(c>=0&&e.getGoto(this.stack[c],h,!1)>=0)return l<<19|65536|h}}else{let l=i(o,r+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new bh(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class bh{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Py{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class mr{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new mr(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new mr(this.stack,this.pos,this.index)}}function _n(s,e=Uint16Array){if(typeof s!="string")return s;let t=null;for(let i=0,n=0;i<s.length;){let r=0;for(;;){let o=s.charCodeAt(i++),l=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let h=o-32;if(h>=46&&(h-=46,l=!0),r+=h,l)break;r*=46}t?t[n++]=r:t=new e(r)}return t}class ir{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const wh=new ir;class Ry{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=wh,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,r=this.pos+e;for(;r<i.from;){if(!n)return null;let o=this.ranges[--n];r-=i.from-o.to,i=o}for(;t<0?r>i.to:r>=i.to;){if(n==this.ranges.length-1)return null;let o=this.ranges[++n];r+=o.from-i.to,i=o}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,n;if(t>=0&&t<this.chunk.length)i=this.pos+e,n=this.chunk.charCodeAt(t);else{let r=this.resolveOffset(e,1);if(r==null)return-1;if(i=r,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=wh,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Ji{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;Ly(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Ji.prototype.contextual=Ji.prototype.fallback=Ji.prototype.extend=!1;Ji.prototype.fallback=Ji.prototype.extend=!1;function Ly(s,e,t,i,n,r){let o=0,l=1<<i,{dialect:h}=t.p.parser;e:for(;l&s[o];){let c=s[o+1];for(let b=o+3;b<c;b+=2)if((s[b+1]&l)>0){let w=s[b];if(h.allows(w)&&(e.token.value==-1||e.token.value==w||Ny(w,e.token.value,n,r))){e.acceptToken(w);break}}let u=e.next,p=0,g=s[o+2];if(e.next<0&&g>p&&s[c+g*3-3]==65535){o=s[c+g*3-1];continue e}for(;p<g;){let b=p+g>>1,w=c+b+(b<<1),v=s[w],k=s[w+1]||65536;if(u<v)g=b;else if(u>=k)p=b+1;else{o=s[w+2],e.advance();continue e}}break}}function kh(s,e,t){for(let i=e,n;(n=s[i])!=65535;i++)if(n==t)return i-e;return-1}function Ny(s,e,t,i){let n=kh(t,i,e);return n<0||kh(t,i,s)<n}const it=typeof process<"u"&&yh&&/\bparse\b/.test(yh.LOG);let Mo=null;function xh(s,e,t){let i=s.cursor(Te.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(s.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:s.length}}class By{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?xh(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?xh(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[n],o=this.start[t]+i.positions[n];if(o>e)return this.nextStart=o,null;if(r instanceof xe){if(o==e){if(o<this.safeFrom)return null;let l=o+r.length;if(l<=this.safeTo){let h=r.prop(Q.lookAhead);if(!h||l+h<this.fragment.to)return r}}this.index[t]++,o+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+r.length}}}class Ey{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new ir)}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:r}=n,o=n.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,h=0;for(let c=0;c<r.length;c++){if(!(1<<c&o))continue;let u=r[c],p=this.tokens[c];if(!(i&&!u.fallback)&&((u.contextual||p.start!=e.pos||p.mask!=o||p.context!=l)&&(this.updateCachedToken(p,u,e),p.mask=o,p.context=l),p.lookAhead>p.end+25&&(h=Math.max(p.lookAhead,h)),p.value!=0)){let g=t;if(p.extended>-1&&(t=this.addActions(e,p.extended,p.end,t)),t=this.addActions(e,p.value,p.end,t),!u.extend&&(i=p,t>g))break}}for(;this.actions.length>t;)this.actions.pop();return h&&e.setLookAhead(h),!i&&e.pos==this.stream.end&&(i=new ir,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new ir,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){let n=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(n,e),i),e.value>-1){let{parser:r}=i.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){let l=r.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(n+1)}putAction(e,t,i,n){for(let r=0;r<n;r+=3)if(this.actions[r]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:r}=e,{parser:o}=e.p,{data:l}=o;for(let h=0;h<2;h++)for(let c=o.stateSlot(r,h?2:1);;c+=3){if(l[c]==65535)if(l[c+1]==1)c=qt(l,c+2);else{n==0&&l[c+1]==2&&(n=this.putAction(qt(l,c+2),t,i,n));break}l[c]==t&&(n=this.putAction(qt(l,c+1),t,i,n))}return n}}class Iy{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Ry(t,n),this.tokens=new Ey(e,this.stream),this.topTerm=e.top[1];let{from:r}=n[0];this.stacks=[pr.start(this,e.top[0],r)],this.fragments=i.length&&this.stream.end-r>e.bufferLength*4?new By(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],n,r;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{n||(n=[],r=[]),n.push(l);let h=this.tokens.getMainToken(l);r.push(h.value,h.end)}}break}}if(!i.length){let o=n&&Wy(n);if(o)return it&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw it&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let o=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,r,i);if(o)return it&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,h)=>h.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let h=o+1;h<i.length;h++){let c=i[h];if(l.sameState(c)||l.buffer.length>500&&c.buffer.length>500)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)i.splice(h--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:r}=this,o=it?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let p=this.fragments.nodeAt(n);p;){let g=this.parser.nodeSet.types[p.type.id]==p.type?r.getGoto(e.state,p.type.id):-1;if(g>-1&&p.length&&(!c||(p.prop(Q.contextHash)||0)==u))return e.useNode(p,g),it&&console.log(o+this.stackID(e)+` (via reuse of ${r.getName(p.type.id)})`),!0;if(!(p instanceof xe)||p.children.length==0||p.positions[0]>0)break;let b=p.children[0];if(b instanceof xe&&p.positions[0]==0)p=b;else break}}let l=r.stateSlot(e.state,4);if(l>0)return e.reduce(l),it&&console.log(o+this.stackID(e)+` (via always-reduce ${r.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let c=0;c<h.length;){let u=h[c++],p=h[c++],g=h[c++],b=c==h.length||!i,w=b?e:e.split(),v=this.tokens.mainToken;if(w.apply(u,p,v?v.start:w.pos,g),it&&console.log(o+this.stackID(w)+` (via ${u&65536?`reduce of ${r.getName(u&65535)}`:"shift"} for ${r.getName(p)} @ ${n}${w==e?"":", split"})`),b)return!0;w.pos>n?t.push(w):i.push(w)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return vh(e,t),!0}}runRecovery(e,t,i){let n=null,r=!1;for(let o=0;o<e.length;o++){let l=e[o],h=t[o<<1],c=t[(o<<1)+1],u=it?this.stackID(l)+" -> ":"";if(l.deadEnd&&(r||(r=!0,l.restart(),it&&console.log(u+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let p=l.split(),g=u;for(let b=0;p.forceReduce()&&b<10&&(it&&console.log(g+this.stackID(p)+" (via force-reduce)"),!this.advanceFully(p,i));b++)it&&(g=this.stackID(p)+" -> ");for(let b of l.recoverByInsert(h))it&&console.log(u+this.stackID(b)+" (via recover-insert)"),this.advanceFully(b,i);this.stream.end>l.pos?(c==l.pos&&(c++,h=0),l.recoverByDelete(h,c),it&&console.log(u+this.stackID(l)+` (via recover-delete ${this.parser.getName(h)})`),vh(l,i)):(!n||n.score<l.score)&&(n=l)}return n}stackToTree(e){return e.close(),xe.build({buffer:mr.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Mo||(Mo=new WeakMap)).get(e);return t||Mo.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function vh(s,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==s.pos&&i.sameState(s)){e[t].score<s.score&&(e[t]=s);return}}e.push(s)}class Fy{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class gr extends gf{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),n=[];for(let l=0;l<t.length;l++)n.push([]);function r(l,h,c){n[l].push([h,h.deserialize(String(c))])}if(e.nodeProps)for(let l of e.nodeProps){let h=l[0];typeof h=="string"&&(h=Q[h]);for(let c=1;c<l.length;){let u=l[c++];if(u>=0)r(u,h,l[c++]);else{let p=l[c+-u];for(let g=-u;g>0;g--)r(l[c++],h,p);c++}}}this.nodeSet=new ql(t.map((l,h)=>Ze.define({name:h>=this.minRepeatTerm?void 0:l,id:h,props:n[h],top:i.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=uf;let o=_n(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(Sh),this.states=_n(e.states,Uint32Array),this.data=_n(e.stateData),this.goto=_n(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Ji(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new Iy(this,e,t,i);for(let r of this.wrappers)n=r(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let r=n[t+1];;){let o=n[r++],l=o&1,h=n[r++];if(l&&i)return h;for(let c=r+(o>>1);r<c;r++)if(n[r]==e)return h;if(l)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let r=this.stateSlot(e,n?2:1),o;;r+=3){if((o=i[r])==65535)if(i[r+1]==1)o=i[r=qt(i,r+2)];else{if(i[r+1]==2)return qt(i,r+2);break}if(o==t||o==0)return qt(i,r+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),n=i?t(i):void 0;for(let r=this.stateSlot(e,1);n==null;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=qt(this.data,r+2);else break;n=t(qt(this.data,r+1))}return n}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=qt(this.data,i+2);else break;if(!(this.data[i+2]&1)){let n=this.data[i+1];t.some((r,o)=>o&1&&r==n)||t.push(this.data[i],n)}}return t}configure(e){let t=Object.assign(Object.create(gr.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(r=>r.from==i);return n?n.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,n)=>{let r=e.specializers.find(l=>l.from==i.external);if(!r)return i;let o=Object.assign(Object.assign({},i),{external:r.to});return t.specializers[n]=Sh(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let r of e.split(" ")){let o=t.indexOf(r);o>=0&&(i[o]=!0)}let n=null;for(let r=0;r<t.length;r++)if(!i[r])for(let o=this.dialects[t[r]],l;(l=this.data[o++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[l]=1;return new Fy(e,i,n)}static deserialize(e){return new gr(e)}}function qt(s,e){return s[e]|s[e+1]<<16}function Wy(s){let e=null;for(let t of s){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Sh(s){if(s.external){let e=s.extend?1:0;return(t,i)=>s.external(t,i)<<1|e}return s.get}let Hy=0;class Tt{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=Hy++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Tt([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new yr;return t=>t.modified.indexOf(e)>-1?t:yr.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let Yy=0;class yr{constructor(){this.instances=[],this.id=Yy++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&Vy(t,l.modified));if(i)return i;let n=[],r=new Tt(n,e,t);for(let l of t)l.instances.push(r);let o=zy(t);for(let l of e.set)if(!l.modified.length)for(let h of o)n.push(yr.get(l,h));return r}}function Vy(s,e){return s.length==e.length&&s.every((t,i)=>t==e[i])}function zy(s){let e=[[]];for(let t=0;t<s.length;t++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(s[t]));return e.sort((t,i)=>i.length-t.length)}function yf(s){let e=Object.create(null);for(let t in s){let i=s[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let r=[],o=2,l=n;for(let p=0;;){if(l=="..."&&p>0&&p+3==n.length){o=1;break}let g=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!g)throw new RangeError("Invalid path: "+n);if(r.push(g[0]=="*"?"":g[0][0]=='"'?JSON.parse(g[0]):g[0]),p+=g[0].length,p==n.length)break;let b=n[p++];if(p==n.length&&b=="!"){o=0;break}if(b!="/")throw new RangeError("Invalid path: "+n);l=n.slice(p)}let h=r.length-1,c=r[h];if(!c)throw new RangeError("Invalid path: "+n);let u=new br(i,o,h>0?r.slice(0,h):null);e[c]=u.sort(e[c])}}return bf.add(e)}const bf=new Q;class br{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}br.empty=new br([],2,null);function wf(s,e){let t=Object.create(null);for(let r of s)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:i,all:n=null}=e||{};return{style:r=>{let o=n;for(let l of r)for(let h of l.set){let c=t[h.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function $y(s,e){let t=null;for(let i of s){let n=i.style(e);n&&(t=t?t+" "+n:n)}return t}function Uy(s,e,t,i=0,n=s.length){let r=new jy(i,Array.isArray(e)?e:[e],t);r.highlightRange(s.cursor(),i,n,"",r.highlighters),r.flush(n)}class jy{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,n,r){let{type:o,from:l,to:h}=e;if(l>=i||h<=t)return;o.isTop&&(r=this.highlighters.filter(b=>!b.scope||b.scope(o)));let c=n,u=qy(e)||br.empty,p=$y(r,u.tags);if(p&&(c&&(c+=" "),c+=p,u.mode==1&&(n+=(n?" ":"")+p)),this.startSpan(Math.max(t,l),c),u.opaque)return;let g=e.tree&&e.tree.prop(Q.mounted);if(g&&g.overlay){let b=e.node.enter(g.overlay[0].from+l,1),w=this.highlighters.filter(k=>!k.scope||k.scope(g.tree.type)),v=e.firstChild();for(let k=0,S=l;;k++){let D=k<g.overlay.length?g.overlay[k]:null,R=D?D.from+l:h,_=Math.max(t,S),A=Math.min(i,R);if(_<A&&v)for(;e.from<A&&(this.highlightRange(e,_,A,n,r),this.startSpan(Math.min(A,e.to),c),!(e.to>=R||!e.nextSibling())););if(!D||R>i)break;S=D.to+l,S>t&&(this.highlightRange(b.cursor(),Math.max(t,D.from+l),Math.min(i,S),"",w),this.startSpan(Math.min(i,S),c))}v&&e.parent()}else if(e.firstChild()){g&&(n="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,n,r),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function qy(s){let e=s.type.prop(bf);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const L=Tt.define,Pn=L(),ni=L(),Ch=L(ni),Mh=L(ni),ri=L(),Rn=L(ri),Oo=L(ri),At=L(),Ci=L(At),Mt=L(),Ot=L(),Xo=L(),Ss=L(Xo),Ln=L(),M={comment:Pn,lineComment:L(Pn),blockComment:L(Pn),docComment:L(Pn),name:ni,variableName:L(ni),typeName:Ch,tagName:L(Ch),propertyName:Mh,attributeName:L(Mh),className:L(ni),labelName:L(ni),namespace:L(ni),macroName:L(ni),literal:ri,string:Rn,docString:L(Rn),character:L(Rn),attributeValue:L(Rn),number:Oo,integer:L(Oo),float:L(Oo),bool:L(ri),regexp:L(ri),escape:L(ri),color:L(ri),url:L(ri),keyword:Mt,self:L(Mt),null:L(Mt),atom:L(Mt),unit:L(Mt),modifier:L(Mt),operatorKeyword:L(Mt),controlKeyword:L(Mt),definitionKeyword:L(Mt),moduleKeyword:L(Mt),operator:Ot,derefOperator:L(Ot),arithmeticOperator:L(Ot),logicOperator:L(Ot),bitwiseOperator:L(Ot),compareOperator:L(Ot),updateOperator:L(Ot),definitionOperator:L(Ot),typeOperator:L(Ot),controlOperator:L(Ot),punctuation:Xo,separator:L(Xo),bracket:Ss,angleBracket:L(Ss),squareBracket:L(Ss),paren:L(Ss),brace:L(Ss),content:At,heading:Ci,heading1:L(Ci),heading2:L(Ci),heading3:L(Ci),heading4:L(Ci),heading5:L(Ci),heading6:L(Ci),contentSeparator:L(At),list:L(At),quote:L(At),emphasis:L(At),strong:L(At),link:L(At),monospace:L(At),strikethrough:L(At),inserted:L(),deleted:L(),changed:L(),invalid:L(),meta:Ln,documentMeta:L(Ln),annotation:L(Ln),processingInstruction:L(Ln),definition:Tt.defineModifier(),constant:Tt.defineModifier(),function:Tt.defineModifier(),standard:Tt.defineModifier(),local:Tt.defineModifier(),special:Tt.defineModifier()};wf([{tag:M.link,class:"tok-link"},{tag:M.heading,class:"tok-heading"},{tag:M.emphasis,class:"tok-emphasis"},{tag:M.strong,class:"tok-strong"},{tag:M.keyword,class:"tok-keyword"},{tag:M.atom,class:"tok-atom"},{tag:M.bool,class:"tok-bool"},{tag:M.url,class:"tok-url"},{tag:M.labelName,class:"tok-labelName"},{tag:M.inserted,class:"tok-inserted"},{tag:M.deleted,class:"tok-deleted"},{tag:M.literal,class:"tok-literal"},{tag:M.string,class:"tok-string"},{tag:M.number,class:"tok-number"},{tag:[M.regexp,M.escape,M.special(M.string)],class:"tok-string2"},{tag:M.variableName,class:"tok-variableName"},{tag:M.local(M.variableName),class:"tok-variableName tok-local"},{tag:M.definition(M.variableName),class:"tok-variableName tok-definition"},{tag:M.special(M.variableName),class:"tok-variableName2"},{tag:M.definition(M.propertyName),class:"tok-propertyName tok-definition"},{tag:M.typeName,class:"tok-typeName"},{tag:M.namespace,class:"tok-namespace"},{tag:M.className,class:"tok-className"},{tag:M.macroName,class:"tok-macroName"},{tag:M.propertyName,class:"tok-propertyName"},{tag:M.operator,class:"tok-operator"},{tag:M.comment,class:"tok-comment"},{tag:M.meta,class:"tok-meta"},{tag:M.invalid,class:"tok-invalid"},{tag:M.punctuation,class:"tok-punctuation"}]);const Gy=yf({String:M.string,Number:M.number,"True False":M.bool,PropertyName:M.propertyName,Null:M.null,",":M.separator,"[ ]":M.squareBracket,"{ }":M.brace}),Ky=gr.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[Gy],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});class re{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=ns(this,e,t);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),_t.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=ns(this,e,t);let i=[];return this.decompose(e,t,i,0),_t.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new Bs(this),r=new Bs(e);for(let o=t,l=t;;){if(n.next(o),r.next(o),o=0,n.lineBreak!=r.lineBreak||n.done!=r.done||n.value!=r.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new Bs(this,e)}iterRange(e,t=this.length){return new kf(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new xf(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?re.empty:e.length<=32?new we(e):_t.from(we.split(e,[]))}}class we extends re{constructor(e,t=Qy(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.text[r],l=n+o.length;if((t?i:l)>=e)return new Jy(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let r=e<=0&&t>=this.length?this:new we(Oh(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=sr(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new we(l,o.length+r.length));else{let h=l.length>>1;i.push(new we(l.slice(0,h)),new we(l.slice(h)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof we))return super.replace(e,t,i);[e,t]=ns(this,e,t);let n=sr(this.text,sr(i.text,Oh(this.text,0,e)),t),r=this.length+i.length-(t-e);return n.length<=32?new we(n,r):_t.from(we.split(n,[]),r)}sliceString(e,t=this.length,i=`
`){[e,t]=ns(this,e,t);let n="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let l=this.text[o],h=r+l.length;r>e&&o&&(n+=i),e<h&&t>r&&(n+=l.slice(Math.max(0,e-r),t-r)),r=h+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,i.length==32&&(t.push(new we(i,n)),i=[],n=-1);return n>-1&&t.push(new we(i,n)),t}}class _t extends re{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.children[r],l=n+o.length,h=i+o.lines-1;if((t?h:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=h+1}}decompose(e,t,i,n){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let l=this.children[r],h=o+l.length;if(e<=h&&t>=o){let c=n&((o<=e?1:0)|(h>=t?2:0));o>=e&&h<=t&&!c?i.push(l):l.decompose(e-o,t-o,i,c)}o=h+1}}replace(e,t,i){if([e,t]=ns(this,e,t),i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],l=r+o.length;if(e>=r&&t<=l){let h=o.replace(e-r,t-r,i),c=this.lines-o.lines+h.lines;if(h.lines<c>>4&&h.lines>c>>6){let u=this.children.slice();return u[n]=h,new _t(u,this.length-(t-e)+i.length)}return super.replace(r,l,h)}r=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=ns(this,e,t);let n="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let l=this.children[r],h=o+l.length;o>e&&r&&(n+=i),e<h&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=h+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof _t))return 0;let i=0,[n,r,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,r+=t){if(n==o||r==l)return i;let h=this.children[n],c=e.children[r];if(h!=c)return i+h.scanIdentical(c,t);i+=h.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let b of e)i+=b.lines;if(i<32){let b=[];for(let w of e)w.flatten(b);return new we(b,t)}let n=Math.max(32,i>>5),r=n<<1,o=n>>1,l=[],h=0,c=-1,u=[];function p(b){let w;if(b.lines>r&&b instanceof _t)for(let v of b.children)p(v);else b.lines>o&&(h>o||!h)?(g(),l.push(b)):b instanceof we&&h&&(w=u[u.length-1])instanceof we&&b.lines+w.lines<=32?(h+=b.lines,c+=b.length+1,u[u.length-1]=new we(w.text.concat(b.text),w.length+1+b.length)):(h+b.lines>n&&g(),h+=b.lines,c+=b.length+1,u.push(b))}function g(){h!=0&&(l.push(u.length==1?u[0]:_t.from(u,c)),c=-1,h=u.length=0)}for(let b of e)p(b);return g(),l.length==1?l[0]:new _t(l,t)}}re.empty=new we([""],0);function Qy(s){let e=-1;for(let t of s)e+=t.length+1;return e}function sr(s,e,t=0,i=1e9){for(let n=0,r=0,o=!0;r<s.length&&n<=i;r++){let l=s[r],h=n+l.length;h>=t&&(h>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=h+1}return e}function Oh(s,e,t){return sr(s,[""],e,t)}class Bs{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof we?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],r=this.offsets[i],o=r>>1,l=n instanceof we?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof we){let h=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=n.children[o+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof we?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class kf{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Bs(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class xf{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(re.prototype[Symbol.iterator]=function(){return this.iter()},Bs.prototype[Symbol.iterator]=kf.prototype[Symbol.iterator]=xf.prototype[Symbol.iterator]=function(){return this});class Jy{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}function ns(s,e,t){return e=Math.max(0,Math.min(s.length,e)),[e,Math.max(e,Math.min(s.length,t))]}let Xi="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<Xi.length;s++)Xi[s]+=Xi[s-1];function Xy(s){for(let e=1;e<Xi.length;e+=2)if(Xi[e]>s)return Xi[e-1]<=s;return!1}function Dh(s){return s>=127462&&s<=127487}const Ah=8205;function Ne(s,e,t=!0,i=!0){return(t?vf:Zy)(s,e,i)}function vf(s,e,t){if(e==s.length)return e;e&&Sf(s.charCodeAt(e))&&Cf(s.charCodeAt(e-1))&&e--;let i=Pe(s,e);for(e+=ct(i);e<s.length;){let n=Pe(s,e);if(i==Ah||n==Ah||t&&Xy(n))e+=ct(n),i=n;else if(Dh(n)){let r=0,o=e-2;for(;o>=0&&Dh(Pe(s,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function Zy(s,e,t){for(;e>0;){let i=vf(s,e-2,t);if(i<e)return i;e--}return 0}function Sf(s){return s>=56320&&s<57344}function Cf(s){return s>=55296&&s<56320}function Pe(s,e){let t=s.charCodeAt(e);if(!Cf(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return Sf(i)?(t-55296<<10)+(i-56320)+65536:t}function Jl(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function ct(s){return s<65536?1:2}const Zo=/\r\n?|\n/;var je=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(je||(je={}));class Bt{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,r),n+=r):n+=o,i+=r}}iterChangedRanges(e,t=!1){el(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new Bt(e)}composeDesc(e){return this.empty?e:e.empty?this:Mf(this,e)}mapDesc(e,t=!1){return e.empty?this:tl(this,e,t)}mapPos(e,t=-1,i=je.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],h=this.sections[o++],c=n+l;if(h<0){if(c>e)return r+(e-n);r+=l}else{if(i!=je.Simple&&c>=e&&(i==je.TrackDel&&n<e&&c>e||i==je.TrackBefore&&n<e||i==je.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!l)return e==n||t<0?r:r+h;r+=h}n=c}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let r=this.sections[i++],o=this.sections[i++],l=n+r;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Bt(e)}static create(e){return new Bt(e)}}class Ce extends Bt{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return el(this,(t,i,n,r,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return tl(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,r=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let h=n>>1;for(;i.length<h;)i.push(re.empty);i.push(o?e.slice(r,r+o):re.empty)}r+=o}return new Ce(t,i)}compose(e){return this.empty?e:e.empty?this:Mf(this,e,!0)}map(e,t=!1){return e.empty?this:tl(this,e,t,!0)}iterChanges(e,t=!1){el(this,e,t)}get desc(){return Bt.create(this.sections)}filter(e){let t=[],i=[],n=[],r=new Ys(this);e:for(let o=0,l=0;;){let h=o==e.length?1e9:e[o++];for(;l<h||l==h&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,h-l);Fe(n,u,-1);let p=r.ins==-1?-1:r.off==0?r.ins:0;Fe(t,u,p),p>0&&ai(i,t,r.text),r.forward(u),l+=u}let c=e[o++];for(;l<c;){if(r.done)break e;let u=Math.min(r.len,c-l);Fe(t,u,-1),Fe(n,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),l+=u}}return{changes:new Ce(t,i),filtered:Bt.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],r=[],o=0,l=null;function h(u=!1){if(!u&&!n.length)return;o<t&&Fe(n,t-o,-1);let p=new Ce(n,r);l=l?l.compose(p.map(l)):p,n=[],r=[],o=0}function c(u){if(Array.isArray(u))for(let p of u)c(p);else if(u instanceof Ce){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);h(),l=l?l.compose(u.map(l)):u}else{let{from:p,to:g=p,insert:b}=u;if(p>g||p<0||g>t)throw new RangeError(`Invalid change range ${p} to ${g} (in doc of length ${t})`);let w=b?typeof b=="string"?re.of(b.split(i||Zo)):b:re.empty,v=w.length;if(p==g&&v==0)return;p<o&&h(),p>o&&Fe(n,p-o,-1),Fe(n,g-p,v),ai(r,n,w),o=g}}return c(e),h(!l),l}static empty(e){return new Ce(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;i.length<n;)i.push(re.empty);i[n]=re.of(r.slice(1)),t.push(r[0],i[n].length)}}}return new Ce(t,i)}static createSet(e,t){return new Ce(e,t)}}function Fe(s,e,t,i=!1){if(e==0&&t<=0)return;let n=s.length-2;n>=0&&t<=0&&t==s[n+1]?s[n]+=e:e==0&&s[n]==0?s[n+1]+=t:i?(s[n]+=e,s[n+1]+=t):s.push(e,t)}function ai(s,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<s.length)s[s.length-1]=s[s.length-1].append(t);else{for(;s.length<i;)s.push(re.empty);s.push(t)}}function el(s,e,t){let i=s.inserted;for(let n=0,r=0,o=0;o<s.sections.length;){let l=s.sections[o++],h=s.sections[o++];if(h<0)n+=l,r+=l;else{let c=n,u=r,p=re.empty;for(;c+=l,u+=h,h&&i&&(p=p.append(i[o-2>>1])),!(t||o==s.sections.length||s.sections[o+1]<0);)l=s.sections[o++],h=s.sections[o++];e(n,c,r,u,p),n=c,r=u}}}function tl(s,e,t,i=!1){let n=[],r=i?[]:null,o=new Ys(s),l=new Ys(e);for(let h=-1;;)if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);Fe(n,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||h==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let c=l.len;for(Fe(n,l.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&h<o.i&&o.len<=u&&(Fe(n,0,o.ins),r&&ai(r,n,o.text),h=o.i),o.forward(u),c-=u}l.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(l.ins==-1){let p=Math.min(u,l.len);c+=p,u-=p,l.forward(p)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;Fe(n,c,h<o.i?o.ins:0),r&&h<o.i&&ai(r,n,o.text),h=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return r?Ce.createSet(n,r):Bt.create(n);throw new Error("Mismatched change set lengths")}}function Mf(s,e,t=!1){let i=[],n=t?[]:null,r=new Ys(s),o=new Ys(e);for(let l=!1;;){if(r.done&&o.done)return n?Ce.createSet(i,n):Bt.create(i);if(r.ins==0)Fe(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)Fe(i,0,o.ins,l),n&&ai(n,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let h=Math.min(r.len2,o.len),c=i.length;if(r.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Fe(i,h,u,l),n&&u&&ai(n,i,o.text)}else o.ins==-1?(Fe(i,r.off?0:r.len,h,l),n&&ai(n,i,r.textBit(h))):(Fe(i,r.off?0:r.len,o.off?0:o.ins,l),n&&!o.off&&ai(n,i,o.text));l=(r.ins>h||o.ins>=0&&o.len>h)&&(l||i.length>c),r.forward2(h),o.forward(h)}}}}class Ys{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?re.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?re.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Ai{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new Ai(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return O.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return O.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return O.range(e.anchor,e.head)}static create(e,t,i){return new Ai(e,t,i)}}class O{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:O.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new O([this.main],0)}addRange(e,t=!0){return O.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,O.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new O(e.ranges.map(t=>Ai.fromJSON(t)),e.main)}static single(e,t=e){return new O([O.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return O.normalized(e.slice(),t);i=r.to}return new O(e,t)}static cursor(e,t=0,i,n){return Ai.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,t,i,n){let r=(i??16777215)<<6|(n==null?7:Math.min(6,n));return t<e?Ai.create(t,e,48|r):Ai.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let i=e[t];e.sort((n,r)=>n.from-r.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let r=e[n],o=e[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,h=Math.max(r.to,o.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?O.range(h,l):O.range(l,h))}}return new O(e,t)}}function Of(s,e){for(let t of s.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Xl=0;class F{constructor(e,t,i,n,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=Xl++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new F(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Zl),!!e.static,e.enables)}of(e){return new nr([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new nr(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new nr(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Zl(s,e){return s==e||s.length==e.length&&s.every((t,i)=>t===e[i])}class nr{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=Xl++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,h=!1,c=!1,u=[];for(let p of this.dependencies)p=="doc"?h=!0:p=="selection"?c=!0:((t=e[p.id])!==null&&t!==void 0?t:1)&1||u.push(e[p.id]);return{create(p){return p.values[o]=i(p),1},update(p,g){if(h&&g.docChanged||c&&(g.docChanged||g.selection)||il(p,u)){let b=i(p);if(l?!Th(b,p.values[o],n):!n(b,p.values[o]))return p.values[o]=b,1}return 0},reconfigure:(p,g)=>{let b,w=g.config.address[r];if(w!=null){let v=kr(g,w);if(this.dependencies.every(k=>k instanceof F?g.facet(k)===p.facet(k):k instanceof Be?g.field(k,!1)==p.field(k,!1):!0)||(l?Th(b=i(p),v,n):n(b=i(p),v)))return p.values[o]=v,0}else b=i(p);return p.values[o]=b,1}}}}function Th(s,e,t){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!t(s[i],e[i]))return!1;return!0}function il(s,e){let t=!1;for(let i of e)Es(s,i)&1&&(t=!0);return t}function e1(s,e,t){let i=t.map(h=>s[h.id]),n=t.map(h=>h.type),r=i.filter(h=>!(h&1)),o=s[e.id]>>1;function l(h){let c=[];for(let u=0;u<i.length;u++){let p=kr(h,i[u]);if(n[u]==2)for(let g of p)c.push(g);else c.push(p)}return e.combine(c)}return{create(h){for(let c of i)Es(h,c);return h.values[o]=l(h),1},update(h,c){if(!il(h,r))return 0;let u=l(h);return e.compare(u,h.values[o])?0:(h.values[o]=u,1)},reconfigure(h,c){let u=il(h,i),p=c.config.facets[e.id],g=c.facet(e);if(p&&!u&&Zl(t,p))return h.values[o]=g,0;let b=l(h);return e.compare(b,g)?(h.values[o]=g,0):(h.values[o]=b,1)}}}const _h=F.define({static:!0});class Be{constructor(e,t,i,n,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let t=new Be(Xl++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(_h).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let r=i.values[t],o=this.updateF(r,n);return this.compareF(r,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,_h.of({field:this,create:e})]}get extension(){return this}}const Mi={lowest:4,low:3,default:2,high:1,highest:0};function Cs(s){return e=>new Df(e,s)}const cs={highest:Cs(Mi.highest),high:Cs(Mi.high),default:Cs(Mi.default),low:Cs(Mi.low),lowest:Cs(Mi.lowest)};class Df{constructor(e,t){this.inner=e,this.prec=t}}class en{of(e){return new sl(this,e)}reconfigure(e){return en.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class sl{constructor(e,t){this.compartment=e,this.inner=t}}class wr{constructor(e,t,i,n,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],r=Object.create(null),o=new Map;for(let g of t1(e,t,o))g instanceof Be?n.push(g):(r[g.facet.id]||(r[g.facet.id]=[])).push(g);let l=Object.create(null),h=[],c=[];for(let g of n)l[g.id]=c.length<<1,c.push(b=>g.slot(b));let u=i==null?void 0:i.config.facets;for(let g in r){let b=r[g],w=b[0].facet,v=u&&u[g]||[];if(b.every(k=>k.type==0))if(l[w.id]=h.length<<1|1,Zl(v,b))h.push(i.facet(w));else{let k=w.combine(b.map(S=>S.value));h.push(i&&w.compare(k,i.facet(w))?i.facet(w):k)}else{for(let k of b)k.type==0?(l[k.id]=h.length<<1|1,h.push(k.value)):(l[k.id]=c.length<<1,c.push(S=>k.dynamicSlot(S)));l[w.id]=c.length<<1,c.push(k=>e1(k,w,b))}}let p=c.map(g=>g(l));return new wr(e,o,p,l,h,r)}}function t1(s,e,t){let i=[[],[],[],[],[]],n=new Map;function r(o,l){let h=n.get(o);if(h!=null){if(h<=l)return;let c=i[h].indexOf(o);c>-1&&i[h].splice(c,1),o instanceof sl&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let c of o)r(c,l);else if(o instanceof sl){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),r(c,l)}else if(o instanceof Df)r(o.inner,o.prec);else if(o instanceof Be)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof nr)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,Mi.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(c,l)}}return r(s,Mi.default),i.reduce((o,l)=>o.concat(l))}function Es(s,e){if(e&1)return 2;let t=e>>1,i=s.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;s.status[t]=4;let n=s.computeSlot(s,s.config.dynamicSlots[t]);return s.status[t]=2|n}function kr(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const Af=F.define(),nl=F.define({combine:s=>s.some(e=>e),static:!0}),Tf=F.define({combine:s=>s.length?s[0]:void 0,static:!0}),_f=F.define(),Pf=F.define(),Rf=F.define(),Lf=F.define({combine:s=>s.length?s[0]:!1});class Xt{constructor(e,t){this.type=e,this.value=t}static define(){return new i1}}class i1{of(e){return new Xt(this,e)}}class s1{constructor(e){this.map=e}of(e){return new q(this,e)}}class q{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new q(this.type,t)}is(e){return this.type==e}static define(e={}){return new s1(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let r=n.map(t);r&&i.push(r)}return i}}q.reconfigure=q.define();q.appendConfig=q.define();class Oe{constructor(e,t,i,n,r,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&Of(i,t.newLength),r.some(l=>l.type==Oe.time)||(this.annotations=r.concat(Oe.time.of(Date.now())))}static create(e,t,i,n,r,o){return new Oe(e,t,i,n,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Oe.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Oe.time=Xt.define();Oe.userEvent=Xt.define();Oe.addToHistory=Xt.define();Oe.remote=Xt.define();function n1(s,e){let t=[];for(let i=0,n=0;;){let r,o;if(i<s.length&&(n==e.length||e[n]>=s[i]))r=s[i++],o=s[i++];else if(n<e.length)r=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function Nf(s,e,t){var i;let n,r,o;return t?(n=e.changes,r=Ce.empty(e.changes.length),o=s.changes.compose(e.changes)):(n=e.changes.map(s.changes),r=s.changes.mapDesc(e.changes,!0),o=s.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(r):(i=s.selection)===null||i===void 0?void 0:i.map(n),effects:q.mapEffects(s.effects,n).concat(q.mapEffects(e.effects,r)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function rl(s,e,t){let i=e.selection,n=Zi(e.annotations);return e.userEvent&&(n=n.concat(Oe.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ce?e.changes:Ce.of(e.changes||[],t,s.facet(Tf)),selection:i&&(i instanceof O?i:O.single(i.anchor,i.head)),effects:Zi(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function Bf(s,e,t){let i=rl(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;i=Nf(i,rl(s,e[r],o?i.changes.newLength:s.doc.length),o)}let n=Oe.create(s,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return o1(t?r1(n):n)}function r1(s){let e=s.startState,t=!0;for(let n of e.facet(_f)){let r=n(s);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:n1(t,r))}if(t!==!0){let n,r;if(t===!1)r=s.changes.invertedDesc,n=Ce.empty(e.doc.length);else{let o=s.changes.filter(t);n=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}s=Oe.create(e,n,s.selection&&s.selection.map(r),q.mapEffects(s.effects,r),s.annotations,s.scrollIntoView)}let i=e.facet(Pf);for(let n=i.length-1;n>=0;n--){let r=i[n](s);r instanceof Oe?s=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Oe?s=r[0]:s=Bf(e,Zi(r),!1)}return s}function o1(s){let e=s.startState,t=e.facet(Rf),i=s;for(let n=t.length-1;n>=0;n--){let r=t[n](s);r&&Object.keys(r).length&&(i=Nf(i,rl(e,r,s.changes.newLength),!0))}return i==s?s:Oe.create(e,s.changes,s.selection,i.effects,i.annotations,i.scrollIntoView)}const l1=[];function Zi(s){return s==null?l1:Array.isArray(s)?s:[s]}var ye=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(ye||(ye={}));const a1=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ol;try{ol=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function h1(s){if(ol)return ol.test(s);for(let e=0;e<s.length;e++){let t=s[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||a1.test(t)))return!0}return!1}function c1(s){return e=>{if(!/\S/.test(e))return ye.Space;if(h1(e))return ye.Word;for(let t=0;t<s.length;t++)if(e.indexOf(s[t])>-1)return ye.Word;return ye.Other}}class Z{constructor(e,t,i,n,r,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Es(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Es(this,i),kr(this,i)}update(...e){return Bf(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let l of e.effects)l.is(en.reconfigure)?(t&&(n=new Map,t.compartments.forEach((h,c)=>n.set(c,h)),t=null),n.set(l.value.compartment,l.value.extension)):l.is(q.reconfigure)?(t=null,i=l.value):l.is(q.appendConfig)&&(t=null,i=Zi(i).concat(l.value));let r;t?r=e.startState.values.slice():(t=wr.resolve(i,n,this),r=new Z(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(h,c)=>c.reconfigure(h,this),null).values);let o=e.startState.facet(nl)?e.newSelection:e.newSelection.asSingle();new Z(t,e.newDoc,o,r,(l,h)=>h.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:O.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),r=[i.range],o=Zi(i.effects);for(let l=1;l<t.ranges.length;l++){let h=e(t.ranges[l]),c=this.changes(h.changes),u=c.map(n);for(let g=0;g<l;g++)r[g]=r[g].map(u);let p=n.mapDesc(c,!0);r.push(h.range.map(p)),n=n.compose(u),o=q.mapEffects(o,u).concat(q.mapEffects(Zi(h.effects),p))}return{changes:n,selection:O.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ce?e:Ce.of(e,this.doc.length,this.facet(Z.lineSeparator))}toText(e){return re.of(e.split(this.facet(Z.lineSeparator)||Zo))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Es(this,t),kr(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Be&&this.config.address[n.id]!=null&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],l=e[r];n.push(o.init(h=>o.spec.fromJSON(l,h)))}}return Z.create({doc:e.doc,selection:O.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=wr.resolve(e.extensions||[],new Map),i=e.doc instanceof re?e.doc:re.of((e.doc||"").split(t.staticFacet(Z.lineSeparator)||Zo)),n=e.selection?e.selection instanceof O?e.selection:O.single(e.selection.anchor,e.selection.head):O.single(0);return Of(n,i.length),t.staticFacet(nl)||(n=n.asSingle()),new Z(t,i,n,t.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(Z.tabSize)}get lineBreak(){return this.facet(Z.lineSeparator)||`
`}get readOnly(){return this.facet(Lf)}phrase(e,...t){for(let i of this.facet(Z.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let r=+(n||1);return!r||r>t.length?i:t[r-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let r of this.facet(Af))for(let o of r(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return c1(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let h=Ne(t,o,!1);if(r(t.slice(h,o))!=ye.Word)break;o=h}for(;l<n;){let h=Ne(t,l);if(r(t.slice(l,h))!=ye.Word)break;l=h}return o==l?null:O.range(o+i,l+i)}}Z.allowMultipleSelections=nl;Z.tabSize=F.define({combine:s=>s.length?s[0]:4});Z.lineSeparator=Tf;Z.readOnly=Lf;Z.phrases=F.define({compare(s,e){let t=Object.keys(s),i=Object.keys(e);return t.length==i.length&&t.every(n=>s[n]==e[n])}});Z.languageData=Af;Z.changeFilter=_f;Z.transactionFilter=Pf;Z.transactionExtender=Rf;en.reconfigure=q.define();function Et(s,e,t={}){let i={};for(let n of s)for(let r of Object.keys(n)){let o=n[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,r))i[r]=t[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Pi{eq(e){return this==e}range(e,t=e){return Vs.create(e,t,this)}}Pi.prototype.startSide=Pi.prototype.endSide=0;Pi.prototype.point=!1;Pi.prototype.mapMode=je.TrackDel;class Vs{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Vs(e,t,i)}}function ll(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class ea{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let r=i?this.to:this.from;for(let o=n,l=r.length;;){if(o==l)return o;let h=o+l>>1,c=r[h]-e||(i?this.value[h].endSide:this.value[h].startSide)-t;if(h==o)return c>=0?o:l;c>=0?l=h:o=h+1}}between(e,t,i,n){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(n(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let i=[],n=[],r=[],o=-1,l=-1;for(let h=0;h<this.value.length;h++){let c=this.value[h],u=this.from[h]+e,p=this.to[h]+e,g,b;if(u==p){let w=t.mapPos(u,c.startSide,c.mapMode);if(w==null||(g=b=w,c.startSide!=c.endSide&&(b=t.mapPos(u,c.endSide),b<g)))continue}else if(g=t.mapPos(u,c.startSide),b=t.mapPos(p,c.endSide),g>b||g==b&&c.startSide>0&&c.endSide<=0)continue;(b-g||c.endSide-c.startSide)<0||(o<0&&(o=g),c.point&&(l=Math.max(l,b-g)),i.push(c),n.push(g-o),r.push(b-o))}return{mapped:i.length?new ea(n,r,i,l):null,pos:o}}}class se{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new se(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(ll)),this.isEmpty)return t.length?se.of(t):this;let l=new Ef(this,null,-1).goto(0),h=0,c=[],u=new mi;for(;l.value||h<t.length;)if(h<t.length&&(l.from-t[h].from||l.startSide-t[h].value.startSide)>=0){let p=t[h++];u.addInner(p.from,p.to,p.value)||c.push(p)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(l.chunkIndex)<t[h].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||r<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||c.push(Vs.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?se.empty:this.nextLayer.update({add:c,filter:o,filterFrom:n,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],h=this.chunk[o],c=e.touchesRange(l,l+h.length);if(c===!1)n=Math.max(n,h.maxPoint),t.push(h),i.push(e.mapPos(l));else if(c===!0){let{mapped:u,pos:p}=h.map(l,e);u&&(n=Math.max(n,u.maxPoint),t.push(u),i.push(p))}}let r=this.nextLayer.map(e);return t.length==0?r:new se(i,t,r||se.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return zs.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return zs.from(e).goto(t)}static compare(e,t,i,n,r=-1){let o=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=r),l=t.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=r),h=Ph(o,l,i),c=new Ms(o,h,r),u=new Ms(l,h,r);i.iterGaps((p,g,b)=>Rh(c,p,u,g,b,n)),i.empty&&i.length==0&&Rh(c,0,u,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=999999999);let r=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=Ph(r,o),h=new Ms(r,l,0).goto(i),c=new Ms(o,l,0).goto(i);for(;;){if(h.to!=c.to||!al(h.active,c.active)||h.point&&(!c.point||!h.point.eq(c.point)))return!1;if(h.to>n)return!0;h.next(),c.next()}}static spans(e,t,i,n,r=-1){let o=new Ms(e,null,r).goto(t),l=t,h=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),p=o.pointFrom<t?u.length+1:Math.min(u.length,h);n.point(l,c,o.point,u,p,o.pointRank),h=Math.min(o.openEnd(c),u.length)}else c>l&&(n.span(l,c,o.active,h),h=o.openEnd(c));if(o.to>i)return h+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new mi;for(let n of e instanceof Vs?[e]:t?f1(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return se.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=se.empty;n=n.nextLayer)t=new se(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}}se.empty=new se([],[],null,-1);function f1(s){if(s.length>1)for(let e=s[0],t=1;t<s.length;t++){let i=s[t];if(ll(e,i)>0)return s.slice().sort(ll);e=i}return s}se.empty.nextLayer=se.empty;class mi{finishChunk(e){this.chunks.push(new ea(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new mi)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(se.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=se.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Ph(s,e,t){let i=new Map;for(let r of s)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let n=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(t?t.mapPos(l):l)==r.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+r.chunk[o].length))&&n.add(r.chunk[o])}return n}class Ef{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class zs{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new Ef(o,t,i,r));return n.length==1?n[0]:new zs(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Do(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Do(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Do(this.heap,0)}}}function Do(s,e){for(let t=s[e];;){let i=(e<<1)+1;if(i>=s.length)break;let n=s[i];if(i+1<s.length&&n.compare(s[i+1])>=0&&(n=s[i+1],i++),t.compare(n)<0)break;s[i]=t,s[e]=n,e=i}}class Ms{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=zs.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Nn(this.active,e),Nn(this.activeTo,e),Nn(this.activeRank,e),this.minActive=Lh(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||n-this.activeTo[t])>0;)t++;Bn(this.active,t,i),Bn(this.activeTo,t,n),Bn(this.activeRank,t,r),e&&Bn(e,t,this.cursor.from),this.minActive=Lh(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&Nn(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Rh(s,e,t,i,n,r){s.goto(e),t.goto(i);let o=i+n,l=i,h=i-e;for(;;){let c=s.to+h-t.to||s.endSide-t.endSide,u=c<0?s.to+h:t.to,p=Math.min(u,o);if(s.point||t.point?s.point&&t.point&&(s.point==t.point||s.point.eq(t.point))&&al(s.activeForPoint(s.to),t.activeForPoint(t.to))||r.comparePoint(l,p,s.point,t.point):p>l&&!al(s.active,t.active)&&r.compareRange(l,p,s.active,t.active),u>o)break;l=u,c<=0&&s.next(),c>=0&&t.next()}}function al(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!=e[t]&&!s[t].eq(e[t]))return!1;return!0}function Nn(s,e){for(let t=e,i=s.length-1;t<i;t++)s[t]=s[t+1];s.pop()}function Bn(s,e,t){for(let i=s.length-1;i>=e;i--)s[i+1]=s[i];s[e]=t}function Lh(s,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||s[n].endSide-s[t].endSide)<0&&(t=n,i=e[n]);return t}function fs(s,e,t=s.length){let i=0;for(let n=0;n<t;)s.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=Ne(s,n));return i}function hl(s,e,t,i){for(let n=0,r=0;;){if(r>=e)return n;if(n==s.length)break;r+=s.charCodeAt(n)==9?t-r%t:1,n=Ne(s,n)}return i===!0?-1:s.length}const cl="ͼ",Nh=typeof Symbol>"u"?"__"+cl:Symbol.for(cl),fl=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class gi{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,h,c){let u=[],p=/^@(\w+)\b/.exec(o[0]),g=p&&p[1]=="keyframes";if(p&&l==null)return h.push(o[0]+";");for(let b in l){let w=l[b];if(/&/.test(b))r(b.split(/,\s*/).map(v=>o.map(k=>v.replace(/&/,k))).reduce((v,k)=>v.concat(k)),w,h);else if(w&&typeof w=="object"){if(!p)throw new RangeError("The value of a property ("+b+") should be a primitive value.");r(n(b),w,u,g)}else w!=null&&u.push(b.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+w+";")}(u.length||g)&&h.push((i&&!p&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)r(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Bh[Nh]||1;return Bh[Nh]=e+1,cl+e.toString(36)}static mount(e,t,i){let n=e[fl],r=i&&i.nonce;n?r&&n.setNonce(r):n=new u1(e,r),n.mount(Array.isArray(t)?t:[t])}}let Eh=new Map;class u1{constructor(e,t){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let r=Eh.get(i);if(r)return e.adoptedStyleSheets=[r.sheet,...e.adoptedStyleSheets],e[fl]=r;this.sheet=new n.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Eh.set(i,this)}else{this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);let r=e.head||e;r.insertBefore(this.styleTag,r.firstChild)}this.modules=[],e[fl]=this}mount(e){let t=this.sheet,i=0,n=0;for(let r=0;r<e.length;r++){let o=e[r],l=this.modules.indexOf(o);if(l<n&&l>-1&&(this.modules.splice(l,1),n--,l=-1),l==-1){if(this.modules.splice(n++,0,o),t)for(let h=0;h<o.rules.length;h++)t.insertRule(o.rules[h],i++)}else{for(;n<l;)i+=this.modules[n++].rules.length;i+=o.rules.length,n++}}if(!t){let r="";for(let o=0;o<this.modules.length;o++)r+=this.modules[o].getRules()+`
`;this.styleTag.textContent=r}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var yi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$s={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},d1=typeof navigator<"u"&&/Mac/.test(navigator.platform),p1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Re=0;Re<10;Re++)yi[48+Re]=yi[96+Re]=String(Re);for(var Re=1;Re<=24;Re++)yi[Re+111]="F"+Re;for(var Re=65;Re<=90;Re++)yi[Re]=String.fromCharCode(Re+32),$s[Re]=String.fromCharCode(Re);for(var Ao in yi)$s.hasOwnProperty(Ao)||($s[Ao]=yi[Ao]);function m1(s){var e=d1&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||p1&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",t=!e&&s.key||(s.shiftKey?$s:yi)[s.keyCode]||s.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function xr(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function ul(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function g1(s){let e=s.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function rr(s,e){if(!e.anchorNode)return!1;try{return ul(s,e.anchorNode)}catch{return!1}}function rs(s){return s.nodeType==3?Ri(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function Is(s,e,t,i){return t?Ih(s,e,t,i,-1)||Ih(s,e,t,i,1):!1}function Us(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function Ih(s,e,t,i,n){for(;;){if(s==t&&e==i)return!0;if(e==(n<0?0:Gt(s))){if(s.nodeName=="DIV")return!1;let r=s.parentNode;if(!r||r.nodeType!=1)return!1;e=Us(s)+(n<0?0:1),s=r}else if(s.nodeType==1){if(s=s.childNodes[e+(n<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=n<0?Gt(s):0}else return!1}}function Gt(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function Wr(s,e){let t=e?s.left:s.right;return{left:t,right:t,top:s.top,bottom:s.bottom}}function y1(s){return{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function If(s,e){let t=e.width/s.offsetWidth,i=e.height/s.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-s.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-s.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function b1(s,e,t,i,n,r,o,l){let h=s.ownerDocument,c=h.defaultView||window;for(let u=s,p=!1;u&&!p;)if(u.nodeType==1){let g,b=u==h.body,w=1,v=1;if(b)g=y1(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(p=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let D=u.getBoundingClientRect();({scaleX:w,scaleY:v}=If(u,D)),g={left:D.left,right:D.left+u.clientWidth*w,top:D.top,bottom:D.top+u.clientHeight*v}}let k=0,S=0;if(n=="nearest")e.top<g.top?(S=-(g.top-e.top+o),t>0&&e.bottom>g.bottom+S&&(S=e.bottom-g.bottom+S+o)):e.bottom>g.bottom&&(S=e.bottom-g.bottom+o,t<0&&e.top-S<g.top&&(S=-(g.top+S-e.top+o)));else{let D=e.bottom-e.top,R=g.bottom-g.top;S=(n=="center"&&D<=R?e.top+D/2-R/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-R+o)-g.top}if(i=="nearest"?e.left<g.left?(k=-(g.left-e.left+r),t>0&&e.right>g.right+k&&(k=e.right-g.right+k+r)):e.right>g.right&&(k=e.right-g.right+r,t<0&&e.left<g.left+k&&(k=-(g.left+k-e.left+r))):k=(i=="center"?e.left+(e.right-e.left)/2-(g.right-g.left)/2:i=="start"==l?e.left-r:e.right-(g.right-g.left)+r)-g.left,k||S)if(b)c.scrollBy(k,S);else{let D=0,R=0;if(S){let _=u.scrollTop;u.scrollTop+=S/v,R=(u.scrollTop-_)*v}if(k){let _=u.scrollLeft;u.scrollLeft+=k/w,D=(u.scrollLeft-_)*w}e={left:e.left-D,top:e.top-R,right:e.right-D,bottom:e.bottom-R},D&&Math.abs(D-k)<1&&(i="nearest"),R&&Math.abs(R-S)<1&&(n="nearest")}if(b)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function w1(s){let e=s.ownerDocument;for(let t=s.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class k1{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Gt(t):0),i,Math.min(e.focusOffset,i?Gt(i):0))}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let zi=null;function Ff(s){if(s.setActive)return s.setActive();if(zi)return s.focus(zi);let e=[];for(let t=s;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(s.focus(zi==null?{get preventScroll(){return zi={preventScroll:!0},!0}}:void 0),!zi){zi=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],r=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let Fh;function Ri(s,e,t=e){let i=Fh||(Fh=document.createRange());return i.setEnd(s,t),i.setStart(s,e),i}function es(s,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",i);n.synthetic=!0,s.dispatchEvent(n);let r=new KeyboardEvent("keyup",i);return r.synthetic=!0,s.dispatchEvent(r),n.defaultPrevented||r.defaultPrevented}function x1(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function Wf(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function v1(s,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,Gt(t));;)if(i){if(t.nodeType!=1)return!1;let n=t.childNodes[i-1];n.contentEditable=="false"?i--:(t=n,i=Gt(t))}else{if(t==s)return!0;i=Us(t),t=t.parentNode}}function Hf(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}class We{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new We(e.parentNode,Us(e),t)}static after(e,t){return new We(e.parentNode,Us(e)+1,t)}}const ta=[];class pe{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,n=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=n?n.nextSibling:i.firstChild)){let l=pe.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.flags&=-8}if(r=n?n.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&r!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=Wh(r);else i.insertBefore(o.dom,r);n=o.dom}for(r=n?n.nextSibling:i.firstChild,r&&t&&t.node==i&&(t.written=!0);r;)r=Wh(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=Gt(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;n==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?n=-1:n=1),e=r}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!pe.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,r=0;;n++){let o=this.children[n];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,r=-1,o=-1,l=-1;for(let h=0,c=i,u=i;h<this.children.length;h++){let p=this.children[h],g=c+p.length;if(c<e&&g>t)return p.domBoundsAround(e,t,c);if(g>=e&&n==-1&&(n=h,r=c),c>t&&p.dom.parentNode==this.dom){o=h,l=u;break}u=g,c=g+p.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=ta){this.markDirty();for(let n=e;n<t;n++){let r=this.children[n];r.parent==this&&i.indexOf(r)<0&&r.destroy()}this.children.splice(e,t-e,...i);for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Yf(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,n,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}pe.prototype.breakAfter=0;function Wh(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class Yf{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function Vf(s,e,t,i,n,r,o,l,h){let{children:c}=s,u=c.length?c[e]:null,p=r.length?r[r.length-1]:null,g=p?p.breakAfter:o;if(!(e==i&&u&&!o&&!g&&r.length<2&&u.merge(t,n,r.length?p:null,t==0,l,h))){if(i<c.length){let b=c[i];b&&(n<b.length||b.breakAfter&&(p!=null&&p.breakAfter))?(e==i&&(b=b.split(n),n=0),!g&&p&&b.merge(0,n,p,!0,0,h)?r[r.length-1]=b:((n||b.children.length&&!b.children[0].length)&&b.merge(0,n,null,!1,0,h),r.push(b))):b!=null&&b.breakAfter&&(p?p.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,t>0&&(!o&&r.length&&u.merge(t,u.length,r[0],!1,l,0)?u.breakAfter=r.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,l,0),e++));e<i&&r.length;)if(c[i-1].become(r[r.length-1]))i--,r.pop(),h=r.length?0:l;else if(c[e].become(r[0]))e++,r.shift(),l=r.length?0:h;else break;!r.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,l,h)&&e--,(e<i||r.length)&&s.replaceChildren(e,i,r)}}function zf(s,e,t,i,n,r){let o=s.childCursor(),{i:l,off:h}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),p=e-t;for(let g of i)p+=g.length;s.length+=p,Vf(s,c,u,l,h,i,0,n,r)}let ot=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},dl=typeof document<"u"?document:{documentElement:{style:{}}};const pl=/Edge\/(\d+)/.exec(ot.userAgent),$f=/MSIE \d/.test(ot.userAgent),ml=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ot.userAgent),Hr=!!($f||ml||pl),Hh=!Hr&&/gecko\/(\d+)/i.test(ot.userAgent),To=!Hr&&/Chrome\/(\d+)/.exec(ot.userAgent),Yh="webkitFontSmoothing"in dl.documentElement.style,Uf=!Hr&&/Apple Computer/.test(ot.vendor),Vh=Uf&&(/Mobile\/\w+/.test(ot.userAgent)||ot.maxTouchPoints>2);var W={mac:Vh||/Mac/.test(ot.platform),windows:/Win/.test(ot.platform),linux:/Linux|X11/.test(ot.platform),ie:Hr,ie_version:$f?dl.documentMode||6:ml?+ml[1]:pl?+pl[1]:0,gecko:Hh,gecko_version:Hh?+(/Firefox\/(\d+)/.exec(ot.userAgent)||[0,0])[1]:0,chrome:!!To,chrome_version:To?+To[1]:0,ios:Vh,android:/Android\b/.test(ot.userAgent),webkit:Yh,safari:Uf,webkit_version:Yh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:dl.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const S1=256;class Kt extends pe{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Kt)||this.length-(t-e)+i.length>S1||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Kt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new We(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return C1(this.dom,e,t)}}class Qt extends pe{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(Wf(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,n,r,o){return i&&(!(i instanceof Qt&&i.mark.eq(this.mark))||e&&r<=0||t<this.length&&o<=0)?!1:(zf(this,e,t,i?i.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,r=0;for(let l of this.children){let h=i+l.length;h>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=r),i=h,r++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Qt(this.mark,t,o)}domAtPos(e){return jf(this,e)}coordsAt(e,t){return Gf(this,e,t)}}function C1(s,e,t){let i=s.nodeValue.length;e>i&&(e=i);let n=e,r=e,o=0;e==0&&t<0||e==i&&t>=0?W.chrome||W.gecko||(e?(n--,o=1):r<i&&(r++,o=-1)):t<0?n--:r<i&&r++;let l=Ri(s,n,r).getClientRects();if(!l.length)return null;let h=l[(o?o<0:t>=0)?0:l.length-1];return W.safari&&!o&&h.width==0&&(h=Array.prototype.find.call(l,c=>c.width)||h),o?Wr(h,o<0):h||null}class hi extends pe{static create(e,t,i){return new hi(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=hi.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,n,r,o){return i&&(!(i instanceof hi)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof hi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return re.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):re.empty}domAtPos(e){return(this.length?e==0:this.side>0)?We.before(this.dom):We.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let n=this.dom.getClientRects(),r=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?n.length-1:0;r=n[l],!(e>0?l==0:l==n.length-1||r.top<r.bottom);l+=o?-1:1);return Wr(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class os extends pe{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof os&&e.side==this.side}split(){return new os(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?We.before(this.dom):We.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return re.empty}get isHidden(){return!0}}Kt.prototype.children=hi.prototype.children=os.prototype.children=ta;function jf(s,e){let t=s.dom,{children:i}=s,n=0;for(let r=0;n<i.length;n++){let o=i[n],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=n;r>0;r--){let o=i[r-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let r=n;r<i.length;r++){let o=i[r];if(o.dom.parentNode==t)return o.domAtPos(0)}return new We(t,0)}function qf(s,e,t){let i,{children:n}=s;t>0&&e instanceof Qt&&n.length&&(i=n[n.length-1])instanceof Qt&&i.mark.eq(e.mark)?qf(i,e.children[0],t-1):(n.push(e),e.setParent(s)),s.length+=e.length}function Gf(s,e,t){let i=null,n=-1,r=null,o=-1;function l(c,u){for(let p=0,g=0;p<c.children.length&&g<=u;p++){let b=c.children[p],w=g+b.length;w>=u&&(b.children.length?l(b,u-g):(!r||r.isHidden&&t>0)&&(w>u||g==w&&b.getSide()>0)?(r=b,o=u-g):(g<u||g==w&&b.getSide()<0&&!b.isHidden)&&(i=b,n=u-g)),g=w}}l(s,e);let h=(t<0?i:r)||i||r;return h?h.coordsAt(Math.max(0,h==i?n:o),t):M1(s)}function M1(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let t=rs(e);return t[t.length-1]||null}function gl(s,e){for(let t in s)t=="class"&&e.class?e.class+=" "+s.class:t=="style"&&e.style?e.style+=";"+s.style:e[t]=s[t];return e}const zh=Object.create(null);function ia(s,e,t){if(s==e)return!0;s||(s=zh),e||(e=zh);let i=Object.keys(s),n=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=n.length-(t&&n.indexOf(t)>-1?1:0))return!1;for(let r of i)if(r!=t&&(n.indexOf(r)==-1||s[r]!==e[r]))return!1;return!0}function yl(s,e,t){let i=!1;if(e)for(let n in e)t&&n in t||(i=!0,n=="style"?s.style.cssText="":s.removeAttribute(n));if(t)for(let n in t)e&&e[n]==t[n]||(i=!0,n=="style"?s.style.cssText=t[n]:s.setAttribute(n,t[n]));return i}function O1(s){let e=Object.create(null);for(let t=0;t<s.attributes.length;t++){let i=s.attributes[t];e[i.name]=i.value}return e}class Se extends pe{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,r,o){if(i){if(!(i instanceof Se))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),zf(this,e,t,i?i.children.slice():[],r,o),!0}split(e){let t=new Se;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)t.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ia(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){qf(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=gl(t,this.attrs||{})),i&&(this.attrs=gl({class:i},this.attrs||{}))}domAtPos(e){return jf(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(Wf(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(yl(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let n=this.dom.lastChild;for(;n&&pe.get(n)instanceof Qt;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=pe.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!W.ios||!this.children.some(r=>r instanceof Kt))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Kt)||/[^ -~]/.test(i.text))return null;let n=rs(i.dom);if(n.length!=1)return null;e+=n[0].width,t=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=Gf(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-n.lineHeight)<2&&n.textHeight<r){let o=(r-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}covers(){return!0}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let r=e.children[i],o=n+r.length;if(o>=t){if(r instanceof Se)return r;if(o>t)break}n=o+r.breakAfter}return null}}class fi extends pe{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,r,o){return i&&(!(i instanceof fi)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?We.before(this.dom):We.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new fi(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return ta}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):re.empty}domBoundsAround(){return null}become(e){return e instanceof fi&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class Zt{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ge=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(Ge||(Ge={}));class V extends Pi{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new tn(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new bi(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:r,end:o}=Kf(e,t);i=(r?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new bi(e,i,n,t,e.widget||null,!0)}static line(e){return new sn(e)}static set(e,t=!1){return se.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}V.none=se.empty;class tn extends V{constructor(e){let{start:t,end:i}=Kf(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof tn&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&ia(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}tn.prototype.point=!1;class sn extends V{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof sn&&this.spec.class==e.spec.class&&ia(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}sn.prototype.mapMode=je.TrackBefore;sn.prototype.point=!0;class bi extends V{constructor(e,t,i,n,r,o){super(t,i,r,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?je.TrackBefore:je.TrackAfter:je.TrackDel}get type(){return this.startSide!=this.endSide?Ge.WidgetRange:this.startSide<=0?Ge.WidgetBefore:Ge.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof bi&&D1(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}bi.prototype.point=!0;function Kf(s,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=s;return t==null&&(t=s.inclusive),i==null&&(i=s.inclusive),{start:t??e,end:i??e}}function D1(s,e){return s==e||!!(s&&e&&s.compare(e))}function bl(s,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=s?t[n]=Math.max(t[n],e):t.push(s,e)}class Fs{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof fi&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Se),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(En(new os(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof fi)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=r,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(En(new Kt(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof bi){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof bi)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new fi(i.widget||new $h("div"),l,i));else{let h=hi.create(i.widget||new $h("span"),l,l?0:i.startSide),c=this.atCursorPos&&!h.isEditable&&r<=n.length&&(e<t||i.startSide>0),u=!h.isEditable&&(e<t||r>n.length||i.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!c&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),c&&(p.append(En(new os(1),n),r),r=n.length+Math.max(0,r-n.length)),p.append(En(h,n),r),this.atCursorPos=u,this.pendingBuffer=u?e<t||r>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,n,r){let o=new Fs(e,t,i,r);return o.openEnd=se.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function En(s,e){for(let t of e)s=new Qt(t,[s],s.length);return s}class $h extends Zt{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}var me=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(me||(me={}));const Li=me.LTR,sa=me.RTL;function Qf(s){let e=[];for(let t=0;t<s.length;t++)e.push(1<<+s[t]);return e}const A1=Qf("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),T1=Qf("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),wl=Object.create(null),Dt=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),t=s.charCodeAt(1);wl[e]=t,wl[t]=-e}function Jf(s){return s<=247?A1[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?T1[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8204?256:64336<=s&&s<=65023?4:1}const _1=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ci{get dir(){return this.level%2?sa:Li}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,n){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(r<0||(n!=0?n<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function Xf(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++){let i=s[t],n=e[t];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!Xf(i.inner,n.inner))return!1}return!0}const he=[];function P1(s,e,t,i,n){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:e,l=r<i.length?i[r].from:t,h=r?256:n;for(let c=o,u=h,p=h;c<l;c++){let g=Jf(s.charCodeAt(c));g==512?g=u:g==8&&p==4&&(g=16),he[c]=g==4?2:g,g&7&&(p=g),u=g}for(let c=o,u=h,p=h;c<l;c++){let g=he[c];if(g==128)c<l-1&&u==he[c+1]&&u&24?g=he[c]=u:he[c]=256;else if(g==64){let b=c+1;for(;b<l&&he[b]==64;)b++;let w=c&&u==8||b<t&&he[b]==8?p==1?1:8:256;for(let v=c;v<b;v++)he[v]=w;c=b-1}else g==8&&p==1&&(he[c]=1);u=g,g&7&&(p=g)}}}function R1(s,e,t,i,n){let r=n==1?2:1;for(let o=0,l=0,h=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:t;for(let p=c,g,b,w;p<u;p++)if(b=wl[g=s.charCodeAt(p)])if(b<0){for(let v=l-3;v>=0;v-=3)if(Dt[v+1]==-b){let k=Dt[v+2],S=k&2?n:k&4?k&1?r:n:0;S&&(he[p]=he[Dt[v]]=S),l=v;break}}else{if(Dt.length==189)break;Dt[l++]=p,Dt[l++]=g,Dt[l++]=h}else if((w=he[p])==2||w==1){let v=w==n;h=v?0:1;for(let k=l-3;k>=0;k-=3){let S=Dt[k+2];if(S&2)break;if(v)Dt[k+2]|=2;else{if(S&4)break;Dt[k+2]|=4}}}}}function L1(s,e,t,i){for(let n=0,r=i;n<=t.length;n++){let o=n?t[n-1].to:s,l=n<t.length?t[n].from:e;for(let h=o;h<l;){let c=he[h];if(c==256){let u=h+1;for(;;)if(u==l){if(n==t.length)break;u=t[n++].to,l=n<t.length?t[n].from:e}else if(he[u]==256)u++;else break;let p=r==1,g=(u<e?he[u]:i)==1,b=p==g?p?1:2:i;for(let w=u,v=n,k=v?t[v-1].to:s;w>h;)w==k&&(w=t[--v].from,k=v?t[v-1].to:s),he[--w]=b;h=u}else r=c,h++}}}function kl(s,e,t,i,n,r,o){let l=i%2?2:1;if(i%2==n%2)for(let h=e,c=0;h<t;){let u=!0,p=!1;if(c==r.length||h<r[c].from){let v=he[h];v!=l&&(u=!1,p=v==16)}let g=!u&&l==1?[]:null,b=u?i:i+1,w=h;e:for(;;)if(c<r.length&&w==r[c].from){if(p)break e;let v=r[c];if(!u)for(let k=v.to,S=c+1;;){if(k==t)break e;if(S<r.length&&r[S].from==k)k=r[S++].to;else{if(he[k]==l)break e;break}}if(c++,g)g.push(v);else{v.from>h&&o.push(new ci(h,v.from,b));let k=v.direction==Li!=!(b%2);xl(s,k?i+1:i,n,v.inner,v.from,v.to,o),h=v.to}w=v.to}else{if(w==t||(u?he[w]!=l:he[w]==l))break;w++}g?kl(s,h,w,i+1,n,g,o):h<w&&o.push(new ci(h,w,b)),h=w}else for(let h=t,c=r.length;h>e;){let u=!0,p=!1;if(!c||h>r[c-1].to){let v=he[h-1];v!=l&&(u=!1,p=v==16)}let g=!u&&l==1?[]:null,b=u?i:i+1,w=h;e:for(;;)if(c&&w==r[c-1].to){if(p)break e;let v=r[--c];if(!u)for(let k=v.from,S=c;;){if(k==e)break e;if(S&&r[S-1].to==k)k=r[--S].from;else{if(he[k-1]==l)break e;break}}if(g)g.push(v);else{v.to<h&&o.push(new ci(v.to,h,b));let k=v.direction==Li!=!(b%2);xl(s,k?i+1:i,n,v.inner,v.from,v.to,o),h=v.from}w=v.from}else{if(w==e||(u?he[w-1]!=l:he[w-1]==l))break;w--}g?kl(s,w,h,i+1,n,g,o):w<h&&o.push(new ci(w,h,b)),h=w}}function xl(s,e,t,i,n,r,o){let l=e%2?2:1;P1(s,n,r,i,l),R1(s,n,r,i,l),L1(n,r,i,l),kl(s,n,r,e,t,i,o)}function N1(s,e,t){if(!s)return[new ci(0,0,e==sa?1:0)];if(e==Li&&!t.length&&!_1.test(s))return Zf(s.length);if(t.length)for(;s.length>he.length;)he[he.length]=256;let i=[],n=e==Li?0:1;return xl(s,n,n,t,0,s.length,i),i}function Zf(s){return[new ci(0,s,0)]}let eu="";function B1(s,e,t,i,n){var r;let o=i.head-s.from,l=ci.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),h=e[l],c=h.side(n,t);if(o==c){let g=l+=n?1:-1;if(g<0||g>=e.length)return null;h=e[l=g],o=h.side(!n,t),c=h.side(n,t)}let u=Ne(s.text,o,h.forward(n,t));(u<h.from||u>h.to)&&(u=c),eu=s.text.slice(Math.min(o,u),Math.max(o,u));let p=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return p&&u==c&&p.level+(n?0:1)<h.level?O.cursor(p.side(!n,t)+s.from,p.forward(n,t)?1:-1,p.level):O.cursor(u+s.from,h.forward(n,t)?-1:1,h.level)}function E1(s,e,t){for(let i=e;i<t;i++){let n=Jf(s.charCodeAt(i));if(n==1)return Li;if(n==2||n==4)return sa}return Li}const tu=F.define(),iu=F.define(),su=F.define(),nu=F.define(),vl=F.define(),ru=F.define(),ou=F.define(),lu=F.define({combine:s=>s.some(e=>e)}),au=F.define({combine:s=>s.some(e=>e)});class ts{constructor(e,t="nearest",i="nearest",n=5,r=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new ts(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ts(O.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const In=q.define({map:(s,e)=>s.map(e)});function dt(s,e,t){let i=s.facet(nu);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Yr=F.define({combine:s=>s.length?s[0]:!0});let I1=0;const Ts=F.define();class ke{constructor(e,t,i,n,r){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=n,this.extension=r(this)}static define(e,t){const{eventHandlers:i,eventObservers:n,provide:r,decorations:o}=t||{};return new ke(I1++,e,i,n,l=>{let h=[Ts.of(l)];return o&&h.push(js.of(c=>{let u=c.plugin(l);return u?o(u):V.none})),r&&h.push(r(l)),h})}static fromClass(e,t){return ke.define(i=>new e(i),t)}}class _o{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(dt(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){dt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){dt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const hu=F.define(),na=F.define(),js=F.define(),cu=F.define(),ra=F.define(),fu=F.define();function Uh(s,e){let t=s.state.facet(fu);if(!t.length)return t;let i=t.map(r=>r instanceof Function?r(s):r),n=[];return se.spans(i,e.from,e.to,{point(){},span(r,o,l,h){let c=r-e.from,u=o-e.from,p=n;for(let g=l.length-1;g>=0;g--,h--){let b=l[g].spec.bidiIsolate,w;if(b==null&&(b=E1(e.text,c,u)),h>0&&p.length&&(w=p[p.length-1]).to==c&&w.direction==b)w.to=u,p=w.inner;else{let v={from:c,to:u,direction:b,inner:[]};p.push(v),p=v.inner}}}}),n}const uu=F.define();function du(s){let e=0,t=0,i=0,n=0;for(let r of s.state.facet(uu)){let o=r(s);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:t,top:i,bottom:n}}const _s=F.define();class pt{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new pt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,r=0,o=0,l=0;;n++){let h=n==e.length?null:e[n],c=o-l,u=h?h.fromB:1e9;for(;r<t.length&&t[r]<u;){let p=t[r],g=t[r+1],b=Math.max(l,p),w=Math.min(u,g);if(b<=w&&new pt(b+c,w+c,b,w).addToSet(i),g>u)break;r+=2}if(!h)return i;new pt(h.fromA,h.toA,h.fromB,h.toB).addToSet(i),o=h.toA,l=h.toB}}}class vr{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ce.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let n=[];this.changes.iterChangedRanges((r,o,l,h)=>n.push(new pt(r,o,l,h))),this.changedRanges=n}static create(e,t,i){return new vr(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class jh extends pe{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Se],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new pt(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let n=-1;this.view.inputState.composing>=0&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?n=this.domChanged.newSel.head:!$1(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let r=n>-1?W1(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new pt(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(W.ie||W.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),h=V1(o,l,e.changes);return i=pt.extendWithRanges(i,h),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=W.chrome||W.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof fi&&o.widget instanceof qh&&r.push(o.dom);n.updateGaps(r)}updateChildren(e,t,i){let n=i?i.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:h,toA:c,fromB:u,toB:p}=l,g,b,w,v;if(i&&i.range.fromB<p&&i.range.toB>u){let _=Fs.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),A=Fs.build(this.view.state.doc,i.range.toB,p,this.decorations,this.dynamicDecorationMap);b=_.breakAtStart,w=_.openStart,v=A.openEnd;let N=this.compositionView(i);A.breakAtStart?N.breakAfter=1:A.content.length&&N.merge(N.length,N.length,A.content[0],!1,A.openStart,0)&&(N.breakAfter=A.content[0].breakAfter,A.content.shift()),_.content.length&&N.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd)&&_.content.pop(),g=_.content.concat(N).concat(A.content)}else({content:g,breakAtStart:b,openStart:w,openEnd:v}=Fs.build(this.view.state.doc,u,p,this.decorations,this.dynamicDecorationMap));let{i:k,off:S}=r.findPos(c,1),{i:D,off:R}=r.findPos(h,-1);Vf(this,D,R,k,S,g,b,w,v)}i&&this.fixCompositionDOM(i)}compositionView(e){let t=new Kt(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new Qt(n,[t],t.length);let i=new Se;return i.append(t,0),i}fixCompositionDOM(e){let t=(r,o)=>{o.flags|=8|(o.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(o);let l=pe.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];t(e.line,n);for(let r=e.marks.length-1;r>=-1;r--)i=n.childPos(i.off,1),n=n.children[i.i],t(r>=0?e.marks[r].node:e.text,n)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,r=!n&&rr(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||t||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?h:this.moveToLine(this.domAtPos(l.head));if(W.gecko&&l.empty&&!this.hasComposition&&F1(h)){let p=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(p,h.node.childNodes[h.offset]||null)),h=c=new We(p,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Is(h.node,h.offset,u.anchorNode,u.anchorOffset)||!Is(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{W.android&&W.chrome&&this.dom.contains(u.focusNode)&&z1(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=xr(this.view.root);if(p)if(l.empty){if(W.gecko){let g=H1(h.node,h.offset);if(g&&g!=3){let b=mu(h.node,h.offset,g==1?1:-1);b&&(h=new We(b.node,b.offset))}}p.collapse(h.node,h.offset),l.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=l.bidiLevel)}else if(p.extend){p.collapse(h.node,h.offset);try{p.extend(c.node,c.offset)}catch{}}else{let g=document.createRange();l.anchor>l.head&&([h,c]=[c,h]),g.setEnd(c.node,c.offset),g.setStart(h.node,h.offset),p.removeAllRanges(),p.addRange(g)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(h,c)),this.impreciseAnchor=h.precise?null:new We(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new We(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Is(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=xr(e.root),{anchorNode:n,anchorOffset:r}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=Se.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let h=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!h||!c||h.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);i.collapse(u.node,u.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=t.from&&i.collapse(n,r)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let n=e.offset;!i&&n<t.childNodes.length;n++){let r=pe.get(t.childNodes[n]);r instanceof Se&&(i=r.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let r=pe.get(t.childNodes[n]);r instanceof Se&&(i=r.domAtPos(r.length))}return i?new We(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=pe.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof Se)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,n=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],h=r-l.breakAfter,c=h-l.length;if(h<e)break;c<=e&&(c<e||l.covers(-1))&&(h>e||l.covers(1))&&(!i||l instanceof Se&&!(i instanceof Se&&t>=0))&&(i=l,n=c),r=c}return i?i.coordsAt(e-n,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),n=this.children[t];if(!(n instanceof Se))return null;for(;n.children.length;){let{i:l,off:h}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=h}if(!(n instanceof Kt))return null;let r=Ne(n.text,i);if(r==i)return null;let o=Ri(n.dom,i,r).getClientRects();for(let l=0;l<o.length;l++){let h=o[l];if(l==o.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,h=this.view.textDirection==me.LTR;for(let c=0,u=0;u<this.children.length;u++){let p=this.children[u],g=c+p.length;if(g>n)break;if(c>=i){let b=p.dom.getBoundingClientRect();if(t.push(b.height),o){let w=p.dom.lastChild,v=w?rs(w):[];if(v.length){let k=v[v.length-1],S=h?k.right-b.left:b.right-k.left;S>l&&(l=S,this.minWidth=r,this.minWidthFrom=c,this.minWidthTo=g)}}}c=g+p.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?me.RTL:me.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Se){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=rs(e.firstChild)[0];t=e.getBoundingClientRect().height,i=r?r.width/27:7,n=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Yf(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let r=n==t.viewports.length?null:t.viewports[n],o=r?r.from-1:this.length;if(o>i){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(V.replace({widget:new qh(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return V.set(e)}updateDeco(){let e=this.view.state.facet(js).map((n,r)=>(this.dynamicDecorationMap[r]=typeof n=="function")?n(this.view):n),t=!1,i=this.view.state.facet(cu).map((n,r)=>{let o=typeof n=="function";return o&&(t=!0),o?n(this.view):n});i.length&&(this.dynamicDecorationMap[e.length]=t,e.push(se.join(i)));for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let r=du(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:h}=this.view.scrollDOM;b1(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==me.LTR)}}function F1(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}class qh extends Zt{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function pu(s,e){let t=s.observer.selectionRange,i=t.focusNode&&mu(t.focusNode,t.focusOffset,0);if(!i)return null;let n=e-i.offset;return{from:n,to:n+i.node.nodeValue.length,node:i.node}}function W1(s,e,t){let i=pu(s,t);if(!i)return null;let{node:n,from:r,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||s.state.doc.sliceString(i.from,i.to)!=l)return null;let h=e.invertedDesc,c=new pt(h.mapPos(r),h.mapPos(o),r,o),u=[];for(let p=n.parentNode;;p=p.parentNode){let g=pe.get(p);if(g instanceof Qt)u.push({node:p,deco:g.mark});else{if(g instanceof Se||p.nodeName=="DIV"&&p.parentNode==s.contentDOM)return{range:c,text:n,marks:u,line:p};if(p!=s.contentDOM)u.push({node:p,deco:new tn({inclusive:!0,attributes:O1(p),tagName:p.tagName.toLowerCase()})});else return null}}}function mu(s,e,t){if(t<=0)for(let i=s,n=e;;){if(i.nodeType==3)return{node:i,offset:n};if(i.nodeType==1&&n>0)i=i.childNodes[n-1],n=Gt(i);else break}if(t>=0)for(let i=s,n=e;;){if(i.nodeType==3)return{node:i,offset:n};if(i.nodeType==1&&n<i.childNodes.length&&t>=0)i=i.childNodes[n],n=0;else break}return null}function H1(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let Y1=class{constructor(){this.changes=[]}compareRange(e,t){bl(e,t,this.changes)}comparePoint(e,t){bl(e,t,this.changes)}};function V1(s,e,t){let i=new Y1;return se.compare(s,e,t,i),i.changes}function z1(s,e){for(let t=s;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function $1(s,e){let t=!1;return e&&s.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(t=!0)}),t}function U1(s,e,t=1){let i=s.charCategorizer(e),n=s.doc.lineAt(e),r=e-n.from;if(n.length==0)return O.cursor(e);r==0?t=1:r==n.length&&(t=-1);let o=r,l=r;t<0?o=Ne(n.text,r,!1):l=Ne(n.text,r);let h=i(n.text.slice(o,l));for(;o>0;){let c=Ne(n.text,o,!1);if(i(n.text.slice(c,o))!=h)break;o=c}for(;l<n.length;){let c=Ne(n.text,l);if(i(n.text.slice(l,c))!=h)break;l=c}return O.range(o+n.from,l+n.from)}function j1(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function q1(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function Po(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function Gh(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function Kh(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function Sl(s,e,t){let i,n,r,o,l=!1,h,c,u,p;for(let w=s.firstChild;w;w=w.nextSibling){let v=rs(w);for(let k=0;k<v.length;k++){let S=v[k];n&&Po(n,S)&&(S=Gh(Kh(S,n.bottom),n.top));let D=j1(e,S),R=q1(t,S);if(D==0&&R==0)return w.nodeType==3?Qh(w,e,t):Sl(w,e,t);if(!i||o>R||o==R&&r>D){i=w,n=S,r=D,o=R;let _=R?t<S.top?-1:1:D?e<S.left?-1:1:0;l=!_||(_>0?k<v.length-1:k>0)}D==0?t>S.bottom&&(!u||u.bottom<S.bottom)?(h=w,u=S):t<S.top&&(!p||p.top>S.top)&&(c=w,p=S):u&&Po(u,S)?u=Kh(u,S.bottom):p&&Po(p,S)&&(p=Gh(p,S.top))}}if(u&&u.bottom>=t?(i=h,n=u):p&&p.top<=t&&(i=c,n=p),!i)return{node:s,offset:0};let g=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return Qh(i,g,t);if(l&&i.contentEditable!="false")return Sl(i,g,t);let b=Array.prototype.indexOf.call(s.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:s,offset:b}}function Qh(s,e,t){let i=s.nodeValue.length,n=-1,r=1e9,o=0;for(let l=0;l<i;l++){let h=Ri(s,l,l+1).getClientRects();for(let c=0;c<h.length;c++){let u=h[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let p=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&p<r){let g=e>=(u.left+u.right)/2,b=g;if((W.chrome||W.gecko)&&Ri(s,l).getBoundingClientRect().left==u.right&&(b=!g),p<=0)return{node:s,offset:l+(b?1:0)};n=l+(b?1:0),r=p}}}return{node:s,offset:n>-1?n:o>0?s.nodeValue.length:0}}function gu(s,e,t,i=-1){var n,r;let o=s.contentDOM.getBoundingClientRect(),l=o.top+s.viewState.paddingTop,h,{docHeight:c}=s.viewState,{x:u,y:p}=e,g=p-l;if(g<0)return 0;if(g>c)return s.state.doc.length;for(let _=s.viewState.heightOracle.textHeight/2,A=!1;h=s.elementAtHeight(g),h.type!=Ge.Text;)for(;g=i>0?h.bottom+_:h.top-_,!(g>=0&&g<=c);){if(A)return t?null:0;A=!0,i=-i}p=l+g;let b=h.from;if(b<s.viewport.from)return s.viewport.from==0?0:t?null:Jh(s,o,h,u,p);if(b>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:t?null:Jh(s,o,h,u,p);let w=s.dom.ownerDocument,v=s.root.elementFromPoint?s.root:w,k=v.elementFromPoint(u,p);k&&!s.contentDOM.contains(k)&&(k=null),k||(u=Math.max(o.left+1,Math.min(o.right-1,u)),k=v.elementFromPoint(u,p),k&&!s.contentDOM.contains(k)&&(k=null));let S,D=-1;if(k&&((n=s.docView.nearest(k))===null||n===void 0?void 0:n.isEditable)!=!1){if(w.caretPositionFromPoint){let _=w.caretPositionFromPoint(u,p);_&&({offsetNode:S,offset:D}=_)}else if(w.caretRangeFromPoint){let _=w.caretRangeFromPoint(u,p);_&&({startContainer:S,startOffset:D}=_,(!s.contentDOM.contains(S)||W.safari&&G1(S,D,u)||W.chrome&&K1(S,D,u))&&(S=void 0))}}if(!S||!s.docView.dom.contains(S)){let _=Se.find(s.docView,b);if(!_)return g>h.top+h.height/2?h.to:h.from;({node:S,offset:D}=Sl(_.dom,u,p))}let R=s.docView.nearest(S);if(!R)return null;if(R.isWidget&&((r=R.dom)===null||r===void 0?void 0:r.nodeType)==1){let _=R.dom.getBoundingClientRect();return e.y<_.top||e.y<=_.bottom&&e.x<=(_.left+_.right)/2?R.posAtStart:R.posAtEnd}else return R.localPosFromDOM(S,D)+R.posAtStart}function Jh(s,e,t,i,n){let r=Math.round((i-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&t.height>s.defaultLineHeight*1.5){let l=s.viewState.heightOracle.textHeight,h=Math.floor((n-t.top-(s.defaultLineHeight-l)*.5)/l);r+=h*s.viewState.heightOracle.lineLength}let o=s.state.sliceDoc(t.from,t.to);return t.from+hl(o,r,s.state.tabSize)}function G1(s,e,t){let i;if(s.nodeType!=3||e!=(i=s.nodeValue.length))return!1;for(let n=s.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return Ri(s,i-1,i).getBoundingClientRect().left>t}function K1(s,e,t){if(e!=0)return!1;for(let n=s;;){let r=n.parentNode;if(!r||r.nodeType!=1||r.firstChild!=n)return!1;if(r.classList.contains("cm-line"))break;n=r}let i=s.nodeType==1?s.getBoundingClientRect():Ri(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function Cl(s,e){let t=s.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==Ge.Text))return i}return t}function Q1(s,e,t,i){let n=Cl(s,e.head),r=!i||n.type!=Ge.Text||!(s.lineWrapping||n.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(r){let o=s.dom.getBoundingClientRect(),l=s.textDirectionAt(n.from),h=s.posAtCoords({x:t==(l==me.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(h!=null)return O.cursor(h,t?-1:1)}return O.cursor(t?n.to:n.from,t?-1:1)}function Xh(s,e,t,i){let n=s.state.doc.lineAt(e.head),r=s.bidiSpans(n),o=s.textDirectionAt(n.from);for(let l=e,h=null;;){let c=B1(n,r,o,l,t),u=eu;if(!c){if(n.number==(t?s.state.doc.lines:1))return l;u=`
`,n=s.state.doc.line(n.number+(t?1:-1)),r=s.bidiSpans(n),c=s.visualLineSide(n,!t)}if(h){if(!h(u))return l}else{if(!i)return c;h=i(u)}l=c}}function J1(s,e,t){let i=s.state.charCategorizer(e),n=i(t);return r=>{let o=i(r);return n==ye.Space&&(n=o),n==o}}function X1(s,e,t,i){let n=e.head,r=t?1:-1;if(n==(t?s.state.doc.length:0))return O.cursor(n,e.assoc);let o=e.goalColumn,l,h=s.contentDOM.getBoundingClientRect(),c=s.coordsAtPos(n,e.assoc||-1),u=s.documentTop;if(c)o==null&&(o=c.left-h.left),l=r<0?c.top:c.bottom;else{let b=s.viewState.lineBlockAt(n);o==null&&(o=Math.min(h.right-h.left,s.defaultCharacterWidth*(n-b.from))),l=(r<0?b.top:b.bottom)+u}let p=h.left+o,g=i??s.viewState.heightOracle.textHeight>>1;for(let b=0;;b+=10){let w=l+(g+b)*r,v=gu(s,{x:p,y:w},!1,r);if(w<h.top||w>h.bottom||(r<0?v<n:v>n)){let k=s.docView.coordsForChar(v),S=!k||w<k.top?-1:1;return O.cursor(v,S,void 0,o)}}}function or(s,e,t){for(;;){let i=0;for(let n of s)n.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let h=i||t||(e-r<o-e?-1:1);e=h<0?r:o,i=h}});if(!i)return e}}function Ro(s,e,t){let i=or(s.state.facet(ra).map(n=>n(s)),t.from,e.head>t.from?-1:1);return i==t.from?t:O.cursor(i,i<t.from?1:-1)}class Z1{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,W.safari&&e.contentDOM.addEventListener("input",()=>null),W.gecko&&mb(e.contentDOM.ownerDocument)}handleEvent(e){!lb(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,t);for(let n of i.handlers){if(t.defaultPrevented)break;if(n(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=eb(e),i=this.handlers,n=this.view.contentDOM;for(let r in t)if(r!="scroll"){let o=!t[r].handlers.length,l=i[r];l&&o!=!l.handlers.length&&(n.removeEventListener(r,this.handleEvent),l=null),l||n.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!t[r]&&n.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&bu.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),W.android&&W.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return W.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=yu.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||tb.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,es(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:W.safari&&!W.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Zh(s,e){return(t,i)=>{try{return e.call(s,i,t)}catch(n){dt(t.state,n)}}}function eb(s){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of s){let n=i.spec;if(n&&n.domEventHandlers)for(let r in n.domEventHandlers){let o=n.domEventHandlers[r];o&&t(r).handlers.push(Zh(i.value,o))}if(n&&n.domEventObservers)for(let r in n.domEventObservers){let o=n.domEventObservers[r];o&&t(r).observers.push(Zh(i.value,o))}}for(let i in kt)t(i).handlers.push(kt[i]);for(let i in xt)t(i).observers.push(xt[i]);return e}const yu=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],tb="dthko",bu=[16,17,18,20,91,92,224,225],Fn=6;function Wn(s){return Math.max(0,s)*.7+8}function ib(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class sb{constructor(e,t,i,n){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=w1(e.contentDOM),this.atoms=e.state.facet(ra).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Z.allowMultipleSelections)&&nb(e,t),this.dragging=ob(e,t)&&vu(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&ib(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,n=0,r=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=du(this.view);e.clientX-o.left<=r.left+Fn?i=-Wn(r.left-e.clientX):e.clientX+o.right>=r.right-Fn&&(i=Wn(e.clientX-r.right)),e.clientY-o.top<=r.top+Fn?n=-Wn(r.top-e.clientY):e.clientY+o.bottom>=r.bottom-Fn&&(n=Wn(e.clientY-r.bottom)),this.setScrollSpeed(i,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],r=null;if(n.empty){let o=or(this.atoms,n.from,0);o!=n.from&&(r=O.cursor(o,-1))}else{let o=or(this.atoms,n.from,-1),l=or(this.atoms,n.to,1);(o!=n.from||l!=n.to)&&(r=O.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}r&&(t||(t=e.ranges.slice()),t[i]=r)}return t?O.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function nb(s,e){let t=s.state.facet(tu);return t.length?t[0](e):W.mac?e.metaKey:e.ctrlKey}function rb(s,e){let t=s.state.facet(iu);return t.length?t[0](e):W.mac?!e.altKey:!e.ctrlKey}function ob(s,e){let{main:t}=s.state.selection;if(t.empty)return!1;let i=xr(s.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let r=0;r<n.length;r++){let o=n[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function lb(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=s.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=pe.get(t))&&i.ignoreEvent(e))return!1;return!0}const kt=Object.create(null),xt=Object.create(null),wu=W.ie&&W.ie_version<15||W.ios&&W.webkit_version<604;function ab(s){let e=s.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{s.focus(),t.remove(),ku(s,t.value)},50)}function ku(s,e){let{state:t}=s,i,n=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if(Ml!=null&&t.selection.ranges.every(h=>h.empty)&&Ml==r.toString()){let h=-1;i=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==h)return{range:c};h=u.from;let p=t.toText((o?r.line(n++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:p},range:O.cursor(c.from+p.length)}})}else o?i=t.changeByRange(h=>{let c=r.line(n++);return{changes:{from:h.from,to:h.to,insert:c.text},range:O.cursor(h.from+c.length)}}):i=t.replaceSelection(r);s.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}xt.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft};kt.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&(s.inputState.lastEscPress=Date.now()),!1);xt.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")};xt.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")};kt.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of s.state.facet(su))if(t=i(s,e),t)break;if(!t&&e.button==0&&(t=fb(s,e)),t){let i=!s.hasFocus;s.inputState.startMouseSelection(new sb(s,e,t,i)),i&&s.observer.ignore(()=>Ff(s.contentDOM));let n=s.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}return!1};function ec(s,e,t,i){if(i==1)return O.cursor(e,t);if(i==2)return U1(s.state,e,t);{let n=Se.find(s.docView,e),r=s.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:r.from,l=n?n.posAtEnd:r.to;return l<s.state.doc.length&&l==r.to&&l++,O.range(o,l)}}let xu=(s,e)=>s>=e.top&&s<=e.bottom,tc=(s,e,t)=>xu(e,t)&&s>=t.left&&s<=t.right;function hb(s,e,t,i){let n=Se.find(s.docView,e);if(!n)return 1;let r=e-n.posAtStart;if(r==0)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&tc(t,i,o))return-1;let l=n.coordsAt(r,1);return l&&tc(t,i,l)?1:o&&xu(i,o)?-1:1}function ic(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:hb(s,t,e.clientX,e.clientY)}}const cb=W.ie&&W.ie_version<=11;let sc=null,nc=0,rc=0;function vu(s){if(!cb)return s.detail;let e=sc,t=rc;return sc=s,rc=Date.now(),nc=!e||t>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(nc+1)%3:1}function fb(s,e){let t=ic(s,e),i=vu(e),n=s.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),n=n.map(r.changes))},get(r,o,l){let h=ic(s,r),c,u=ec(s,h.pos,h.bias,i);if(t.pos!=h.pos&&!o){let p=ec(s,t.pos,t.bias,i),g=Math.min(p.from,u.from),b=Math.max(p.to,u.to);u=g<u.from?O.range(g,b):O.range(b,g)}return o?n.replaceRange(n.main.extend(u.from,u.to)):l&&i==1&&n.ranges.length>1&&(c=ub(n,h.pos))?c:l?n.addRange(u):O.create([u])}}}function ub(s,e){for(let t=0;t<s.ranges.length;t++){let{from:i,to:n}=s.ranges[t];if(i<=e&&n>=e)return O.create(s.ranges.slice(0,t).concat(s.ranges.slice(t+1)),s.mainIndex==t?0:s.mainIndex-(s.mainIndex>t?1:0))}return null}kt.dragstart=(s,e)=>{let{selection:{main:t}}=s.state;if(e.target.draggable){let n=s.docView.nearest(e.target);if(n&&n.isWidget){let r=n.posAtStart,o=r+n.length;(r>=t.to||o<=t.from)&&(t=O.range(r,o))}}let{inputState:i}=s;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",s.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};kt.dragend=s=>(s.inputState.draggedContent=null,!1);function oc(s,e,t,i){if(!t)return;let n=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=s.inputState,o=i&&r&&rb(s,e)?{from:r.from,to:r.to}:null,l={from:n,insert:t},h=s.state.changes(o?[o,l]:l);s.focus(),s.dispatch({changes:h,selection:{anchor:h.mapPos(n,-1),head:h.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),s.inputState.draggedContent=null}kt.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),n=0,r=()=>{++n==t.length&&oc(s,e,i.filter(o=>o!=null).join(s.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return oc(s,e,i,!0),!0}return!1};kt.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let t=wu?null:e.clipboardData;return t?(ku(s,t.getData("text/plain")||t.getData("text/uri-text")),!0):(ab(s),!1)};function db(s,e){let t=s.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),s.focus()},50)}function pb(s){let e=[],t=[],i=!1;for(let n of s.selection.ranges)n.empty||(e.push(s.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:r}of s.selection.ranges){let o=s.doc.lineAt(r);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(s.doc.length,o.to+1)})),n=o.number}i=!0}return{text:e.join(s.lineBreak),ranges:t,linewise:i}}let Ml=null;kt.copy=kt.cut=(s,e)=>{let{text:t,ranges:i,linewise:n}=pb(s.state);if(!t&&!n)return!1;Ml=n?t:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=wu?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",t),!0):(db(s,t),!1)};const Su=Xt.define();function Cu(s,e){let t=[];for(let i of s.facet(ou)){let n=i(s,e);n&&t.push(n)}return t?s.update({effects:t,annotations:Su.of(!0)}):null}function Mu(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let t=Cu(s.state,e);t?s.dispatch(t):s.update([])}},10)}xt.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),Mu(s)};xt.blur=s=>{s.observer.clearSelectionRange(),Mu(s)};xt.compositionstart=xt.compositionupdate=s=>{s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0)};xt.compositionend=s=>{s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,W.chrome&&W.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50)};xt.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};kt.beforeinput=(s,e)=>{var t;let i;if(W.chrome&&W.android&&(i=yu.find(n=>n.inputType==e.inputType))&&(s.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let n=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var r;(((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0)>n+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return!1};const lc=new Set;function mb(s){lc.has(s)||(lc.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const ac=["pre-wrap","normal","pre-line","break-spaces"];class gb{constructor(e){this.lineWrapping=e,this.doc=re.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return ac.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,r,o){let l=ac.indexOf(e)>-1,h=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=n,this.lineLength=r,h){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return h}}class yb{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Pt{constructor(e,t,i,n,r){this.from=e,this.length=t,this.top=i,this.height=n,this._content=r}get type(){return typeof this._content=="number"?Ge.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof bi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Pt(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var de=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(de||(de={}));const lr=.001;class Ke{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>lr&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Ke.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let r=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:h,toA:c,fromB:u,toB:p}=n[l],g=r.lineAt(h,de.ByPosNoHeight,i.setDoc(t),0,0),b=g.to>=c?g:r.lineAt(c,de.ByPosNoHeight,i,0,0);for(p+=b.to-c,c=b.to;l>0&&g.from<=n[l-1].toA;)h=n[l-1].fromA,u=n[l-1].fromB,l--,h<g.from&&(g=r.lineAt(h,de.ByPosNoHeight,i,0,0));u+=g.from-h,h=g.from;let w=oa.build(i.setDoc(o),e,u,p);r=r.replace(h,c,w)}return r.updateHeight(i,0)}static empty(){return new nt(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,r=0;for(;;)if(t==i)if(n>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(r>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(n<r){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new bb(Ke.of(e.slice(0,t)),o,Ke.of(e.slice(i)))}}Ke.prototype.size=1;class Ou extends Ke{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,n){return new Pt(n,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,t,i,n,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,i,n,r))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class nt extends Ou{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,n){return new Pt(n,this.length,i,this.height,this.breaks)}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof nt||n instanceof _e&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof _e?n=new nt(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):Ke.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class _e extends Ke{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,r=n-i+1,o,l=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*r);o=h/r,this.length>r+1&&(l=(this.height-h)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(e,t,i,n){let{firstLine:r,lastLine:o,perLine:l,perChar:h}=this.heightMetrics(t,n);if(t.lineWrapping){let c=n+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),u=t.doc.lineAt(c),p=l+u.length*h,g=Math.max(i,e-p/2);return new Pt(u.from,u.length,g,p,0)}else{let c=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:u,length:p}=t.doc.line(r+c);return new Pt(u,p,i+l*c,l,0)}}lineAt(e,t,i,n,r){if(t==de.ByHeight)return this.blockAt(e,i,n,r);if(t==de.ByPosNoHeight){let{from:b,to:w}=i.doc.lineAt(e);return new Pt(b,w-b,0,0,0)}let{firstLine:o,perLine:l,perChar:h}=this.heightMetrics(i,r),c=i.doc.lineAt(e),u=l+c.length*h,p=c.number-o,g=n+l*p+h*(c.from-r-p);return new Pt(c.from,c.length,Math.max(n,Math.min(g,n+this.height-u)),u,0)}forEachLine(e,t,i,n,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:l,perLine:h,perChar:c}=this.heightMetrics(i,r);for(let u=e,p=n;u<=t;){let g=i.doc.lineAt(u);if(u==e){let w=g.number-l;p+=h*w+c*(e-r-w)}let b=h+c*g.length;o(new Pt(g.from,g.length,p,b,0)),p+=b,u=g.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let r=i[i.length-1];r instanceof _e?i[i.length-1]=new _e(r.length+n):i.push(null,new _e(n-1))}if(e>0){let r=i[0];r instanceof _e?i[0]=new _e(e+r.length):i.unshift(new _e(e-1),null)}return Ke.of(i)}decomposeLeft(e,t){t.push(new _e(e-1),null)}decomposeRight(e,t){t.push(null,new _e(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let r=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),h=-1;for(n.from>t&&o.push(new _e(n.from-t-1).updateHeight(e,t));l<=r&&n.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let p=n.heights[n.index++];h==-1?h=p:Math.abs(p-h)>=lr&&(h=-2);let g=new nt(u,p);g.outdated=!1,o.push(g),l+=u+1}l<=r&&o.push(null,new _e(r-l).updateHeight(e,l));let c=Ke.of(o);return(h<0||Math.abs(c.height-this.height)>=lr||Math.abs(h-this.heightMetrics(e,t).perLine)>=lr)&&(e.heightChanged=!0),c}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class bb extends Ke{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let r=i+this.left.height;return e<r?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,r,n+this.left.length+this.break)}lineAt(e,t,i,n,r){let o=n+this.left.height,l=r+this.left.length+this.break,h=t==de.ByHeight?e<o:e<l,c=h?this.left.lineAt(e,t,i,n,r):this.right.lineAt(e,t,i,o,l);if(this.break||(h?c.to<l:c.from>l))return c;let u=t==de.ByPosNoHeight?de.ByPosNoHeight:de.ByPos;return h?c.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,n,r).join(c)}forEachLine(e,t,i,n,r,o){let l=n+this.left.height,h=r+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,i,n,r,o),t>=h&&this.right.forEachLine(e,t,i,l,h,o);else{let c=this.lineAt(h,de.ByPos,i,n,r);e<c.from&&this.left.forEachLine(e,c.from-1,i,n,r,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,i,l,h,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&hc(r,o-1),t<this.length){let l=r.length;this.decomposeRight(t,r),hc(r,l)}return Ke.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ke.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:r,right:o}=this,l=t+r.length+this.break,h=null;return n&&n.from<=t+r.length&&n.more?h=r=r.updateHeight(e,t,i,n):r.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?h=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),h?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function hc(s,e){let t,i;s[e]==null&&(t=s[e-1])instanceof _e&&(i=s[e+1])instanceof _e&&s.splice(e-1,3,new _e(t.length+1+i.length))}const wb=5;class oa{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof nt?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new nt(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new Ou(o,n,i)):(o||r||n>=wb)&&this.addLineDeco(n,r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new nt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new _e(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof nt)return e;let t=new nt(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof nt)&&!this.isCovered?this.nodes.push(new nt(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof nt&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let r=new oa(i,e);return se.spans(t,i,n,r,0),r.finish(i)}}function kb(s,e,t){let i=new xb;return se.compare(s,e,t,i,0),i.changes}class xb{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&bl(e,t,this.changes,5)}}function vb(s,e){let t=s.getBoundingClientRect(),i=s.ownerDocument,n=i.defaultView||window,r=Math.max(0,t.left),o=Math.min(n.innerWidth,t.right),l=Math.max(0,t.top),h=Math.min(n.innerHeight,t.bottom);for(let c=s.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,p=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&p.overflow!="visible"){let g=u.getBoundingClientRect();r=Math.max(r,g.left),o=Math.min(o,g.right),l=Math.max(l,g.top),h=c==s.parentNode?g.bottom:Math.min(h,g.bottom)}c=p.position=="absolute"||p.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:r-t.left,right:Math.max(r,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,h)-(t.top+e)}}function Sb(s,e){let t=s.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Lo{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=t[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e,t){return V.replace({widget:new Cb(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Cb extends Zt{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class cc{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=fc,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=me.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(na).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new gb(t),this.stateDeco=e.facet(js).filter(i=>typeof i!="function"),this.heightMap=Ke.empty().applyChanges(this.stateDeco,re.empty,this.heightOracle.setDoc(e.doc),[new pt(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=V.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:r,to:o})=>n>=r&&n<=o)){let{from:r,to:o}=this.lineBlockAt(n);e.push(new Hn(r,o))}}this.viewports=e.sort((i,n)=>i.from-n.from),this.scaler=this.heightMap.height<=7e6?fc:new Db(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Ps(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(js).filter(u=>typeof u!="function");let n=e.changedRanges,r=pt.extendWithRanges(n,kb(i,this.stateDeco,e?e.changes:Ce.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),this.heightMap.height!=o&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let h=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let c=!e.changes.empty||e.flags&2||h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,this.updateForViewport(),c&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(au)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?me.RTL:me.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=t.getBoundingClientRect(),h=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,u=0;if(l.width&&l.height){let{scaleX:_,scaleY:A}=If(t,l);(this.scaleX!=_||this.scaleY!=A)&&(this.scaleX=_,this.scaleY=A,c|=8,o=h=!0)}let p=(parseInt(i.paddingTop)||0)*this.scaleY,g=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=g)&&(this.paddingTop=p,this.paddingBottom=g,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let b=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=b&&(this.scrollAnchorHeight=-1,this.scrollTop=b),this.scrolledToBottom=Hf(e.scrollDOM);let w=(this.printing?Sb:vb)(t,this.paddingTop),v=w.top-this.pixelViewport.top,k=w.bottom-this.pixelViewport.bottom;this.pixelViewport=w;let S=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(S!=this.inView&&(this.inView=S,S&&(h=!0)),!this.inView&&!this.scrollTarget)return 0;let D=l.width;if((this.contentDOMWidth!=D||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),h){let _=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(_)&&(o=!0),o||n.lineWrapping&&Math.abs(D-this.contentDOMWidth)>n.charWidth){let{lineHeight:A,charWidth:N,textHeight:P}=e.docView.measureTextSize();o=A>0&&n.refresh(r,A,N,P,D/N,_),o&&(e.docView.minWidth=0,c|=8)}v>0&&k>0?u=Math.max(v,k):v<0&&k<0&&(u=Math.min(v,k)),n.heightChanged=!1;for(let A of this.viewports){let N=A.from==this.viewport.from?_:e.docView.measureVisibleLineHeights(A);this.heightMap=(o?Ke.empty().applyChanges(this.stateDeco,re.empty,this.heightOracle,[new pt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new yb(A.from,N))}n.heightChanged&&(c|=2)}let R=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return R&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(c&2||R)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,h=new Hn(n.lineAt(o-i*1e3,de.ByHeight,r,0,0).from,n.lineAt(l+(1-i)*1e3,de.ByHeight,r,0,0).to);if(t){let{head:c}=t.range;if(c<h.from||c>h.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=n.lineAt(c,de.ByPos,r,0,0),g;t.y=="center"?g=(p.top+p.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<h.from?g=p.top:g=p.bottom-u,h=new Hn(n.lineAt(g-1e3/2,de.ByHeight,r,0,0).from,n.lineAt(g+u+1e3/2,de.ByHeight,r,0,0).to)}}return h}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Hn(this.heightMap.lineAt(i,de.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,de.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,de.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,de.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new Lo(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,r=n>>1,o=n<<1;if(this.defaultTextDirection!=me.LTR&&!i)return[];let l=[],h=(c,u,p,g)=>{if(u-c<r)return;let b=this.state.selection.main,w=[b.from];b.empty||w.push(b.to);for(let k of w)if(k>c&&k<u){h(c,k-10,p,g),h(k+10,u,p,g);return}let v=Ob(e,k=>k.from>=p.from&&k.to<=p.to&&Math.abs(k.from-c)<r&&Math.abs(k.to-u)<r&&!w.some(S=>k.from<S&&k.to>S));if(!v){if(u<p.to&&t&&i&&t.visibleRanges.some(k=>k.from<=u&&k.to>=u)){let k=t.moveToLineBoundary(O.cursor(u),!1,!0).head;k>c&&(u=k)}v=new Lo(c,u,this.gapSize(p,c,u,g))}l.push(v)};for(let c of this.viewportLines){if(c.length<o)continue;let u=Mb(c.from,c.to,this.stateDeco);if(u.total<o)continue;let p=this.scrollTarget?this.scrollTarget.range.head:null,g,b;if(i){let w=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,k;if(p!=null){let S=Vn(u,p),D=((this.visibleBottom-this.visibleTop)/2+w)/c.height;v=S-D,k=S+D}else v=(this.visibleTop-c.top-w)/c.height,k=(this.visibleBottom-c.top+w)/c.height;g=Yn(u,v),b=Yn(u,k)}else{let w=u.total*this.heightOracle.charWidth,v=n*this.heightOracle.charWidth,k,S;if(p!=null){let D=Vn(u,p),R=((this.pixelViewport.right-this.pixelViewport.left)/2+v)/w;k=D-R,S=D+R}else k=(this.pixelViewport.left-v)/w,S=(this.pixelViewport.right+v)/w;g=Yn(u,k),b=Yn(u,S)}g>c.from&&h(c.from,g,c,u),b<c.to&&h(b,c.to,c,u)}return l}gapSize(e,t,i,n){let r=Vn(n,i)-Vn(n,t);return this.heightOracle.lineWrapping?e.height*r:n.total*this.heightOracle.charWidth*r}updateLineGaps(e){Lo.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=V.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];se.spans(e,this.viewport.from,this.viewport.to,{span(n,r){t.push({from:n,to:r})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,r)=>n.from!=t[r].from||n.to!=t[r].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ps(this.heightMap.lineAt(e,de.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Ps(this.heightMap.lineAt(this.scaler.fromDOM(e),de.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ps(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Hn{constructor(e,t){this.from=e,this.to=t}}function Mb(s,e,t){let i=[],n=s,r=0;return se.spans(t,s,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),r+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),r+=e-n),{total:r,ranges:i}}function Yn({total:s,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(s*t);for(let n=0;;n++){let{from:r,to:o}=e[n],l=o-r;if(i<=l)return r+i;i-=l}}function Vn(s,e){let t=0;for(let{from:i,to:n}of s.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/s.total}function Ob(s,e){for(let t of s)if(e(t))return t}const fc={toDOM(s){return s},fromDOM(s){return s},scale:1};class Db{constructor(e,t,i){let n=0,r=0,o=0;this.viewports=i.map(({from:l,to:h})=>{let c=t.lineAt(l,de.ByPos,e,0,0).top,u=t.lineAt(h,de.ByPos,e,0,0).bottom;return n+=u-c,{from:l,to:h,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return n+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,n=r.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return i+(e-n)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,n=r.domBottom}}}function Ps(s,e){if(e.scale==1)return s;let t=e.toDOM(s.top),i=e.toDOM(s.bottom);return new Pt(s.from,s.length,t,i-t,Array.isArray(s._content)?s._content.map(n=>Ps(n,e)):s._content)}const zn=F.define({combine:s=>s.join(" ")}),Ol=F.define({combine:s=>s.indexOf(!0)>-1}),Dl=gi.newName(),Du=gi.newName(),Au=gi.newName(),Tu={"&light":"."+Du,"&dark":"."+Au};function Al(s,e,t){return new gi(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return s;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):s+" "+i}})}const Ab=Al("."+Dl,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Tu),Rs="￿";class Tb{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Z.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Rs}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let r=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==t)break;let l=pe.get(n),h=pe.get(o);(l&&h?l.breakAfter:(l?l.breakAfter:uc(n))||uc(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>r)&&this.lineBreak(),n=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(r=l.index,o=l[0].length),this.append(t.slice(i,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let t=pe.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(_b(e,i.node,i.offset)?t:0))}}function _b(s,e,t){for(;;){if(!e||t<Gt(e))return!1;if(e==s)return!0;t=Us(e)+1,e=e.parentNode}}function uc(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}class dc{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Pb{constructor(e,t,i,n){this.typeOver=n,this.bounds=null,this.text="";let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=r||o?[]:Nb(e),h=new Tb(l,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=Bb(l,this.bounds.from)}else{let l=e.observer.selectionRange,h=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!ul(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!ul(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((W.ios||W.chrome)&&e.state.selection.main.empty&&h!=c&&(u.from>0||u.to<e.state.doc.length)){let p=Math.min(h,c),g=Math.max(h,c),b=u.from-p,w=u.to-g;(b==0||b==1||p==0)&&(w==0||w==-1||g==e.state.doc.length)&&(h=0,c=e.state.doc.length)}this.newSel=O.single(c,h)}}}function _u(s,e){let t,{newSel:i}=e,n=s.state.selection.main,r=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,h=n.from,c=null;(r===8||W.android&&e.text.length<l-o)&&(h=n.to,c="end");let u=Lb(s.state.doc.sliceString(o,l,Rs),e.text,h-o,c);u&&(W.chrome&&r==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Rs+Rs&&u.toB--,t={from:o+u.from,to:o+u.toA,insert:re.of(e.text.slice(u.from,u.toB).split(Rs))})}else i&&(!s.hasFocus&&s.state.facet(Yr)||i.main.eq(n))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!n.empty&&i&&i.main.empty?t={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,n.to)}:t&&t.from>=n.from&&t.to<=n.to&&(t.from!=n.from||t.to!=n.to)&&n.to-n.from-(t.to-t.from)<=4?t={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,t.from).append(t.insert).append(s.state.doc.slice(t.to,n.to))}:(W.mac||W.android)&&t&&t.from==t.to&&t.from==n.head-1&&/^\. ?$/.test(t.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=O.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:re.of([" "])}):W.chrome&&t&&t.from==t.to&&t.from==n.head&&t.insert.toString()==`
 `&&s.lineWrapping&&(i&&(i=O.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:re.of([" "])}),t){if(W.ios&&s.inputState.flushIOSKey()||W.android&&(t.from==n.from&&t.to==n.to&&t.insert.length==1&&t.insert.lines==2&&es(s.contentDOM,"Enter",13)||(t.from==n.from-1&&t.to==n.to&&t.insert.length==0||r==8&&t.insert.length<t.to-t.from&&t.to>n.head)&&es(s.contentDOM,"Backspace",8)||t.from==n.from&&t.to==n.to+1&&t.insert.length==0&&es(s.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let l,h=()=>l||(l=Rb(s,t,i));return s.state.facet(ru).some(c=>c(s,t.from,t.to,o,h))||s.dispatch(h()),!0}else if(i&&!i.main.eq(n)){let o=!1,l="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(o=!0),l=s.inputState.lastSelectionOrigin),s.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function Rb(s,e,t){let i,n=s.state,r=n.selection.main;if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let l=r.from<e.from?n.sliceDoc(r.from,e.from):"",h=r.to>e.to?n.sliceDoc(e.to,r.to):"";i=n.replaceSelection(s.state.toText(l+e.insert.sliceString(0,void 0,s.state.lineBreak)+h))}else{let l=n.changes(e),h=t&&t.main.to<=l.newLength?t.main:void 0;if(n.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let c=s.state.sliceDoc(e.from,e.to),u,p=t&&pu(s,t.main.head);if(p){let w=e.insert.length-(e.to-e.from);u={from:p.from,to:p.to-w}}else u=s.state.doc.lineAt(r.head);let g=r.to-e.to,b=r.to-r.from;i=n.changeByRange(w=>{if(w.from==r.from&&w.to==r.to)return{changes:l,range:h||w.map(l)};let v=w.to-g,k=v-c.length;if(w.to-w.from!=b||s.state.sliceDoc(k,v)!=c||w.to>=u.from&&w.from<=u.to)return{range:w};let S=n.changes({from:k,to:v,insert:e.insert}),D=w.to-r.to;return{changes:S,range:h?O.range(Math.max(0,h.anchor+D),Math.max(0,h.head+D)):w.map(S)}})}else i={changes:l,selection:h&&n.selection.replaceRange(h)}}let o="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,o+=".compose",s.inputState.compositionFirstChange&&(o+=".start",s.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:o,scrollIntoView:!0})}function Lb(s,e,t,i){let n=Math.min(s.length,e.length),r=0;for(;r<n&&s.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==n&&s.length==e.length)return null;let o=s.length,l=e.length;for(;o>0&&l>0&&s.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let h=Math.max(0,r-Math.min(o,l));t-=o+h-r}if(o<r&&s.length<e.length){let h=t<=r&&t>=o?r-t:0;r-=h,l=r+(l-o),o=r}else if(l<r){let h=t<=r&&t>=l?r-t:0;r-=h,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function Nb(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:r}=s.observer.selectionRange;return t&&(e.push(new dc(t,i)),(n!=t||r!=i)&&e.push(new dc(n,r))),e}function Bb(s,e){if(s.length==0)return null;let t=s[0].pos,i=s.length==2?s[1].pos:t;return t>-1&&i>-1?O.single(t+e,i+e):null}const Eb={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},No=W.ie&&W.ie_version<=11;class Ib{constructor(e){this.view=e,this.active=!1,this.selectionRange=new k1,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(W.ie&&W.ie_version<=11||W.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),No&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Yr)?i.root.activeElement!=this.dom:!rr(i.dom,n))return;let r=n.anchorNode&&i.docView.nearest(n.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(W.ie&&W.ie_version<=11||W.android&&W.chrome)&&!i.state.selection.main.empty&&n.focusNode&&Is(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=W.safari&&e.root.nodeType==11&&g1(this.dom.ownerDocument)==this.dom&&Fb(this.view)||xr(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=rr(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&v1(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Eb),No&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),No&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let n=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&es(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),n=this.selectionChanged&&rr(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new Pb(this.view,e,t,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,n=_u(this.view,t);return this.view.state==i&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=pc(t,e.previousSibling||e.target.previousSibling,-1),n=pc(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function pc(s,e,t){for(;e;){let i=pe.get(e);if(i&&i.parent==s)return i;let n=e.parentNode;e=n!=s.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function Fb(s){let e=null;function t(h){h.preventDefault(),h.stopImmediatePropagation(),e=h.getTargetRanges()[0]}if(s.contentDOM.addEventListener("beforeinput",t,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset,l=s.docView.domAtPos(s.state.selection.main.anchor);return Is(l.node,l.offset,r,o)&&([i,n,r,o]=[r,o,i,n]),{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:o}}class I{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(i=>i.forEach(n=>t(n,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||x1(e.parent)||document,this.viewState=new cc(e.state||Z.create(e)),e.scrollTo&&e.scrollTo.is(In)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Ts).map(i=>new _o(i));for(let i of this.plugins)i.update(this);this.observer=new Ib(this),this.inputState=new Z1(this),this.inputState.ensureHandlers(this.plugins),this.docView=new jh(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let t=e.length==1&&e[0]instanceof Oe?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,r=this.state;for(let g of e){if(g.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=g.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,h=null;e.some(g=>g.annotation(Su))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,h=Cu(r,o),h||(l=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(Z.phrases)!=this.state.facet(Z.phrases))return this.setState(r);n=vr.create(this,r,e),n.flags|=l;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let g of e){if(p&&(p=p.map(g.changes)),g.scrollIntoView){let{main:b}=g.state.selection;p=new ts(b.empty?b:O.cursor(b.head,b.head>b.anchor?-1:1))}for(let b of g.effects)b.is(In)&&(p=b.value.clip(this.state))}this.viewState.update(n,p),this.bidiCache=Sr.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(_s)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(g=>g.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(zn)!=n.state.facet(zn)&&(this.viewState.mustMeasureContent=!0),(t||i||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!n.empty)for(let g of this.state.facet(vl))try{g(n)}catch(b){dt(this.state,b,"update listener")}(h||u)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),u&&!_u(this,u)&&c.force&&es(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new cc(e),this.plugins=e.facet(Ts).map(i=>new _o(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new jh(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Ts),i=e.state.facet(Ts);if(t!=i){let n=[];for(let r of i){let o=t.indexOf(r);if(o<0)n.push(new _o(r));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(Hf(i))r=-1,o=this.viewState.heightMap.height;else{let b=this.viewState.scrollAnchorAt(n);r=b.from,o=b.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];h&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(b=>{try{return b.read(this)}catch(w){return dt(this.state,w),mc}}),p=vr.create(this,this.state,[]),g=!1;p.flags|=h,t?t.flags|=h:t=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),g=this.docView.update(p));for(let b=0;b<c.length;b++)if(u[b]!=mc)try{let w=c[b];w.write&&w.write(u[b],this)}catch(w){dt(this.state,w)}if(g&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let w=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(w>1||w<-1){n=n+w,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(vl))l(t)}get themeClasses(){return Dl+" "+(this.state.facet(Ol)?Au:Du)+" "+this.state.facet(zn)}updateAttrs(){let e=gc(this,hu,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Yr)?"true":"false",class:"cm-content",style:`${W.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),gc(this,na,t);let i=this.observer.ignore(()=>{let n=yl(this.contentDOM,this.contentAttrs,t),r=yl(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(I.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(_s);let e=this.state.facet(I.cspNonce);gi.mount(this.root,this.styleModules.concat(Ab).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Ro(this,e,Xh(this,e,t,i))}moveByGroup(e,t){return Ro(this,e,Xh(this,e,t,i=>J1(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),r=i[t?i.length-1:0];return O.cursor(r.side(t,n)+e.from,r.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,i=!0){return Q1(this,e,t,i)}moveVertically(e,t,i){return Ro(this,e,X1(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),gu(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n),o=r[ci.find(r,e-n.from,-1,t)];return Wr(i,o.dir==me.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(lu)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Wb)return Zf(e.length);let t=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||Xf(r.isolates,i=Uh(this,e))))return r.order;i||(i=Uh(this,e));let n=N1(e.text,t,i);return this.bidiCache.push(new Sr(e.from,e.to,t,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||W.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Ff(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return In.of(new ts(typeof e=="number"?O.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return In.of(new ts(O.cursor(i.from),"start","start",i.top-e,t,!0))}static domEventHandlers(e){return ke.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ke.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=gi.newName(),n=[zn.of(i),_s.of(Al(`.${i}`,e))];return t&&t.dark&&n.push(Ol.of(!0)),n}static baseTheme(e){return cs.lowest(_s.of(Al("."+Dl,e,Tu)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&pe.get(i)||pe.get(e);return((t=n==null?void 0:n.rootView)===null||t===void 0?void 0:t.view)||null}}I.styleModule=_s;I.inputHandler=ru;I.focusChangeEffect=ou;I.perLineTextDirection=lu;I.exceptionSink=nu;I.updateListener=vl;I.editable=Yr;I.mouseSelectionStyle=su;I.dragMovesSelection=iu;I.clickAddsSelectionRange=tu;I.decorations=js;I.outerDecorations=cu;I.atomicRanges=ra;I.bidiIsolatedRanges=fu;I.scrollMargins=uu;I.darkTheme=Ol;I.cspNonce=F.define({combine:s=>s.length?s[0]:""});I.contentAttributes=na;I.editorAttributes=hu;I.lineWrapping=I.contentAttributes.of({class:"cm-lineWrapping"});I.announce=q.define();const Wb=4096,mc={};class Sr{constructor(e,t,i,n,r,o){this.from=e,this.to=t,this.dir=i,this.isolates=n,this.fresh=r,this.order=o}static update(e,t){if(t.empty&&!e.some(r=>r.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:me.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new Sr(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function gc(s,e,t){for(let i=s.state.facet(e),n=i.length-1;n>=0;n--){let r=i[n],o=typeof r=="function"?r(s):r;o&&gl(o,t)}return t}const Hb=W.mac?"mac":W.windows?"win":W.linux?"linux":"key";function Yb(s,e){const t=s.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,r,o,l;for(let h=0;h<t.length-1;++h){const c=t[h];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function $n(s,e,t){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),t!==!1&&e.shiftKey&&(s="Shift-"+s),s}const Vb=cs.default(I.domEventHandlers({keydown(s,e){return Ru(Pu(e.state),s,e,"editor")}})),Vr=F.define({enables:Vb}),yc=new WeakMap;function Pu(s){let e=s.facet(Vr),t=yc.get(e);return t||yc.set(e,t=Ub(e.reduce((i,n)=>i.concat(n),[]))),t}function zb(s,e,t){return Ru(Pu(s.state),e,s,t)}let oi=null;const $b=4e3;function Ub(s,e=Hb){let t=Object.create(null),i=Object.create(null),n=(o,l)=>{let h=i[o];if(h==null)i[o]=l;else if(h!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,h,c,u)=>{var p,g;let b=t[o]||(t[o]=Object.create(null)),w=l.split(/ (?!$)/).map(S=>Yb(S,e));for(let S=1;S<w.length;S++){let D=w.slice(0,S).join(" ");n(D,!0),b[D]||(b[D]={preventDefault:!0,stopPropagation:!1,run:[R=>{let _=oi={view:R,prefix:D,scope:o};return setTimeout(()=>{oi==_&&(oi=null)},$b),!0}]})}let v=w.join(" ");n(v,!1);let k=b[v]||(b[v]={preventDefault:!1,stopPropagation:!1,run:((g=(p=b._any)===null||p===void 0?void 0:p.run)===null||g===void 0?void 0:g.slice())||[]});h&&k.run.push(h),c&&(k.preventDefault=!0),u&&(k.stopPropagation=!0)};for(let o of s){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let p in u)u[p].run.push(o.any)}let h=o[e]||o.key;if(h)for(let c of l)r(c,h,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(c,"Shift-"+h,o.shift,o.preventDefault,o.stopPropagation)}return t}function Ru(s,e,t,i){let n=m1(e),r=Pe(n,0),o=ct(r)==n.length&&n!=" ",l="",h=!1,c=!1,u=!1;oi&&oi.view==t&&oi.scope==i&&(l=oi.prefix+" ",bu.indexOf(e.keyCode)<0&&(c=!0,oi=null));let p=new Set,g=k=>{if(k){for(let S of k.run)if(!p.has(S)&&(p.add(S),S(t,e)))return k.stopPropagation&&(u=!0),!0;k.preventDefault&&(k.stopPropagation&&(u=!0),c=!0)}return!1},b=s[i],w,v;return b&&(g(b[l+$n(n,e,!o)])?h=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(W.windows&&e.ctrlKey&&e.altKey)&&(w=yi[e.keyCode])&&w!=n?(g(b[l+$n(w,e,!0)])||e.shiftKey&&(v=$s[e.keyCode])!=n&&v!=w&&g(b[l+$n(v,e,!1)]))&&(h=!0):o&&e.shiftKey&&g(b[l+$n(n,e,!0)])&&(h=!0),!h&&g(b._any)&&(h=!0)),c&&(h=!0),h&&u&&e.stopPropagation(),h}class nn{constructor(e,t,i,n,r){this.className=e,this.left=t,this.top=i,this.width=n,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let r=Lu(e);return[new nn(t,n.left-r.left,n.top-r.top,null,n.bottom-n.top)]}else return jb(e,t,i)}}function Lu(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==me.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function bc(s,e,t){let i=O.cursor(e);return{from:Math.max(t.from,s.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,s.moveToLineBoundary(i,!0,!0).from),type:Ge.Text}}function jb(s,e,t){if(t.to<=s.viewport.from||t.from>=s.viewport.to)return[];let i=Math.max(t.from,s.viewport.from),n=Math.min(t.to,s.viewport.to),r=s.textDirection==me.LTR,o=s.contentDOM,l=o.getBoundingClientRect(),h=Lu(s),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),p=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),g=l.right-(u?parseInt(u.paddingRight):0),b=Cl(s,i),w=Cl(s,n),v=b.type==Ge.Text?b:null,k=w.type==Ge.Text?w:null;if(v&&(s.lineWrapping||b.widgetLineBreaks)&&(v=bc(s,i,v)),k&&(s.lineWrapping||w.widgetLineBreaks)&&(k=bc(s,n,k)),v&&k&&v.from==k.from)return D(R(t.from,t.to,v));{let A=v?R(t.from,null,v):_(b,!1),N=k?R(null,t.to,k):_(w,!0),P=[];return(v||b).to<(k||w).from-(v&&k?1:0)||b.widgetLineBreaks>1&&A.bottom+s.defaultLineHeight/2<N.top?P.push(S(p,A.bottom,g,N.top)):A.bottom<N.top&&s.elementAtHeight((A.bottom+N.top)/2).type==Ge.Text&&(A.bottom=N.top=(A.bottom+N.top)/2),D(A).concat(P).concat(D(N))}function S(A,N,P,Y){return new nn(e,A-h.left,N-h.top-.01,P-A,Y-N+.01)}function D({top:A,bottom:N,horizontal:P}){let Y=[];for(let G=0;G<P.length;G+=2)Y.push(S(P[G],A,P[G+1],N));return Y}function R(A,N,P){let Y=1e9,G=-1e9,z=[];function j(ie,ae,De,Ae,Ve){let Qe=s.coordsAtPos(ie,ie==P.to?-2:2),oe=s.coordsAtPos(De,De==P.from?2:-2);!Qe||!oe||(Y=Math.min(Qe.top,oe.top,Y),G=Math.max(Qe.bottom,oe.bottom,G),Ve==me.LTR?z.push(r&&ae?p:Qe.left,r&&Ae?g:oe.right):z.push(!r&&Ae?p:oe.left,!r&&ae?g:Qe.right))}let U=A??P.from,K=N??P.to;for(let ie of s.visibleRanges)if(ie.to>U&&ie.from<K)for(let ae=Math.max(ie.from,U),De=Math.min(ie.to,K);;){let Ae=s.state.doc.lineAt(ae);for(let Ve of s.bidiSpans(Ae)){let Qe=Ve.from+Ae.from,oe=Ve.to+Ae.from;if(Qe>=De)break;oe>ae&&j(Math.max(Qe,ae),A==null&&Qe<=U,Math.min(oe,De),N==null&&oe>=K,Ve.dir)}if(ae=Ae.to+1,ae>=De)break}return z.length==0&&j(U,A==null,K,N==null,s.textDirection),{top:Y,bottom:G,horizontal:z}}function _(A,N){let P=l.top+(N?A.top:A.bottom);return{top:P,bottom:P,horizontal:[]}}}function qb(s,e){return s.constructor==e.constructor&&s.eq(e)}class Gb{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(ar)!=e.state.facet(ar)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let t=0,i=e.facet(ar);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!qb(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let n of e)n.update&&t&&n.constructor&&this.drawn[i].constructor&&n.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(n.draw(),t);for(;t;){let n=t.nextSibling;t.remove(),t=n}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const ar=F.define();function Nu(s){return[ke.define(e=>new Gb(e,s)),ar.of(s)]}const Bu=!W.ios,qs=F.define({combine(s){return Et(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Kb(s={}){return[qs.of(s),Qb,Jb,Xb,au.of(!0)]}function Eu(s){return s.startState.facet(qs)!=s.state.facet(qs)}const Qb=Nu({above:!0,markers(s){let{state:e}=s,t=e.facet(qs),i=[];for(let n of e.selection.ranges){let r=n==e.selection.main;if(n.empty?!r||Bu:t.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:O.cursor(n.head,n.head>n.anchor?-1:1);for(let h of nn.forRange(s,o,l))i.push(h)}}return i},update(s,e){s.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Eu(s);return t&&wc(s.state,e),s.docChanged||s.selectionSet||t},mount(s,e){wc(e.state,s)},class:"cm-cursorLayer"});function wc(s,e){e.style.animationDuration=s.facet(qs).cursorBlinkRate+"ms"}const Jb=Nu({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:nn.forRange(s,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||Eu(s)},class:"cm-selectionLayer"}),Tl={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Bu&&(Tl[".cm-line"].caretColor="transparent !important",Tl[".cm-content"]={caretColor:"transparent !important"});const Xb=cs.highest(I.theme(Tl)),Iu=q.define({map(s,e){return s==null?null:e.mapPos(s)}}),Ls=Be.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((t,i)=>i.is(Iu)?i.value:t,s)}}),Zb=ke.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let t=s.state.field(Ls);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(Ls)!=t||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(Ls),t=e!=null&&s.coordsAtPos(e);if(!t)return null;let i=s.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+s.scrollDOM.scrollLeft*s.scaleX,top:t.top-i.top+s.scrollDOM.scrollTop*s.scaleY,height:t.bottom-t.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/t+"px",this.cursor.style.height=s.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(Ls)!=s&&this.view.dispatch({effects:Iu.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function ew(){return[Ls,Zb]}function kc(s,e,t,i,n){e.lastIndex=0;for(let r=s.iterRange(t,i),o=t,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)n(o+l.index,l)}function tw(s,e){let t=s.visibleRanges;if(t.length==1&&t[0].from==s.viewport.from&&t[0].to==s.viewport.to)return t;let i=[];for(let{from:n,to:r}of t)n=Math.max(s.state.doc.lineAt(n).from,n-e),r=Math.min(s.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=r:i.push({from:n,to:r});return i}class iw{constructor(e){const{regexp:t,decoration:i,decorate:n,boundary:r,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(l,h,c,u)=>n(u,c,c+l[0].length,l,h);else if(typeof i=="function")this.addMatch=(l,h,c,u)=>{let p=i(l,h,c);p&&u(c,c+l[0].length,p)};else if(i)this.addMatch=(l,h,c,u)=>u(c,c+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let t=new mi,i=t.add.bind(t);for(let{from:n,to:r}of tw(e,this.maxLength))kc(e.state.doc,this.regexp,n,r,(o,l)=>this.addMatch(l,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,h)=>{h>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(h,n))}),e.viewportChanged||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,n);if(l>o){let h=e.state.doc.lineAt(o),c=h.to<l?e.state.doc.lineAt(l):h,u=Math.max(r.from,h.from),p=Math.min(r.to,c.to);if(this.boundary){for(;o>h.from;o--)if(this.boundary.test(h.text[o-1-h.from])){u=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){p=l;break}}let g=[],b,w=(v,k,S)=>g.push(S.range(v,k));if(h==c)for(this.regexp.lastIndex=u-h.from;(b=this.regexp.exec(h.text))&&b.index<p-h.from;)this.addMatch(b,e,b.index+h.from,w);else kc(e.state.doc,this.regexp,u,p,(v,k)=>this.addMatch(k,e,v,w));t=t.update({filterFrom:u,filterTo:p,filter:(v,k)=>v<u||k>p,add:g})}}return t}}const _l=/x/.unicode!=null?"gu":"g",sw=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,_l),nw={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Bo=null;function rw(){var s;if(Bo==null&&typeof document<"u"&&document.body){let e=document.body.style;Bo=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return Bo||!1}const hr=F.define({combine(s){let e=Et(s,{render:null,specialChars:sw,addSpecialChars:null});return(e.replaceTabs=!rw())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,_l)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,_l)),e}});function ow(s={}){return[hr.of(s),lw()]}let xc=null;function lw(){return xc||(xc=ke.fromClass(class{constructor(s){this.view=s,this.decorations=V.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(hr)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new iw({regexp:s.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,r=Pe(e[0],0);if(r==9){let o=n.lineAt(i),l=t.state.tabSize,h=fs(o.text,l,i-o.from);return V.replace({widget:new fw((l-h%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=V.replace({widget:new cw(s,r)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(hr);s.startState.facet(hr)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const aw="•";function hw(s){return s>=32?aw:s==10?"␤":String.fromCharCode(9216+s)}class cw extends Zt{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=hw(this.code),i=e.state.phrase("Control character")+" "+(nw[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let r=document.createElement("span");return r.textContent=t,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class fw extends Zt{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function uw(){return pw}const dw=V.line({class:"cm-activeLine"}),pw=ke.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,t=[];for(let i of s.state.selection.ranges){let n=s.lineBlockAt(i.head);n.from>e&&(t.push(dw.range(n.from)),e=n.from)}return V.set(t)}},{decorations:s=>s.decorations});class mw extends Zt{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?rs(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),n=Wr(t[0],i.direction!="rtl"),r=parseInt(i.lineHeight);return n.bottom-n.top>r*1.5?{left:n.left,right:n.right,top:n.top,bottom:n.top+r}:n}ignoreEvent(){return!1}}function gw(s){return ke.fromClass(class{constructor(e){this.view=e,this.placeholder=s?V.set([V.widget({widget:new mw(s),side:1}).range(0)]):V.none}get decorations(){return this.view.state.doc.length?V.none:this.placeholder}},{decorations:e=>e.decorations})}const Pl=2e3;function yw(s,e,t){let i=Math.min(e.line,t.line),n=Math.max(e.line,t.line),r=[];if(e.off>Pl||t.off>Pl||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let h=i;h<=n;h++){let c=s.doc.line(h);c.length<=l&&r.push(O.range(c.from+o,c.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let h=i;h<=n;h++){let c=s.doc.line(h),u=hl(c.text,o,s.tabSize,!0);if(u<0)r.push(O.cursor(c.to));else{let p=hl(c.text,l,s.tabSize);r.push(O.range(c.from+u,c.from+p))}}}return r}function bw(s,e){let t=s.coordsAtPos(s.viewport.from);return t?Math.round(Math.abs((t.left-e)/s.defaultCharacterWidth)):-1}function vc(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1),i=s.state.doc.lineAt(t),n=t-i.from,r=n>Pl?-1:n==i.length?bw(s,e.clientX):fs(i.text,s.state.tabSize,t-i.from);return{line:i.number,col:r,off:n}}function ww(s,e){let t=vc(s,e),i=s.state.selection;return t?{update(n){if(n.docChanged){let r=n.changes.mapPos(n.startState.doc.line(t.line).from),o=n.state.doc.lineAt(r);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(n.changes)}},get(n,r,o){let l=vc(s,n);if(!l)return i;let h=yw(s.state,t,l);return h.length?o?O.create(h.concat(i.ranges)):O.create(h):i}}:null}function kw(s){let e=(s==null?void 0:s.eventFilter)||(t=>t.altKey&&t.button==0);return I.mouseSelectionStyle.of((t,i)=>e(i)?ww(t,i):null)}const xw={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},vw={style:"cursor: crosshair"};function Sw(s={}){let[e,t]=xw[s.key||"Alt"],i=ke.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||t(n))},keyup(n){(n.keyCode==e||!t(n))&&this.set(!1)},mousemove(n){this.set(t(n))}}});return[i,I.contentAttributes.of(n=>{var r;return!((r=n.plugin(i))===null||r===void 0)&&r.isDown?vw:null})]}const Os="-10000px";class Fu{constructor(e,t,i,n){this.facet=t,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=i(o,r))}update(e,t){var i;let n=e.state.facet(this.facet),r=n.filter(h=>h);if(n===this.input){for(let h of this.tooltipViews)h.update&&h.update(e);return!1}let o=[],l=t?[]:null;for(let h=0;h<r.length;h++){let c=r[h],u=-1;if(c){for(let p=0;p<this.tooltips.length;p++){let g=this.tooltips[p];g&&g.create==c.create&&(u=p)}if(u<0)o[h]=this.createTooltipView(c,h?o[h-1]:null),l&&(l[h]=!!c.above);else{let p=o[h]=this.tooltipViews[u];l&&(l[h]=t[u]),p.update&&p.update(e)}}}for(let h of this.tooltipViews)o.indexOf(h)<0&&(this.removeTooltipView(h),(i=h.destroy)===null||i===void 0||i.call(h));return t&&(l.forEach((h,c)=>t[c]=h),t.length=l.length),this.input=n,this.tooltips=r,this.tooltipViews=o,!0}}function Cw(s){let{win:e}=s;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Eo=F.define({combine:s=>{var e,t,i;return{position:W.ios?"absolute":((e=s.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=s.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=s.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Cw}}}),Sc=new WeakMap,la=ke.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(Eo);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Fu(s,aa,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let t=e||s.geometryChanged,i=s.state.facet(Eo);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(s,e){let t=s.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),s.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.insertBefore(n,i)}return t.dom.style.position=this.position,t.dom.style.top=Os,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var s,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(s=i.destroy)===null||s===void 0||s.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=this.view.dom.getBoundingClientRect(),e=1,t=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:n}=this.manager.tooltipViews[0];if(W.gecko)i=n.offsetParent!=this.container.ownerDocument.body;else if(n.style.top==Os&&n.style.left=="0px"){let r=n.getBoundingClientRect();i=Math.abs(r.top+1e4)>1||Math.abs(r.left)>1}}if(i||this.position=="absolute")if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(e=n.width/this.parent.offsetWidth,t=n.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:s,parent:this.parent?this.container.getBoundingClientRect():s,pos:this.manager.tooltips.map((n,r)=>{let o=this.manager.tooltipViews[r];return o.getCoords?o.getCoords(n.pos):this.view.coordsAtPos(n.pos)}),size:this.manager.tooltipViews.map(({dom:n})=>n.getBoundingClientRect()),space:this.view.state.facet(Eo).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:t,space:i,scaleX:n,scaleY:r}=s,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let h=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:u}=c,p=s.pos[l],g=s.size[l];if(!p||p.bottom<=Math.max(t.top,i.top)||p.top>=Math.min(t.bottom,i.bottom)||p.right<Math.max(t.left,i.left)-.1||p.left>Math.min(t.right,i.right)+.1){u.style.top=Os;continue}let b=h.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,w=b?7:0,v=g.right-g.left,k=(e=Sc.get(c))!==null&&e!==void 0?e:g.bottom-g.top,S=c.offset||Ow,D=this.view.textDirection==me.LTR,R=g.width>i.right-i.left?D?i.left:i.right-g.width:D?Math.min(p.left-(b?14:0)+S.x,i.right-v):Math.max(i.left,p.left-v+(b?14:0)-S.x),_=this.above[l];!h.strictSide&&(_?p.top-(g.bottom-g.top)-S.y<i.top:p.bottom+(g.bottom-g.top)+S.y>i.bottom)&&_==i.bottom-p.bottom>p.top-i.top&&(_=this.above[l]=!_);let A=(_?p.top-i.top:i.bottom-p.bottom)-w;if(A<k&&c.resize!==!1){if(A<this.view.defaultLineHeight){u.style.top=Os;continue}Sc.set(c,k),u.style.height=(k=A)/r+"px"}else u.style.height&&(u.style.height="");let N=_?p.top-k-w-S.y:p.bottom+w+S.y,P=R+v;if(c.overlap!==!0)for(let Y of o)Y.left<P&&Y.right>R&&Y.top<N+k&&Y.bottom>N&&(N=_?Y.top-k-2-w:Y.bottom+w+2);if(this.position=="absolute"?(u.style.top=(N-s.parent.top)/r+"px",u.style.left=(R-s.parent.left)/n+"px"):(u.style.top=N/r+"px",u.style.left=R/n+"px"),b){let Y=p.left+(D?S.x:-S.x)-(R+14-7);b.style.left=Y/n+"px"}c.overlap!==!0&&o.push({left:R,top:N,right:P,bottom:N+k}),u.classList.toggle("cm-tooltip-above",_),u.classList.toggle("cm-tooltip-below",!_),c.positioned&&c.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=Os}},{eventObservers:{scroll(){this.maybeMeasure()}}}),Mw=I.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Ow={x:0,y:0},aa=F.define({enables:[la,Mw]}),Cr=F.define({combine:s=>s.reduce((e,t)=>e.concat(t),[])});class zr{static create(e){return new zr(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Fu(e,Cr,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(t===void 0)t=n;else if(t!==n)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Dw=aa.compute([Cr],s=>{let e=s.facet(Cr);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:zr.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class Aw{constructor(e,t,i,n,r){this.view=e,this.source=t,this.field=i,this.setHover=n,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let n,r=1;if(i instanceof hi)n=i.posAtStart;else{if(n=e.posAtCoords(t),n==null)return;let l=e.coordsAtPos(n);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let h=e.bidiSpans(e.state.doc.lineAt(n)).find(u=>u.from<=n&&u.to>=n),c=h&&h.dir==me.RTL?-1:1;r=t.x<l.left?-c:c}let o=this.source(e,n,r);if(o!=null&&o.then){let l=this.pending={pos:n};o.then(h=>{this.pending==l&&(this.pending=null,h&&!(Array.isArray(h)&&!h.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(h)?h:[h])}))},h=>dt(e.state,h,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(la),t=e?e.manager.tooltips.findIndex(i=>i.create==zr.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:r}=this;if(n.length&&r&&!Tw(r.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(i=(t=n[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!_w(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Un=4;function Tw(s,e){let t=s.getBoundingClientRect();return e.clientX>=t.left-Un&&e.clientX<=t.right+Un&&e.clientY>=t.top-Un&&e.clientY<=t.bottom+Un}function _w(s,e,t,i,n,r){let o=s.scrollDOM.getBoundingClientRect(),l=s.documentTop+s.documentPadding.top+s.contentHeight;if(o.left>i||o.right<i||o.top>n||Math.min(o.bottom,l)<n)return!1;let h=s.posAtCoords({x:i,y:n},!1);return h>=e&&h<=t}function Pw(s,e={}){let t=q.define(),i=Be.define({create(){return[]},update(n,r){if(n.length&&(e.hideOnChange&&(r.docChanged||r.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(r,o))),r.docChanged))for(let o of n){let l=r.changes.mapPos(o.pos,-1,je.TrackDel);if(l!=null){let h=Object.assign(Object.create(null),o);h.pos=l,h.end!=null&&(h.end=r.changes.mapPos(h.end))}}for(let o of r.effects)o.is(t)&&(n=o.value),o.is(Rw)&&(n=[]);return n},provide:n=>Cr.from(n)});return[i,ke.define(n=>new Aw(n,s,i,t,e.hoverTime||300)),Dw]}function Wu(s,e){let t=s.plugin(la);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const Rw=q.define(),Cc=F.define({combine(s){let e,t;for(let i of s)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Gs(s,e){let t=s.plugin(Hu),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const Hu=ke.fromClass(class{constructor(s){this.input=s.state.facet(Ks),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(s));let e=s.state.facet(Cc);this.top=new jn(s,!0,e.topContainer),this.bottom=new jn(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(s){let e=s.state.facet(Cc);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new jn(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new jn(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=s.state.facet(Ks);if(t!=this.input){let i=t.filter(h=>h),n=[],r=[],o=[],l=[];for(let h of i){let c=this.specs.indexOf(h),u;c<0?(u=h(s.view),l.push(u)):(u=this.panels[c],u.update&&u.update(s)),n.push(u),(u.top?r:o).push(u)}this.specs=i,this.panels=n,this.top.sync(r),this.bottom.sync(o);for(let h of l)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let i of this.panels)i.update&&i.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>I.scrollMargins.of(e=>{let t=e.plugin(s);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class jn{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Mc(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Mc(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Mc(s){let e=s.nextSibling;return s.remove(),e}const Ks=F.define({enables:Hu});class Jt extends Pi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Jt.prototype.elementClass="";Jt.prototype.toDOM=void 0;Jt.prototype.mapMode=je.TrackBefore;Jt.prototype.startSide=Jt.prototype.endSide=-1;Jt.prototype.point=!0;const cr=F.define(),Lw={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>se.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ws=F.define();function Nw(s){return[Yu(),Ws.of(Object.assign(Object.assign({},Lw),s))]}const Rl=F.define({combine:s=>s.some(e=>e)});function Yu(s){let e=[Bw];return s&&s.fixed===!1&&e.push(Rl.of(!0)),e}const Bw=ke.fromClass(class{constructor(s){this.view=s,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(Ws).map(e=>new Dc(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(Rl),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}update(s){if(this.updateGutters(s)){let e=this.prevViewport,t=s.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}s.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Rl)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&this.dom.remove();let t=se.iter(this.view.state.facet(cr),this.view.viewport.from),i=[],n=this.gutters.map(r=>new Ew(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==Ge.Text&&o){Ll(t,i,l.from);for(let h of n)h.line(this.view,l,i);o=!1}else if(l.widget)for(let h of n)h.widget(this.view,l)}else if(r.type==Ge.Text){Ll(t,i,r.from);for(let o of n)o.line(this.view,r,i)}else if(r.widget)for(let o of n)o.widget(this.view,r);for(let r of n)r.finish();s&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(s){let e=s.startState.facet(Ws),t=s.state.facet(Ws),i=s.docChanged||s.heightChanged||s.viewportChanged||!se.eq(s.startState.facet(cr),s.state.facet(cr),s.view.viewport.from,s.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(s)&&(i=!0);else{i=!0;let n=[];for(let r of t){let o=e.indexOf(r);o<0?n.push(new Dc(this.view,r)):(this.gutters[o].update(s),n.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),n.indexOf(r)<0&&r.destroy();for(let r of n)this.dom.appendChild(r.dom);this.gutters=n}return i}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove()}},{provide:s=>I.scrollMargins.of(e=>{let t=e.plugin(s);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==me.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function Oc(s){return Array.isArray(s)?s:[s]}function Ll(s,e,t){for(;s.value&&s.from<=t;)s.from==t&&e.push(s.value),s.next()}class Ew{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=se.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:n}=this,r=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==n.elements.length){let l=new Vu(e,o,r,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,r,i);this.height=t.bottom,this.i++}line(e,t,i){let n=[];Ll(this.cursor,n,t.from),i.length&&(n=n.concat(i));let r=this.gutter.config.lineMarker(e,t,n);r&&n.unshift(r);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,n)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t);i&&this.addElement(e,t,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Dc{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let r=n.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let h=r.getBoundingClientRect();o=(h.top+h.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=Oc(t.markers(e)),t.initialSpacer&&(this.spacer=new Vu(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Oc(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!se.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Vu{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Iw(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let r=0,o=0;;){let l=o,h=r<t.length?t[r++]:null,c=!1;if(h){let u=h.elementClass;u&&(i+=" "+u);for(let p=o;p<this.markers.length;p++)if(this.markers[p].compare(h)){l=p,c=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(n);let p=n.nextSibling;n.remove(),n=p}}if(!h)break;h.toDOM&&(c?n=n.nextSibling:this.dom.insertBefore(h.toDOM(e),n)),c&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function Iw(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].compare(e[t]))return!1;return!0}const Fw=F.define(),qi=F.define({combine(s){return Et(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let r=i[n],o=t[n];i[n]=r?(l,h,c)=>r(l,h,c)||o(l,h,c):o}return i}})}});class Io extends Jt{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Fo(s,e){return s.state.facet(qi).formatNumber(e,s.state)}const Ww=Ws.compute([qi],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Fw)},lineMarker(e,t,i){return i.some(n=>n.toDOM)?null:new Io(Fo(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(qi)!=e.state.facet(qi),initialSpacer(e){return new Io(Fo(e,Ac(e.state.doc.lines)))},updateSpacer(e,t){let i=Fo(t.view,Ac(t.view.state.doc.lines));return i==e.number?e:new Io(i)},domEventHandlers:s.facet(qi).domEventHandlers}));function Hw(s={}){return[qi.of(s),Yu(),Ww]}function Ac(s){let e=9;for(;e<s;)e=e*10+9;return e}const Yw=new class extends Jt{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Vw=cr.compute(["selection"],s=>{let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.head).from;n>t&&(t=n,e.push(Yw.range(n)))}return se.of(e)});function zw(){return Vw}var Wo;const Gi=new Q;function $w(s){return F.define({combine:s?e=>e.concat(s):void 0})}const Uw=new Q;class wt{constructor(e,t,i=[],n=""){this.data=e,this.name=n,Z.prototype.hasOwnProperty("tree")||Object.defineProperty(Z.prototype,"tree",{get(){return He(this)}}),this.parser=t,this.extension=[wi.of(this),Z.languageData.of((r,o,l)=>{let h=Tc(r,o,l),c=h.type.prop(Gi);if(!c)return[];let u=r.facet(c),p=h.type.prop(Uw);if(p){let g=h.resolve(o-h.from,l);for(let b of p)if(b.test(g,r)){let w=r.facet(b.facet);return b.type=="replace"?w:w.concat(u)}}return u})].concat(i)}isActiveAt(e,t,i=-1){return Tc(e,t,i).type.prop(Gi)==this.data}findRegions(e){let t=e.facet(wi);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(r,o)=>{if(r.prop(Gi)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(Q.mounted);if(l){if(l.tree.prop(Gi)==this.data){if(l.overlay)for(let h of l.overlay)i.push({from:h.from+o,to:h.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let h=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>h)return}}for(let h=0;h<r.children.length;h++){let c=r.children[h];c instanceof xe&&n(c,r.positions[h]+o)}};return n(He(e),0),i}get allowsNesting(){return!0}}wt.setState=q.define();function Tc(s,e,t){let i=s.facet(wi),n=He(s).topNode;if(!i||i.allowsNesting)for(let r=n;r;r=r.enter(e,t,Te.ExcludeBuffers))r.type.isTop&&(n=r);return n}class Mr extends wt{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=$w(e.languageData);return new Mr(t,e.parser.configure({props:[Gi.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Mr(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function He(s){let e=s.field(wt.state,!1);return e?e.tree:xe.empty}class jw{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Ds=null;class Or{constructor(e,t,i=[],n,r,o,l,h){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Or(e,t,[],xe.empty,0,i,[],null)}startParse(){return this.parser.startParse(new jw(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=xe.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(_i.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(_i.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Ds;Ds=this;try{return e()}finally{Ds=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=_c(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((c,u,p,g)=>h.push({fromA:c,toA:u,fromB:p,toB:g})),i=_i.applyChanges(i,h),n=xe.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),p=e.mapPos(c.to,-1);u<p&&l.push({from:u,to:p})}}}return new Or(this.parser,t,i,n,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:r}=this.skipped[i];n<e.to&&r>e.from&&(this.fragments=_c(this.fragments,n,r),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends gf{createParse(t,i,n){let r=n[0].from,o=n[n.length-1].to;return{parsedPos:r,advance(){let h=Ds;if(h){for(let c of n)h.tempSkipped.push(c);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=o,new xe(Ze.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Ds}}function _c(s,e,t){return _i.applyChanges(s,[{fromA:e,toA:t,fromB:e,toB:t}])}class ls{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new ls(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Or.create(e.facet(wi).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new ls(i)}}wt.state=Be.define({create:ls.init,update(s,e){for(let t of e.effects)if(t.is(wt.setState))return t.value;return e.startState.facet(wi)!=e.state.facet(wi)?ls.init(e.state):s.apply(e)}});let zu=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(zu=s=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Ho=typeof navigator<"u"&&(!((Wo=navigator.scheduling)===null||Wo===void 0)&&Wo.isInputPending)?()=>navigator.scheduling.isInputPending():null,qw=ke.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(wt.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(wt.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=zu(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(wt.state);if(r.tree==r.context.tree&&r.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Ho?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<n&&i.doc.length>n+1e3,h=r.context.work(()=>Ho&&Ho()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:wt.setState.of(new ls(r.context))})),this.chunkBudget>0&&!(h&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>dt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),wi=F.define({combine(s){return s.length?s[0]:null},enables:s=>[wt.state,qw,I.contentAttributes.compute([s],e=>{let t=e.facet(s);return t&&t.name?{"data-language":t.name}:{}})]});class Gw{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const Kw=F.define(),$r=F.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function Dr(s){let e=s.facet($r);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function Qs(s,e){let t="",i=s.tabSize,n=s.facet($r)[0];if(n=="	"){for(;e>=i;)t+="	",e-=i;n=" "}for(let r=0;r<e;r++)t+=n;return t}function ha(s,e){s instanceof Z&&(s=new Ur(s));for(let i of s.state.facet(Kw)){let n=i(s,e);if(n!==void 0)return n}let t=He(s.state);return t.length>=e?Qw(s,t,e):null}class Ur{constructor(e,t={}){this.state=e,this.options=t,this.unit=Dr(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:r}=this.options;return n!=null&&n>=i.from&&n<=i.to?r&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),r=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,t=e.length){return fs(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let o=r(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const $u=new Q;function Qw(s,e,t){let i=e.resolveStack(t),n=i.node.enterUnfinishedNodesBefore(t);if(n!=i.node){let r=[];for(let o=n;o!=i.node;o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return Uu(i,s,t)}function Uu(s,e,t){for(let i=s;i;i=i.next){let n=Xw(i.node);if(n)return n(ca.create(e,t,i))}return 0}function Jw(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function Xw(s){let e=s.type.prop($u);if(e)return e;let t=s.firstChild,i;if(t&&(i=t.type.prop(Q.closedBy))){let n=s.lastChild,r=n&&i.indexOf(n.name)>-1;return o=>ik(o,!0,1,void 0,r&&!Jw(o)?n.from:void 0)}return s.parent==null?Zw:null}function Zw(){return 0}class ca extends Ur{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new ca(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(ek(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Uu(this.context.next,this.base,this.pos)}}function ek(s,e){for(let t=e;t;t=t.parent)if(s==t)return!0;return!1}function tk(s){let e=s.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=s.options.simulateBreak,r=s.state.doc.lineAt(t.from),o=n==null||n<=r.from?r.to:Math.min(r.to,n);for(let l=t.to;;){let h=e.childAfter(l);if(!h||h==i)return null;if(!h.type.isSkipped)return h.from<o?t:null;l=h.to}}function ik(s,e,t,i,n){let r=s.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||n==s.pos+o,h=e?tk(s):null;return h?l?s.column(h.from):s.column(h.to):s.baseIndent+(l?0:s.unit*t)}function Pc({except:s,units:e=1}={}){return t=>{let i=s&&s.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const sk=200;function nk(){return Z.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let t=s.newDoc,{head:i}=s.newSelection.main,n=t.lineAt(i);if(i>n.from+sk)return s;let r=t.sliceString(n.from,i);if(!e.some(c=>c.test(r)))return s;let{state:o}=s,l=-1,h=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==l)continue;l=u.from;let p=ha(o,u.from);if(p==null)continue;let g=/^\s*/.exec(u.text)[0],b=Qs(o,p);g!=b&&h.push({from:u.from,to:u.from+g.length,insert:b})}return h.length?[s,{changes:h,sequential:!0}]:s})}const rk=F.define(),ju=new Q;function ok(s){let e=s.firstChild,t=s.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?s.to:t.from}:null}function lk(s,e,t){let i=He(s);if(i.length<t)return null;let n=i.resolveStack(t,1),r=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(r&&l.from<e)break;let h=l.type.prop(ju);if(h&&(l.to<i.length-50||i.length==s.doc.length||!ak(l))){let c=h(l,s);c&&c.from<=t&&c.from>=e&&c.to>t&&(r=c)}}return r}function ak(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function Ar(s,e,t){for(let i of s.facet(rk)){let n=i(s,e,t);if(n)return n}return lk(s,e,t)}function qu(s,e){let t=e.mapPos(s.from,1),i=e.mapPos(s.to,-1);return t>=i?void 0:{from:t,to:i}}const jr=q.define({map:qu}),rn=q.define({map:qu});function Gu(s){let e=[];for(let{head:t}of s.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(s.lineBlockAt(t));return e}const Ni=Be.define({create(){return V.none},update(s,e){s=s.map(e.changes);for(let t of e.effects)if(t.is(jr)&&!hk(s,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(fa),n=i?V.replace({widget:new gk(i(e.state,t.value))}):Rc;s=s.update({add:[n.range(t.value.from,t.value.to)]})}else t.is(rn)&&(s=s.update({filter:(i,n)=>t.value.from!=i||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;s.between(i,i,(n,r)=>{n<i&&r>i&&(t=!0)}),t&&(s=s.update({filterFrom:i,filterTo:i,filter:(n,r)=>r<=i||n>=i}))}return s},provide:s=>I.decorations.from(s),toJSON(s,e){let t=[];return s.between(0,e.doc.length,(i,n)=>{t.push(i,n)}),t},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<s.length;){let i=s[t++],n=s[t++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(Rc.range(i,n))}return V.set(e,!0)}});function Tr(s,e,t){var i;let n=null;return(i=s.field(Ni,!1))===null||i===void 0||i.between(e,t,(r,o)=>{(!n||n.from>r)&&(n={from:r,to:o})}),n}function hk(s,e,t){let i=!1;return s.between(e,e,(n,r)=>{n==e&&r==t&&(i=!0)}),i}function Ku(s,e){return s.field(Ni,!1)?e:e.concat(q.appendConfig.of(Ju()))}const ck=s=>{for(let e of Gu(s)){let t=Ar(s.state,e.from,e.to);if(t)return s.dispatch({effects:Ku(s.state,[jr.of(t),Qu(s,t)])}),!0}return!1},fk=s=>{if(!s.state.field(Ni,!1))return!1;let e=[];for(let t of Gu(s)){let i=Tr(s.state,t.from,t.to);i&&e.push(rn.of(i),Qu(s,i,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function Qu(s,e,t=!0){let i=s.state.doc.lineAt(e.from).number,n=s.state.doc.lineAt(e.to).number;return I.announce.of(`${s.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${s.state.phrase("to")} ${n}.`)}const uk=s=>{let{state:e}=s,t=[];for(let i=0;i<e.doc.length;){let n=s.lineBlockAt(i),r=Ar(e,n.from,n.to);r&&t.push(jr.of(r)),i=(r?s.lineBlockAt(r.to):n).to+1}return t.length&&s.dispatch({effects:Ku(s.state,t)}),!!t.length},dk=s=>{let e=s.state.field(Ni,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,s.state.doc.length,(i,n)=>{t.push(rn.of({from:i,to:n}))}),s.dispatch({effects:t}),!0},pk=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:ck},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:fk},{key:"Ctrl-Alt-[",run:uk},{key:"Ctrl-Alt-]",run:dk}],mk={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},fa=F.define({combine(s){return Et(s,mk)}});function Ju(s){let e=[Ni,wk];return s&&e.push(fa.of(s)),e}function Xu(s,e){let{state:t}=s,i=t.facet(fa),n=o=>{let l=s.lineBlockAt(s.posAtDOM(o.target)),h=Tr(s.state,l.from,l.to);h&&s.dispatch({effects:rn.of(h)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(s,n,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}const Rc=V.replace({widget:new class extends Zt{toDOM(s){return Xu(s,null)}}});class gk extends Zt{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Xu(e,this.value)}}const yk={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Yo extends Jt{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function bk(s={}){let e=Object.assign(Object.assign({},yk),s),t=new Yo(e,!0),i=new Yo(e,!1),n=ke.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(wi)!=o.state.facet(wi)||o.startState.field(Ni,!1)!=o.state.field(Ni,!1)||He(o.startState)!=He(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new mi;for(let h of o.viewportLineBlocks){let c=Tr(o.state,h.from,h.to)?i:Ar(o.state,h.from,h.to)?t:null;c&&l.add(h.from,h.from,c)}return l.finish()}}),{domEventHandlers:r}=e;return[n,Nw({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||se.empty},initialSpacer(){return new Yo(e,!1)},domEventHandlers:Object.assign(Object.assign({},r),{click:(o,l,h)=>{if(r.click&&r.click(o,l,h))return!0;let c=Tr(o.state,l.from,l.to);if(c)return o.dispatch({effects:rn.of(c)}),!0;let u=Ar(o.state,l.from,l.to);return u?(o.dispatch({effects:jr.of(u)}),!0):!1}})}),Ju()]}const wk=I.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class on{constructor(e,t){this.specs=e;let i;function n(l){let h=gi.newName();return(i||(i=Object.create(null)))["."+h]=l,h}const r=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,o=t.scope;this.scope=o instanceof wt?l=>l.prop(Gi)==o.data:o?l=>l==o:void 0,this.style=wf(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new gi(i):null,this.themeType=t.themeType}static define(e,t){return new on(e,t||{})}}const Nl=F.define(),Zu=F.define({combine(s){return s.length?[s[0]]:null}});function Vo(s){let e=s.facet(Nl);return e.length?e:s.facet(Zu)}function ed(s,e){let t=[xk],i;return s instanceof on&&(s.module&&t.push(I.styleModule.of(s.module)),i=s.themeType),e!=null&&e.fallback?t.push(Zu.of(s)):i?t.push(Nl.computeN([I.darkTheme],n=>n.facet(I.darkTheme)==(i=="dark")?[s]:[])):t.push(Nl.of(s)),t}class kk{constructor(e){this.markCache=Object.create(null),this.tree=He(e.state),this.decorations=this.buildDeco(e,Vo(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=He(e.state),i=Vo(e.state),n=i!=Vo(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!n&&t.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return V.none;let i=new mi;for(let{from:n,to:r}of e.visibleRanges)Uy(this.tree,t,(o,l,h)=>{i.add(o,l,this.markCache[h]||(this.markCache[h]=V.mark({class:h})))},n,r);return i.finish()}}const xk=cs.high(ke.fromClass(kk,{decorations:s=>s.decorations})),vk=on.define([{tag:M.meta,color:"#404740"},{tag:M.link,textDecoration:"underline"},{tag:M.heading,textDecoration:"underline",fontWeight:"bold"},{tag:M.emphasis,fontStyle:"italic"},{tag:M.strong,fontWeight:"bold"},{tag:M.strikethrough,textDecoration:"line-through"},{tag:M.keyword,color:"#708"},{tag:[M.atom,M.bool,M.url,M.contentSeparator,M.labelName],color:"#219"},{tag:[M.literal,M.inserted],color:"#164"},{tag:[M.string,M.deleted],color:"#a11"},{tag:[M.regexp,M.escape,M.special(M.string)],color:"#e40"},{tag:M.definition(M.variableName),color:"#00f"},{tag:M.local(M.variableName),color:"#30a"},{tag:[M.typeName,M.namespace],color:"#085"},{tag:M.className,color:"#167"},{tag:[M.special(M.variableName),M.macroName],color:"#256"},{tag:M.definition(M.propertyName),color:"#00c"},{tag:M.comment,color:"#940"},{tag:M.invalid,color:"#f00"}]),Sk=I.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),td=1e4,id="()[]{}",sd=F.define({combine(s){return Et(s,{afterCursor:!0,brackets:id,maxScanDistance:td,renderMatch:Ok})}}),Ck=V.mark({class:"cm-matchingBracket"}),Mk=V.mark({class:"cm-nonmatchingBracket"});function Ok(s){let e=[],t=s.matched?Ck:Mk;return e.push(t.range(s.start.from,s.start.to)),s.end&&e.push(t.range(s.end.from,s.end.to)),e}const Dk=Be.define({create(){return V.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let t=[],i=e.state.facet(sd);for(let n of e.state.selection.ranges){if(!n.empty)continue;let r=Lt(e.state,n.head,-1,i)||n.head>0&&Lt(e.state,n.head-1,1,i)||i.afterCursor&&(Lt(e.state,n.head,1,i)||n.head<e.state.doc.length&&Lt(e.state,n.head+1,-1,i));r&&(t=t.concat(i.renderMatch(r,e.state)))}return V.set(t,!0)},provide:s=>I.decorations.from(s)}),Ak=[Dk,Sk];function Tk(s={}){return[sd.of(s),Ak]}const _k=new Q;function Bl(s,e,t){let i=s.prop(e<0?Q.openedBy:Q.closedBy);if(i)return i;if(s.name.length==1){let n=t.indexOf(s.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function El(s){let e=s.type.prop(_k);return e?e(s.node):s}function Lt(s,e,t,i={}){let n=i.maxScanDistance||td,r=i.brackets||id,o=He(s),l=o.resolveInner(e,t);for(let h=l;h;h=h.parent){let c=Bl(h.type,t,r);if(c&&h.from<h.to){let u=El(h);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return Pk(s,e,t,h,u,c,r)}}return Rk(s,e,t,o,l.type,n,r)}function Pk(s,e,t,i,n,r,o){let l=i.parent,h={from:n.from,to:n.to},c=0,u=l==null?void 0:l.cursor();if(u&&(t<0?u.childBefore(i.from):u.childAfter(i.to)))do if(t<0?u.to<=i.from:u.from>=i.to){if(c==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let p=El(u);return{start:h,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(Bl(u.type,t,o))c++;else if(Bl(u.type,-t,o)){if(c==0){let p=El(u);return{start:h,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:h,matched:!1}}function Rk(s,e,t,i,n,r,o){let l=t<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),h=o.indexOf(l);if(h<0||h%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=s.doc.iterRange(e,t>0?s.doc.length:0),p=0;for(let g=0;!u.next().done&&g<=r;){let b=u.value;t<0&&(g+=b.length);let w=e+g*t;for(let v=t>0?0:b.length-1,k=t>0?b.length:-1;v!=k;v+=t){let S=o.indexOf(b[v]);if(!(S<0||i.resolveInner(w+v,1).type!=n))if(S%2==0==t>0)p++;else{if(p==1)return{start:c,end:{from:w+v,to:w+v+1},matched:S>>1==h>>1};p--}}t>0&&(g+=b.length)}return u.done?{start:c,matched:!1}:null}const Lk=Object.create(null),Lc=[Ze.none],Nc=[],Bc=Object.create(null),Nk=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Nk[s]=Bk(Lk,e);function zo(s,e){Nc.indexOf(s)>-1||(Nc.push(s),console.warn(e))}function Bk(s,e){let t=[];for(let l of e.split(" ")){let h=[];for(let c of l.split(".")){let u=s[c]||M[c];u?typeof u=="function"?h.length?h=h.map(u):zo(c,`Modifier ${c} used at start of tag`):h.length?zo(c,`Tag ${c} used as modifier`):h=Array.isArray(u)?u:[u]:zo(c,`Unknown highlighting tag ${c}`)}for(let c of h)t.push(c)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+t.map(l=>l.id),r=Bc[n];if(r)return r.id;let o=Bc[n]=Ze.define({id:Lc.length,name:i,props:[yf({[i]:t})]});return Lc.push(o),o.id}me.RTL,me.LTR;const Ek=Mr.define({name:"json",parser:Ky.configure({props:[$u.add({Object:Pc({except:/^\s*\}/}),Array:Pc({except:/^\s*\]/})}),ju.add({"Object Array":ok})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Ik(){return new Gw(Ek)}const Fk="#e5c07b",Ec="#e06c75",Wk="#56b6c2",Hk="#ffffff",fr="#abb2bf",Il="#7d8799",Yk="#61afef",Vk="#98c379",Ic="#d19a66",zk="#c678dd",$k="#21252b",Fc="#2c313a",Wc="#282c34",$o="#353a42",Uk="#3E4451",Hc="#528bff",jk=I.theme({"&":{color:fr,backgroundColor:Wc},".cm-content":{caretColor:Hc},".cm-cursor, .cm-dropCursor":{borderLeftColor:Hc},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Uk},".cm-panels":{backgroundColor:$k,color:fr},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Wc,color:Il,border:"none"},".cm-activeLineGutter":{backgroundColor:Fc},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:$o},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:$o,borderBottomColor:$o},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Fc,color:fr}}},{dark:!0}),qk=on.define([{tag:M.keyword,color:zk},{tag:[M.name,M.deleted,M.character,M.propertyName,M.macroName],color:Ec},{tag:[M.function(M.variableName),M.labelName],color:Yk},{tag:[M.color,M.constant(M.name),M.standard(M.name)],color:Ic},{tag:[M.definition(M.name),M.separator],color:fr},{tag:[M.typeName,M.className,M.number,M.changed,M.annotation,M.modifier,M.self,M.namespace],color:Fk},{tag:[M.operator,M.operatorKeyword,M.url,M.escape,M.regexp,M.link,M.special(M.string)],color:Wk},{tag:[M.meta,M.comment],color:Il},{tag:M.strong,fontWeight:"bold"},{tag:M.emphasis,fontStyle:"italic"},{tag:M.strikethrough,textDecoration:"line-through"},{tag:M.link,color:Il,textDecoration:"underline"},{tag:M.heading,fontWeight:"bold",color:Ec},{tag:[M.atom,M.bool,M.special(M.variableName)],color:Ic},{tag:[M.processingInstruction,M.string,M.inserted],color:Vk},{tag:M.invalid,color:Hk}]),Gk=[jk,ed(qk)],Kk={key:1},Qk={key:2},Jk={__name:"reload-data",props:{loading:{type:Boolean,default:!1}},setup(s){return(e,t)=>{const i=Ul("font-awesome-icon");return Me(),qe("button",{class:"space-x-3 flex items-center border-button",onClick:t[0]||(t[0]=n=>e.$emit("reload"))},[s.loading?Ns("",!0):(Me(),Zn(i,{key:0,class:"text-secondary text-xl",icon:["fas","refresh"]})),Rt(Sy,{show:s.loading,size:"w-6 h-6",color:" fill-red-600"},null,8,["show"]),s.loading?Ns("",!0):(Me(),qe("span",Kk,"Reload Data")),s.loading?(Me(),qe("span",Qk,"Fetching Data")):Ns("",!0)])}}};var Xk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zk(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function ex(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nd={exports:{}};(function(s,e){(function(t,i){s.exports=i()})(Xk,function(){var t;function i(){return t.apply(null,arguments)}function n(a){t=a}function r(a){return a instanceof Array||Object.prototype.toString.call(a)==="[object Array]"}function o(a){return a!=null&&Object.prototype.toString.call(a)==="[object Object]"}function l(a,f){return Object.prototype.hasOwnProperty.call(a,f)}function h(a){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(a).length===0;var f;for(f in a)if(l(a,f))return!1;return!0}function c(a){return a===void 0}function u(a){return typeof a=="number"||Object.prototype.toString.call(a)==="[object Number]"}function p(a){return a instanceof Date||Object.prototype.toString.call(a)==="[object Date]"}function g(a,f){var d=[],m,y=a.length;for(m=0;m<y;++m)d.push(f(a[m],m));return d}function b(a,f){for(var d in f)l(f,d)&&(a[d]=f[d]);return l(f,"toString")&&(a.toString=f.toString),l(f,"valueOf")&&(a.valueOf=f.valueOf),a}function w(a,f,d,m){return za(a,f,d,m,!0).utc()}function v(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function k(a){return a._pf==null&&(a._pf=v()),a._pf}var S;Array.prototype.some?S=Array.prototype.some:S=function(a){var f=Object(this),d=f.length>>>0,m;for(m=0;m<d;m++)if(m in f&&a.call(this,f[m],m,f))return!0;return!1};function D(a){var f=null,d=!1,m=a._d&&!isNaN(a._d.getTime());if(m&&(f=k(a),d=S.call(f.parsedDateParts,function(y){return y!=null}),m=f.overflow<0&&!f.empty&&!f.invalidEra&&!f.invalidMonth&&!f.invalidWeekday&&!f.weekdayMismatch&&!f.nullInput&&!f.invalidFormat&&!f.userInvalidated&&(!f.meridiem||f.meridiem&&d),a._strict&&(m=m&&f.charsLeftOver===0&&f.unusedTokens.length===0&&f.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(a))a._isValid=m;else return m;return a._isValid}function R(a){var f=w(NaN);return a!=null?b(k(f),a):k(f).userInvalidated=!0,f}var _=i.momentProperties=[],A=!1;function N(a,f){var d,m,y,x=_.length;if(c(f._isAMomentObject)||(a._isAMomentObject=f._isAMomentObject),c(f._i)||(a._i=f._i),c(f._f)||(a._f=f._f),c(f._l)||(a._l=f._l),c(f._strict)||(a._strict=f._strict),c(f._tzm)||(a._tzm=f._tzm),c(f._isUTC)||(a._isUTC=f._isUTC),c(f._offset)||(a._offset=f._offset),c(f._pf)||(a._pf=k(f)),c(f._locale)||(a._locale=f._locale),x>0)for(d=0;d<x;d++)m=_[d],y=f[m],c(y)||(a[m]=y);return a}function P(a){N(this,a),this._d=new Date(a._d!=null?a._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),A===!1&&(A=!0,i.updateOffset(this),A=!1)}function Y(a){return a instanceof P||a!=null&&a._isAMomentObject!=null}function G(a){i.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+a)}function z(a,f){var d=!0;return b(function(){if(i.deprecationHandler!=null&&i.deprecationHandler(null,a),d){var m=[],y,x,C,B=arguments.length;for(x=0;x<B;x++){if(y="",typeof arguments[x]=="object"){y+=`
[`+x+"] ";for(C in arguments[0])l(arguments[0],C)&&(y+=C+": "+arguments[0][C]+", ");y=y.slice(0,-2)}else y=arguments[x];m.push(y)}G(a+`
Arguments: `+Array.prototype.slice.call(m).join("")+`
`+new Error().stack),d=!1}return f.apply(this,arguments)},f)}var j={};function U(a,f){i.deprecationHandler!=null&&i.deprecationHandler(a,f),j[a]||(G(f),j[a]=!0)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;function K(a){return typeof Function<"u"&&a instanceof Function||Object.prototype.toString.call(a)==="[object Function]"}function ie(a){var f,d;for(d in a)l(a,d)&&(f=a[d],K(f)?this[d]=f:this["_"+d]=f);this._config=a,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ae(a,f){var d=b({},a),m;for(m in f)l(f,m)&&(o(a[m])&&o(f[m])?(d[m]={},b(d[m],a[m]),b(d[m],f[m])):f[m]!=null?d[m]=f[m]:delete d[m]);for(m in a)l(a,m)&&!l(f,m)&&o(a[m])&&(d[m]=b({},d[m]));return d}function De(a){a!=null&&this.set(a)}var Ae;Object.keys?Ae=Object.keys:Ae=function(a){var f,d=[];for(f in a)l(a,f)&&d.push(f);return d};var Ve={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Qe(a,f,d){var m=this._calendar[a]||this._calendar.sameElse;return K(m)?m.call(f,d):m}function oe(a,f,d){var m=""+Math.abs(a),y=f-m.length,x=a>=0;return(x?d?"+":"":"-")+Math.pow(10,Math.max(0,y)).toString().substr(1)+m}var Ee=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ze=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,gt={},et={};function H(a,f,d,m){var y=m;typeof m=="string"&&(y=function(){return this[m]()}),a&&(et[a]=y),f&&(et[f[0]]=function(){return oe(y.apply(this,arguments),f[1],f[2])}),d&&(et[d]=function(){return this.localeData().ordinal(y.apply(this,arguments),a)})}function hn(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function up(a){var f=a.match(Ee),d,m;for(d=0,m=f.length;d<m;d++)et[f[d]]?f[d]=et[f[d]]:f[d]=hn(f[d]);return function(y){var x="",C;for(C=0;C<m;C++)x+=K(f[C])?f[C].call(y,a):f[C];return x}}function cn(a,f){return a.isValid()?(f=xa(f,a.localeData()),gt[f]=gt[f]||up(f),gt[f](a)):a.localeData().invalidDate()}function xa(a,f){var d=5;function m(y){return f.longDateFormat(y)||y}for(ze.lastIndex=0;d>=0&&ze.test(a);)a=a.replace(ze,m),ze.lastIndex=0,d-=1;return a}var dp={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function pp(a){var f=this._longDateFormat[a],d=this._longDateFormat[a.toUpperCase()];return f||!d?f:(this._longDateFormat[a]=d.match(Ee).map(function(m){return m==="MMMM"||m==="MM"||m==="DD"||m==="dddd"?m.slice(1):m}).join(""),this._longDateFormat[a])}var mp="Invalid date";function gp(){return this._invalidDate}var yp="%d",bp=/\d{1,2}/;function wp(a){return this._ordinal.replace("%d",a)}var kp={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function xp(a,f,d,m){var y=this._relativeTime[d];return K(y)?y(a,f,d,m):y.replace(/%d/i,a)}function vp(a,f){var d=this._relativeTime[a>0?"future":"past"];return K(d)?d(f):d.replace(/%s/i,f)}var va={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function at(a){return typeof a=="string"?va[a]||va[a.toLowerCase()]:void 0}function Zr(a){var f={},d,m;for(m in a)l(a,m)&&(d=at(m),d&&(f[d]=a[m]));return f}var Sp={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Cp(a){var f=[],d;for(d in a)l(a,d)&&f.push({unit:d,priority:Sp[d]});return f.sort(function(m,y){return m.priority-y.priority}),f}var Sa=/\d/,tt=/\d\d/,Ca=/\d{3}/,eo=/\d{4}/,fn=/[+-]?\d{6}/,fe=/\d\d?/,Ma=/\d\d\d\d?/,Oa=/\d\d\d\d\d\d?/,un=/\d{1,3}/,to=/\d{1,4}/,dn=/[+-]?\d{1,6}/,Bi=/\d+/,pn=/[+-]?\d+/,Mp=/Z|[+-]\d\d:?\d\d/gi,mn=/Z|[+-]\d\d(?::?\d\d)?/gi,Op=/[+-]?\d+(\.\d{1,3})?/,ps=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ei=/^[1-9]\d?/,io=/^([1-9]\d|\d)/,gn;gn={};function E(a,f,d){gn[a]=K(f)?f:function(m,y){return m&&d?d:f}}function Dp(a,f){return l(gn,a)?gn[a](f._strict,f._locale):new RegExp(Ap(a))}function Ap(a){return Ft(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(f,d,m,y,x){return d||m||y||x}))}function Ft(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ht(a){return a<0?Math.ceil(a)||0:Math.floor(a)}function X(a){var f=+a,d=0;return f!==0&&isFinite(f)&&(d=ht(f)),d}var so={};function le(a,f){var d,m=f,y;for(typeof a=="string"&&(a=[a]),u(f)&&(m=function(x,C){C[f]=X(x)}),y=a.length,d=0;d<y;d++)so[a[d]]=m}function ms(a,f){le(a,function(d,m,y,x){y._w=y._w||{},f(d,y._w,y,x)})}function Tp(a,f,d){f!=null&&l(so,a)&&so[a](f,d._a,d,a)}function yn(a){return a%4===0&&a%100!==0||a%400===0}var Ie=0,Wt=1,St=2,ve=3,yt=4,Ht=5,xi=6,_p=7,Pp=8;H("Y",0,0,function(){var a=this.year();return a<=9999?oe(a,4):"+"+a}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),E("Y",pn),E("YY",fe,tt),E("YYYY",to,eo),E("YYYYY",dn,fn),E("YYYYYY",dn,fn),le(["YYYYY","YYYYYY"],Ie),le("YYYY",function(a,f){f[Ie]=a.length===2?i.parseTwoDigitYear(a):X(a)}),le("YY",function(a,f){f[Ie]=i.parseTwoDigitYear(a)}),le("Y",function(a,f){f[Ie]=parseInt(a,10)});function gs(a){return yn(a)?366:365}i.parseTwoDigitYear=function(a){return X(a)+(X(a)>68?1900:2e3)};var Da=Ii("FullYear",!0);function Rp(){return yn(this.year())}function Ii(a,f){return function(d){return d!=null?(Aa(this,a,d),i.updateOffset(this,f),this):ys(this,a)}}function ys(a,f){if(!a.isValid())return NaN;var d=a._d,m=a._isUTC;switch(f){case"Milliseconds":return m?d.getUTCMilliseconds():d.getMilliseconds();case"Seconds":return m?d.getUTCSeconds():d.getSeconds();case"Minutes":return m?d.getUTCMinutes():d.getMinutes();case"Hours":return m?d.getUTCHours():d.getHours();case"Date":return m?d.getUTCDate():d.getDate();case"Day":return m?d.getUTCDay():d.getDay();case"Month":return m?d.getUTCMonth():d.getMonth();case"FullYear":return m?d.getUTCFullYear():d.getFullYear();default:return NaN}}function Aa(a,f,d){var m,y,x,C,B;if(!(!a.isValid()||isNaN(d))){switch(m=a._d,y=a._isUTC,f){case"Milliseconds":return void(y?m.setUTCMilliseconds(d):m.setMilliseconds(d));case"Seconds":return void(y?m.setUTCSeconds(d):m.setSeconds(d));case"Minutes":return void(y?m.setUTCMinutes(d):m.setMinutes(d));case"Hours":return void(y?m.setUTCHours(d):m.setHours(d));case"Date":return void(y?m.setUTCDate(d):m.setDate(d));case"FullYear":break;default:return}x=d,C=a.month(),B=a.date(),B=B===29&&C===1&&!yn(x)?28:B,y?m.setUTCFullYear(x,C,B):m.setFullYear(x,C,B)}}function Lp(a){return a=at(a),K(this[a])?this[a]():this}function Np(a,f){if(typeof a=="object"){a=Zr(a);var d=Cp(a),m,y=d.length;for(m=0;m<y;m++)this[d[m].unit](a[d[m].unit])}else if(a=at(a),K(this[a]))return this[a](f);return this}function Bp(a,f){return(a%f+f)%f}var be;Array.prototype.indexOf?be=Array.prototype.indexOf:be=function(a){var f;for(f=0;f<this.length;++f)if(this[f]===a)return f;return-1};function no(a,f){if(isNaN(a)||isNaN(f))return NaN;var d=Bp(f,12);return a+=(f-d)/12,d===1?yn(a)?29:28:31-d%7%2}H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),H("MMMM",0,0,function(a){return this.localeData().months(this,a)}),E("M",fe,Ei),E("MM",fe,tt),E("MMM",function(a,f){return f.monthsShortRegex(a)}),E("MMMM",function(a,f){return f.monthsRegex(a)}),le(["M","MM"],function(a,f){f[Wt]=X(a)-1}),le(["MMM","MMMM"],function(a,f,d,m){var y=d._locale.monthsParse(a,m,d._strict);y!=null?f[Wt]=y:k(d).invalidMonth=a});var Ep="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ta="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_a=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ip=ps,Fp=ps;function Wp(a,f){return a?r(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||_a).test(f)?"format":"standalone"][a.month()]:r(this._months)?this._months:this._months.standalone}function Hp(a,f){return a?r(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[_a.test(f)?"format":"standalone"][a.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Yp(a,f,d){var m,y,x,C=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],m=0;m<12;++m)x=w([2e3,m]),this._shortMonthsParse[m]=this.monthsShort(x,"").toLocaleLowerCase(),this._longMonthsParse[m]=this.months(x,"").toLocaleLowerCase();return d?f==="MMM"?(y=be.call(this._shortMonthsParse,C),y!==-1?y:null):(y=be.call(this._longMonthsParse,C),y!==-1?y:null):f==="MMM"?(y=be.call(this._shortMonthsParse,C),y!==-1?y:(y=be.call(this._longMonthsParse,C),y!==-1?y:null)):(y=be.call(this._longMonthsParse,C),y!==-1?y:(y=be.call(this._shortMonthsParse,C),y!==-1?y:null))}function Vp(a,f,d){var m,y,x;if(this._monthsParseExact)return Yp.call(this,a,f,d);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),m=0;m<12;m++){if(y=w([2e3,m]),d&&!this._longMonthsParse[m]&&(this._longMonthsParse[m]=new RegExp("^"+this.months(y,"").replace(".","")+"$","i"),this._shortMonthsParse[m]=new RegExp("^"+this.monthsShort(y,"").replace(".","")+"$","i")),!d&&!this._monthsParse[m]&&(x="^"+this.months(y,"")+"|^"+this.monthsShort(y,""),this._monthsParse[m]=new RegExp(x.replace(".",""),"i")),d&&f==="MMMM"&&this._longMonthsParse[m].test(a))return m;if(d&&f==="MMM"&&this._shortMonthsParse[m].test(a))return m;if(!d&&this._monthsParse[m].test(a))return m}}function Pa(a,f){if(!a.isValid())return a;if(typeof f=="string"){if(/^\d+$/.test(f))f=X(f);else if(f=a.localeData().monthsParse(f),!u(f))return a}var d=f,m=a.date();return m=m<29?m:Math.min(m,no(a.year(),d)),a._isUTC?a._d.setUTCMonth(d,m):a._d.setMonth(d,m),a}function Ra(a){return a!=null?(Pa(this,a),i.updateOffset(this,!0),this):ys(this,"Month")}function zp(){return no(this.year(),this.month())}function $p(a){return this._monthsParseExact?(l(this,"_monthsRegex")||La.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Ip),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function Up(a){return this._monthsParseExact?(l(this,"_monthsRegex")||La.call(this),a?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Fp),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function La(){function a($,ee){return ee.length-$.length}var f=[],d=[],m=[],y,x,C,B;for(y=0;y<12;y++)x=w([2e3,y]),C=Ft(this.monthsShort(x,"")),B=Ft(this.months(x,"")),f.push(C),d.push(B),m.push(B),m.push(C);f.sort(a),d.sort(a),m.sort(a),this._monthsRegex=new RegExp("^("+m.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+d.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+f.join("|")+")","i")}function jp(a,f,d,m,y,x,C){var B;return a<100&&a>=0?(B=new Date(a+400,f,d,m,y,x,C),isFinite(B.getFullYear())&&B.setFullYear(a)):B=new Date(a,f,d,m,y,x,C),B}function bs(a){var f,d;return a<100&&a>=0?(d=Array.prototype.slice.call(arguments),d[0]=a+400,f=new Date(Date.UTC.apply(null,d)),isFinite(f.getUTCFullYear())&&f.setUTCFullYear(a)):f=new Date(Date.UTC.apply(null,arguments)),f}function bn(a,f,d){var m=7+f-d,y=(7+bs(a,0,m).getUTCDay()-f)%7;return-y+m-1}function Na(a,f,d,m,y){var x=(7+d-m)%7,C=bn(a,m,y),B=1+7*(f-1)+x+C,$,ee;return B<=0?($=a-1,ee=gs($)+B):B>gs(a)?($=a+1,ee=B-gs(a)):($=a,ee=B),{year:$,dayOfYear:ee}}function ws(a,f,d){var m=bn(a.year(),f,d),y=Math.floor((a.dayOfYear()-m-1)/7)+1,x,C;return y<1?(C=a.year()-1,x=y+Yt(C,f,d)):y>Yt(a.year(),f,d)?(x=y-Yt(a.year(),f,d),C=a.year()+1):(C=a.year(),x=y),{week:x,year:C}}function Yt(a,f,d){var m=bn(a,f,d),y=bn(a+1,f,d);return(gs(a)-m+y)/7}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),E("w",fe,Ei),E("ww",fe,tt),E("W",fe,Ei),E("WW",fe,tt),ms(["w","ww","W","WW"],function(a,f,d,m){f[m.substr(0,1)]=X(a)});function qp(a){return ws(a,this._week.dow,this._week.doy).week}var Gp={dow:0,doy:6};function Kp(){return this._week.dow}function Qp(){return this._week.doy}function Jp(a){var f=this.localeData().week(this);return a==null?f:this.add((a-f)*7,"d")}function Xp(a){var f=ws(this,1,4).week;return a==null?f:this.add((a-f)*7,"d")}H("d",0,"do","day"),H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),E("d",fe),E("e",fe),E("E",fe),E("dd",function(a,f){return f.weekdaysMinRegex(a)}),E("ddd",function(a,f){return f.weekdaysShortRegex(a)}),E("dddd",function(a,f){return f.weekdaysRegex(a)}),ms(["dd","ddd","dddd"],function(a,f,d,m){var y=d._locale.weekdaysParse(a,m,d._strict);y!=null?f.d=y:k(d).invalidWeekday=a}),ms(["d","e","E"],function(a,f,d,m){f[m]=X(a)});function Zp(a,f){return typeof a!="string"?a:isNaN(a)?(a=f.weekdaysParse(a),typeof a=="number"?a:null):parseInt(a,10)}function em(a,f){return typeof a=="string"?f.weekdaysParse(a)%7||7:isNaN(a)?null:a}function ro(a,f){return a.slice(f,7).concat(a.slice(0,f))}var tm="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ba="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),im="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),sm=ps,nm=ps,rm=ps;function om(a,f){var d=r(this._weekdays)?this._weekdays:this._weekdays[a&&a!==!0&&this._weekdays.isFormat.test(f)?"format":"standalone"];return a===!0?ro(d,this._week.dow):a?d[a.day()]:d}function lm(a){return a===!0?ro(this._weekdaysShort,this._week.dow):a?this._weekdaysShort[a.day()]:this._weekdaysShort}function am(a){return a===!0?ro(this._weekdaysMin,this._week.dow):a?this._weekdaysMin[a.day()]:this._weekdaysMin}function hm(a,f,d){var m,y,x,C=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],m=0;m<7;++m)x=w([2e3,1]).day(m),this._minWeekdaysParse[m]=this.weekdaysMin(x,"").toLocaleLowerCase(),this._shortWeekdaysParse[m]=this.weekdaysShort(x,"").toLocaleLowerCase(),this._weekdaysParse[m]=this.weekdays(x,"").toLocaleLowerCase();return d?f==="dddd"?(y=be.call(this._weekdaysParse,C),y!==-1?y:null):f==="ddd"?(y=be.call(this._shortWeekdaysParse,C),y!==-1?y:null):(y=be.call(this._minWeekdaysParse,C),y!==-1?y:null):f==="dddd"?(y=be.call(this._weekdaysParse,C),y!==-1||(y=be.call(this._shortWeekdaysParse,C),y!==-1)?y:(y=be.call(this._minWeekdaysParse,C),y!==-1?y:null)):f==="ddd"?(y=be.call(this._shortWeekdaysParse,C),y!==-1||(y=be.call(this._weekdaysParse,C),y!==-1)?y:(y=be.call(this._minWeekdaysParse,C),y!==-1?y:null)):(y=be.call(this._minWeekdaysParse,C),y!==-1||(y=be.call(this._weekdaysParse,C),y!==-1)?y:(y=be.call(this._shortWeekdaysParse,C),y!==-1?y:null))}function cm(a,f,d){var m,y,x;if(this._weekdaysParseExact)return hm.call(this,a,f,d);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),m=0;m<7;m++){if(y=w([2e3,1]).day(m),d&&!this._fullWeekdaysParse[m]&&(this._fullWeekdaysParse[m]=new RegExp("^"+this.weekdays(y,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[m]=new RegExp("^"+this.weekdaysShort(y,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[m]=new RegExp("^"+this.weekdaysMin(y,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[m]||(x="^"+this.weekdays(y,"")+"|^"+this.weekdaysShort(y,"")+"|^"+this.weekdaysMin(y,""),this._weekdaysParse[m]=new RegExp(x.replace(".",""),"i")),d&&f==="dddd"&&this._fullWeekdaysParse[m].test(a))return m;if(d&&f==="ddd"&&this._shortWeekdaysParse[m].test(a))return m;if(d&&f==="dd"&&this._minWeekdaysParse[m].test(a))return m;if(!d&&this._weekdaysParse[m].test(a))return m}}function fm(a){if(!this.isValid())return a!=null?this:NaN;var f=ys(this,"Day");return a!=null?(a=Zp(a,this.localeData()),this.add(a-f,"d")):f}function um(a){if(!this.isValid())return a!=null?this:NaN;var f=(this.day()+7-this.localeData()._week.dow)%7;return a==null?f:this.add(a-f,"d")}function dm(a){if(!this.isValid())return a!=null?this:NaN;if(a!=null){var f=em(a,this.localeData());return this.day(this.day()%7?f:f-7)}else return this.day()||7}function pm(a){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||oo.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=sm),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function mm(a){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||oo.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=nm),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function gm(a){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||oo.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=rm),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function oo(){function a($e,jt){return jt.length-$e.length}var f=[],d=[],m=[],y=[],x,C,B,$,ee;for(x=0;x<7;x++)C=w([2e3,1]).day(x),B=Ft(this.weekdaysMin(C,"")),$=Ft(this.weekdaysShort(C,"")),ee=Ft(this.weekdays(C,"")),f.push(B),d.push($),m.push(ee),y.push(B),y.push($),y.push(ee);f.sort(a),d.sort(a),m.sort(a),y.sort(a),this._weekdaysRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+m.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+f.join("|")+")","i")}function lo(){return this.hours()%12||12}function ym(){return this.hours()||24}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,lo),H("k",["kk",2],0,ym),H("hmm",0,0,function(){return""+lo.apply(this)+oe(this.minutes(),2)}),H("hmmss",0,0,function(){return""+lo.apply(this)+oe(this.minutes(),2)+oe(this.seconds(),2)}),H("Hmm",0,0,function(){return""+this.hours()+oe(this.minutes(),2)}),H("Hmmss",0,0,function(){return""+this.hours()+oe(this.minutes(),2)+oe(this.seconds(),2)});function Ea(a,f){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),f)})}Ea("a",!0),Ea("A",!1);function Ia(a,f){return f._meridiemParse}E("a",Ia),E("A",Ia),E("H",fe,io),E("h",fe,Ei),E("k",fe,Ei),E("HH",fe,tt),E("hh",fe,tt),E("kk",fe,tt),E("hmm",Ma),E("hmmss",Oa),E("Hmm",Ma),E("Hmmss",Oa),le(["H","HH"],ve),le(["k","kk"],function(a,f,d){var m=X(a);f[ve]=m===24?0:m}),le(["a","A"],function(a,f,d){d._isPm=d._locale.isPM(a),d._meridiem=a}),le(["h","hh"],function(a,f,d){f[ve]=X(a),k(d).bigHour=!0}),le("hmm",function(a,f,d){var m=a.length-2;f[ve]=X(a.substr(0,m)),f[yt]=X(a.substr(m)),k(d).bigHour=!0}),le("hmmss",function(a,f,d){var m=a.length-4,y=a.length-2;f[ve]=X(a.substr(0,m)),f[yt]=X(a.substr(m,2)),f[Ht]=X(a.substr(y)),k(d).bigHour=!0}),le("Hmm",function(a,f,d){var m=a.length-2;f[ve]=X(a.substr(0,m)),f[yt]=X(a.substr(m))}),le("Hmmss",function(a,f,d){var m=a.length-4,y=a.length-2;f[ve]=X(a.substr(0,m)),f[yt]=X(a.substr(m,2)),f[Ht]=X(a.substr(y))});function bm(a){return(a+"").toLowerCase().charAt(0)==="p"}var wm=/[ap]\.?m?\.?/i,km=Ii("Hours",!0);function xm(a,f,d){return a>11?d?"pm":"PM":d?"am":"AM"}var Fa={calendar:Ve,longDateFormat:dp,invalidDate:mp,ordinal:yp,dayOfMonthOrdinalParse:bp,relativeTime:kp,months:Ep,monthsShort:Ta,week:Gp,weekdays:tm,weekdaysMin:im,weekdaysShort:Ba,meridiemParse:wm},ge={},ks={},xs;function vm(a,f){var d,m=Math.min(a.length,f.length);for(d=0;d<m;d+=1)if(a[d]!==f[d])return d;return m}function Wa(a){return a&&a.toLowerCase().replace("_","-")}function Sm(a){for(var f=0,d,m,y,x;f<a.length;){for(x=Wa(a[f]).split("-"),d=x.length,m=Wa(a[f+1]),m=m?m.split("-"):null;d>0;){if(y=wn(x.slice(0,d).join("-")),y)return y;if(m&&m.length>=d&&vm(x,m)>=d-1)break;d--}f++}return xs}function Cm(a){return!!(a&&a.match("^[^/\\\\]*$"))}function wn(a){var f=null,d;if(ge[a]===void 0&&s&&s.exports&&Cm(a))try{f=xs._abbr,d=ex,d("./locale/"+a),ei(f)}catch{ge[a]=null}return ge[a]}function ei(a,f){var d;return a&&(c(f)?d=Vt(a):d=ao(a,f),d?xs=d:typeof console<"u"&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?")),xs._abbr}function ao(a,f){if(f!==null){var d,m=Fa;if(f.abbr=a,ge[a]!=null)U("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),m=ge[a]._config;else if(f.parentLocale!=null)if(ge[f.parentLocale]!=null)m=ge[f.parentLocale]._config;else if(d=wn(f.parentLocale),d!=null)m=d._config;else return ks[f.parentLocale]||(ks[f.parentLocale]=[]),ks[f.parentLocale].push({name:a,config:f}),null;return ge[a]=new De(ae(m,f)),ks[a]&&ks[a].forEach(function(y){ao(y.name,y.config)}),ei(a),ge[a]}else return delete ge[a],null}function Mm(a,f){if(f!=null){var d,m,y=Fa;ge[a]!=null&&ge[a].parentLocale!=null?ge[a].set(ae(ge[a]._config,f)):(m=wn(a),m!=null&&(y=m._config),f=ae(y,f),m==null&&(f.abbr=a),d=new De(f),d.parentLocale=ge[a],ge[a]=d),ei(a)}else ge[a]!=null&&(ge[a].parentLocale!=null?(ge[a]=ge[a].parentLocale,a===ei()&&ei(a)):ge[a]!=null&&delete ge[a]);return ge[a]}function Vt(a){var f;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return xs;if(!r(a)){if(f=wn(a),f)return f;a=[a]}return Sm(a)}function Om(){return Ae(ge)}function ho(a){var f,d=a._a;return d&&k(a).overflow===-2&&(f=d[Wt]<0||d[Wt]>11?Wt:d[St]<1||d[St]>no(d[Ie],d[Wt])?St:d[ve]<0||d[ve]>24||d[ve]===24&&(d[yt]!==0||d[Ht]!==0||d[xi]!==0)?ve:d[yt]<0||d[yt]>59?yt:d[Ht]<0||d[Ht]>59?Ht:d[xi]<0||d[xi]>999?xi:-1,k(a)._overflowDayOfYear&&(f<Ie||f>St)&&(f=St),k(a)._overflowWeeks&&f===-1&&(f=_p),k(a)._overflowWeekday&&f===-1&&(f=Pp),k(a).overflow=f),a}var Dm=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Am=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tm=/Z|[+-]\d\d(?::?\d\d)?/,kn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],co=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],_m=/^\/?Date\((-?\d+)/i,Pm=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Rm={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Ha(a){var f,d,m=a._i,y=Dm.exec(m)||Am.exec(m),x,C,B,$,ee=kn.length,$e=co.length;if(y){for(k(a).iso=!0,f=0,d=ee;f<d;f++)if(kn[f][1].exec(y[1])){C=kn[f][0],x=kn[f][2]!==!1;break}if(C==null){a._isValid=!1;return}if(y[3]){for(f=0,d=$e;f<d;f++)if(co[f][1].exec(y[3])){B=(y[2]||" ")+co[f][0];break}if(B==null){a._isValid=!1;return}}if(!x&&B!=null){a._isValid=!1;return}if(y[4])if(Tm.exec(y[4]))$="Z";else{a._isValid=!1;return}a._f=C+(B||"")+($||""),uo(a)}else a._isValid=!1}function Lm(a,f,d,m,y,x){var C=[Nm(a),Ta.indexOf(f),parseInt(d,10),parseInt(m,10),parseInt(y,10)];return x&&C.push(parseInt(x,10)),C}function Nm(a){var f=parseInt(a,10);return f<=49?2e3+f:f<=999?1900+f:f}function Bm(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Em(a,f,d){if(a){var m=Ba.indexOf(a),y=new Date(f[0],f[1],f[2]).getDay();if(m!==y)return k(d).weekdayMismatch=!0,d._isValid=!1,!1}return!0}function Im(a,f,d){if(a)return Rm[a];if(f)return 0;var m=parseInt(d,10),y=m%100,x=(m-y)/100;return x*60+y}function Ya(a){var f=Pm.exec(Bm(a._i)),d;if(f){if(d=Lm(f[4],f[3],f[2],f[5],f[6],f[7]),!Em(f[1],d,a))return;a._a=d,a._tzm=Im(f[8],f[9],f[10]),a._d=bs.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),k(a).rfc2822=!0}else a._isValid=!1}function Fm(a){var f=_m.exec(a._i);if(f!==null){a._d=new Date(+f[1]);return}if(Ha(a),a._isValid===!1)delete a._isValid;else return;if(Ya(a),a._isValid===!1)delete a._isValid;else return;a._strict?a._isValid=!1:i.createFromInputFallback(a)}i.createFromInputFallback=z("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});function Fi(a,f,d){return a??f??d}function Wm(a){var f=new Date(i.now());return a._useUTC?[f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()]:[f.getFullYear(),f.getMonth(),f.getDate()]}function fo(a){var f,d,m=[],y,x,C;if(!a._d){for(y=Wm(a),a._w&&a._a[St]==null&&a._a[Wt]==null&&Hm(a),a._dayOfYear!=null&&(C=Fi(a._a[Ie],y[Ie]),(a._dayOfYear>gs(C)||a._dayOfYear===0)&&(k(a)._overflowDayOfYear=!0),d=bs(C,0,a._dayOfYear),a._a[Wt]=d.getUTCMonth(),a._a[St]=d.getUTCDate()),f=0;f<3&&a._a[f]==null;++f)a._a[f]=m[f]=y[f];for(;f<7;f++)a._a[f]=m[f]=a._a[f]==null?f===2?1:0:a._a[f];a._a[ve]===24&&a._a[yt]===0&&a._a[Ht]===0&&a._a[xi]===0&&(a._nextDay=!0,a._a[ve]=0),a._d=(a._useUTC?bs:jp).apply(null,m),x=a._useUTC?a._d.getUTCDay():a._d.getDay(),a._tzm!=null&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[ve]=24),a._w&&typeof a._w.d<"u"&&a._w.d!==x&&(k(a).weekdayMismatch=!0)}}function Hm(a){var f,d,m,y,x,C,B,$,ee;f=a._w,f.GG!=null||f.W!=null||f.E!=null?(x=1,C=4,d=Fi(f.GG,a._a[Ie],ws(ue(),1,4).year),m=Fi(f.W,1),y=Fi(f.E,1),(y<1||y>7)&&($=!0)):(x=a._locale._week.dow,C=a._locale._week.doy,ee=ws(ue(),x,C),d=Fi(f.gg,a._a[Ie],ee.year),m=Fi(f.w,ee.week),f.d!=null?(y=f.d,(y<0||y>6)&&($=!0)):f.e!=null?(y=f.e+x,(f.e<0||f.e>6)&&($=!0)):y=x),m<1||m>Yt(d,x,C)?k(a)._overflowWeeks=!0:$!=null?k(a)._overflowWeekday=!0:(B=Na(d,m,y,x,C),a._a[Ie]=B.year,a._dayOfYear=B.dayOfYear)}i.ISO_8601=function(){},i.RFC_2822=function(){};function uo(a){if(a._f===i.ISO_8601){Ha(a);return}if(a._f===i.RFC_2822){Ya(a);return}a._a=[],k(a).empty=!0;var f=""+a._i,d,m,y,x,C,B=f.length,$=0,ee,$e;for(y=xa(a._f,a._locale).match(Ee)||[],$e=y.length,d=0;d<$e;d++)x=y[d],m=(f.match(Dp(x,a))||[])[0],m&&(C=f.substr(0,f.indexOf(m)),C.length>0&&k(a).unusedInput.push(C),f=f.slice(f.indexOf(m)+m.length),$+=m.length),et[x]?(m?k(a).empty=!1:k(a).unusedTokens.push(x),Tp(x,m,a)):a._strict&&!m&&k(a).unusedTokens.push(x);k(a).charsLeftOver=B-$,f.length>0&&k(a).unusedInput.push(f),a._a[ve]<=12&&k(a).bigHour===!0&&a._a[ve]>0&&(k(a).bigHour=void 0),k(a).parsedDateParts=a._a.slice(0),k(a).meridiem=a._meridiem,a._a[ve]=Ym(a._locale,a._a[ve],a._meridiem),ee=k(a).era,ee!==null&&(a._a[Ie]=a._locale.erasConvertYear(ee,a._a[Ie])),fo(a),ho(a)}function Ym(a,f,d){var m;return d==null?f:a.meridiemHour!=null?a.meridiemHour(f,d):(a.isPM!=null&&(m=a.isPM(d),m&&f<12&&(f+=12),!m&&f===12&&(f=0)),f)}function Vm(a){var f,d,m,y,x,C,B=!1,$=a._f.length;if($===0){k(a).invalidFormat=!0,a._d=new Date(NaN);return}for(y=0;y<$;y++)x=0,C=!1,f=N({},a),a._useUTC!=null&&(f._useUTC=a._useUTC),f._f=a._f[y],uo(f),D(f)&&(C=!0),x+=k(f).charsLeftOver,x+=k(f).unusedTokens.length*10,k(f).score=x,B?x<m&&(m=x,d=f):(m==null||x<m||C)&&(m=x,d=f,C&&(B=!0));b(a,d||f)}function zm(a){if(!a._d){var f=Zr(a._i),d=f.day===void 0?f.date:f.day;a._a=g([f.year,f.month,d,f.hour,f.minute,f.second,f.millisecond],function(m){return m&&parseInt(m,10)}),fo(a)}}function $m(a){var f=new P(ho(Va(a)));return f._nextDay&&(f.add(1,"d"),f._nextDay=void 0),f}function Va(a){var f=a._i,d=a._f;return a._locale=a._locale||Vt(a._l),f===null||d===void 0&&f===""?R({nullInput:!0}):(typeof f=="string"&&(a._i=f=a._locale.preparse(f)),Y(f)?new P(ho(f)):(p(f)?a._d=f:r(d)?Vm(a):d?uo(a):Um(a),D(a)||(a._d=null),a))}function Um(a){var f=a._i;c(f)?a._d=new Date(i.now()):p(f)?a._d=new Date(f.valueOf()):typeof f=="string"?Fm(a):r(f)?(a._a=g(f.slice(0),function(d){return parseInt(d,10)}),fo(a)):o(f)?zm(a):u(f)?a._d=new Date(f):i.createFromInputFallback(a)}function za(a,f,d,m,y){var x={};return(f===!0||f===!1)&&(m=f,f=void 0),(d===!0||d===!1)&&(m=d,d=void 0),(o(a)&&h(a)||r(a)&&a.length===0)&&(a=void 0),x._isAMomentObject=!0,x._useUTC=x._isUTC=y,x._l=d,x._i=a,x._f=f,x._strict=m,$m(x)}function ue(a,f,d,m){return za(a,f,d,m,!1)}var jm=z("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=ue.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:R()}),qm=z("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=ue.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:R()});function $a(a,f){var d,m;if(f.length===1&&r(f[0])&&(f=f[0]),!f.length)return ue();for(d=f[0],m=1;m<f.length;++m)(!f[m].isValid()||f[m][a](d))&&(d=f[m]);return d}function Gm(){var a=[].slice.call(arguments,0);return $a("isBefore",a)}function Km(){var a=[].slice.call(arguments,0);return $a("isAfter",a)}var Qm=function(){return Date.now?Date.now():+new Date},vs=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Jm(a){var f,d=!1,m,y=vs.length;for(f in a)if(l(a,f)&&!(be.call(vs,f)!==-1&&(a[f]==null||!isNaN(a[f]))))return!1;for(m=0;m<y;++m)if(a[vs[m]]){if(d)return!1;parseFloat(a[vs[m]])!==X(a[vs[m]])&&(d=!0)}return!0}function Xm(){return this._isValid}function Zm(){return bt(NaN)}function xn(a){var f=Zr(a),d=f.year||0,m=f.quarter||0,y=f.month||0,x=f.week||f.isoWeek||0,C=f.day||0,B=f.hour||0,$=f.minute||0,ee=f.second||0,$e=f.millisecond||0;this._isValid=Jm(f),this._milliseconds=+$e+ee*1e3+$*6e4+B*1e3*60*60,this._days=+C+x*7,this._months=+y+m*3+d*12,this._data={},this._locale=Vt(),this._bubble()}function vn(a){return a instanceof xn}function po(a){return a<0?Math.round(-1*a)*-1:Math.round(a)}function eg(a,f,d){var m=Math.min(a.length,f.length),y=Math.abs(a.length-f.length),x=0,C;for(C=0;C<m;C++)(d&&a[C]!==f[C]||!d&&X(a[C])!==X(f[C]))&&x++;return x+y}function Ua(a,f){H(a,0,0,function(){var d=this.utcOffset(),m="+";return d<0&&(d=-d,m="-"),m+oe(~~(d/60),2)+f+oe(~~d%60,2)})}Ua("Z",":"),Ua("ZZ",""),E("Z",mn),E("ZZ",mn),le(["Z","ZZ"],function(a,f,d){d._useUTC=!0,d._tzm=mo(mn,a)});var tg=/([\+\-]|\d\d)/gi;function mo(a,f){var d=(f||"").match(a),m,y,x;return d===null?null:(m=d[d.length-1]||[],y=(m+"").match(tg)||["-",0,0],x=+(y[1]*60)+X(y[2]),x===0?0:y[0]==="+"?x:-x)}function go(a,f){var d,m;return f._isUTC?(d=f.clone(),m=(Y(a)||p(a)?a.valueOf():ue(a).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+m),i.updateOffset(d,!1),d):ue(a).local()}function yo(a){return-Math.round(a._d.getTimezoneOffset())}i.updateOffset=function(){};function ig(a,f,d){var m=this._offset||0,y;if(!this.isValid())return a!=null?this:NaN;if(a!=null){if(typeof a=="string"){if(a=mo(mn,a),a===null)return this}else Math.abs(a)<16&&!d&&(a=a*60);return!this._isUTC&&f&&(y=yo(this)),this._offset=a,this._isUTC=!0,y!=null&&this.add(y,"m"),m!==a&&(!f||this._changeInProgress?Ka(this,bt(a-m,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?m:yo(this)}function sg(a,f){return a!=null?(typeof a!="string"&&(a=-a),this.utcOffset(a,f),this):-this.utcOffset()}function ng(a){return this.utcOffset(0,a)}function rg(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(yo(this),"m")),this}function og(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var a=mo(Mp,this._i);a!=null?this.utcOffset(a):this.utcOffset(0,!0)}return this}function lg(a){return this.isValid()?(a=a?ue(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function ag(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function hg(){if(!c(this._isDSTShifted))return this._isDSTShifted;var a={},f;return N(a,this),a=Va(a),a._a?(f=a._isUTC?w(a._a):ue(a._a),this._isDSTShifted=this.isValid()&&eg(a._a,f.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function cg(){return this.isValid()?!this._isUTC:!1}function fg(){return this.isValid()?this._isUTC:!1}function ja(){return this.isValid()?this._isUTC&&this._offset===0:!1}var ug=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,dg=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function bt(a,f){var d=a,m=null,y,x,C;return vn(a)?d={ms:a._milliseconds,d:a._days,M:a._months}:u(a)||!isNaN(+a)?(d={},f?d[f]=+a:d.milliseconds=+a):(m=ug.exec(a))?(y=m[1]==="-"?-1:1,d={y:0,d:X(m[St])*y,h:X(m[ve])*y,m:X(m[yt])*y,s:X(m[Ht])*y,ms:X(po(m[xi]*1e3))*y}):(m=dg.exec(a))?(y=m[1]==="-"?-1:1,d={y:vi(m[2],y),M:vi(m[3],y),w:vi(m[4],y),d:vi(m[5],y),h:vi(m[6],y),m:vi(m[7],y),s:vi(m[8],y)}):d==null?d={}:typeof d=="object"&&("from"in d||"to"in d)&&(C=pg(ue(d.from),ue(d.to)),d={},d.ms=C.milliseconds,d.M=C.months),x=new xn(d),vn(a)&&l(a,"_locale")&&(x._locale=a._locale),vn(a)&&l(a,"_isValid")&&(x._isValid=a._isValid),x}bt.fn=xn.prototype,bt.invalid=Zm;function vi(a,f){var d=a&&parseFloat(a.replace(",","."));return(isNaN(d)?0:d)*f}function qa(a,f){var d={};return d.months=f.month()-a.month()+(f.year()-a.year())*12,a.clone().add(d.months,"M").isAfter(f)&&--d.months,d.milliseconds=+f-+a.clone().add(d.months,"M"),d}function pg(a,f){var d;return a.isValid()&&f.isValid()?(f=go(f,a),a.isBefore(f)?d=qa(a,f):(d=qa(f,a),d.milliseconds=-d.milliseconds,d.months=-d.months),d):{milliseconds:0,months:0}}function Ga(a,f){return function(d,m){var y,x;return m!==null&&!isNaN(+m)&&(U(f,"moment()."+f+"(period, number) is deprecated. Please use moment()."+f+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),x=d,d=m,m=x),y=bt(d,m),Ka(this,y,a),this}}function Ka(a,f,d,m){var y=f._milliseconds,x=po(f._days),C=po(f._months);a.isValid()&&(m=m??!0,C&&Pa(a,ys(a,"Month")+C*d),x&&Aa(a,"Date",ys(a,"Date")+x*d),y&&a._d.setTime(a._d.valueOf()+y*d),m&&i.updateOffset(a,x||C))}var mg=Ga(1,"add"),gg=Ga(-1,"subtract");function Qa(a){return typeof a=="string"||a instanceof String}function yg(a){return Y(a)||p(a)||Qa(a)||u(a)||wg(a)||bg(a)||a===null||a===void 0}function bg(a){var f=o(a)&&!h(a),d=!1,m=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],y,x,C=m.length;for(y=0;y<C;y+=1)x=m[y],d=d||l(a,x);return f&&d}function wg(a){var f=r(a),d=!1;return f&&(d=a.filter(function(m){return!u(m)&&Qa(a)}).length===0),f&&d}function kg(a){var f=o(a)&&!h(a),d=!1,m=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],y,x;for(y=0;y<m.length;y+=1)x=m[y],d=d||l(a,x);return f&&d}function xg(a,f){var d=a.diff(f,"days",!0);return d<-6?"sameElse":d<-1?"lastWeek":d<0?"lastDay":d<1?"sameDay":d<2?"nextDay":d<7?"nextWeek":"sameElse"}function vg(a,f){arguments.length===1&&(arguments[0]?yg(arguments[0])?(a=arguments[0],f=void 0):kg(arguments[0])&&(f=arguments[0],a=void 0):(a=void 0,f=void 0));var d=a||ue(),m=go(d,this).startOf("day"),y=i.calendarFormat(this,m)||"sameElse",x=f&&(K(f[y])?f[y].call(this,d):f[y]);return this.format(x||this.localeData().calendar(y,this,ue(d)))}function Sg(){return new P(this)}function Cg(a,f){var d=Y(a)?a:ue(a);return this.isValid()&&d.isValid()?(f=at(f)||"millisecond",f==="millisecond"?this.valueOf()>d.valueOf():d.valueOf()<this.clone().startOf(f).valueOf()):!1}function Mg(a,f){var d=Y(a)?a:ue(a);return this.isValid()&&d.isValid()?(f=at(f)||"millisecond",f==="millisecond"?this.valueOf()<d.valueOf():this.clone().endOf(f).valueOf()<d.valueOf()):!1}function Og(a,f,d,m){var y=Y(a)?a:ue(a),x=Y(f)?f:ue(f);return this.isValid()&&y.isValid()&&x.isValid()?(m=m||"()",(m[0]==="("?this.isAfter(y,d):!this.isBefore(y,d))&&(m[1]===")"?this.isBefore(x,d):!this.isAfter(x,d))):!1}function Dg(a,f){var d=Y(a)?a:ue(a),m;return this.isValid()&&d.isValid()?(f=at(f)||"millisecond",f==="millisecond"?this.valueOf()===d.valueOf():(m=d.valueOf(),this.clone().startOf(f).valueOf()<=m&&m<=this.clone().endOf(f).valueOf())):!1}function Ag(a,f){return this.isSame(a,f)||this.isAfter(a,f)}function Tg(a,f){return this.isSame(a,f)||this.isBefore(a,f)}function _g(a,f,d){var m,y,x;if(!this.isValid())return NaN;if(m=go(a,this),!m.isValid())return NaN;switch(y=(m.utcOffset()-this.utcOffset())*6e4,f=at(f),f){case"year":x=Sn(this,m)/12;break;case"month":x=Sn(this,m);break;case"quarter":x=Sn(this,m)/3;break;case"second":x=(this-m)/1e3;break;case"minute":x=(this-m)/6e4;break;case"hour":x=(this-m)/36e5;break;case"day":x=(this-m-y)/864e5;break;case"week":x=(this-m-y)/6048e5;break;default:x=this-m}return d?x:ht(x)}function Sn(a,f){if(a.date()<f.date())return-Sn(f,a);var d=(f.year()-a.year())*12+(f.month()-a.month()),m=a.clone().add(d,"months"),y,x;return f-m<0?(y=a.clone().add(d-1,"months"),x=(f-m)/(m-y)):(y=a.clone().add(d+1,"months"),x=(f-m)/(y-m)),-(d+x)||0}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Pg(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Rg(a){if(!this.isValid())return null;var f=a!==!0,d=f?this.clone().utc():this;return d.year()<0||d.year()>9999?cn(d,f?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):K(Date.prototype.toISOString)?f?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",cn(d,"Z")):cn(d,f?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Lg(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",f="",d,m,y,x;return this.isLocal()||(a=this.utcOffset()===0?"moment.utc":"moment.parseZone",f="Z"),d="["+a+'("]',m=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",y="-MM-DD[T]HH:mm:ss.SSS",x=f+'[")]',this.format(d+m+y+x)}function Ng(a){a||(a=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var f=cn(this,a);return this.localeData().postformat(f)}function Bg(a,f){return this.isValid()&&(Y(a)&&a.isValid()||ue(a).isValid())?bt({to:this,from:a}).locale(this.locale()).humanize(!f):this.localeData().invalidDate()}function Eg(a){return this.from(ue(),a)}function Ig(a,f){return this.isValid()&&(Y(a)&&a.isValid()||ue(a).isValid())?bt({from:this,to:a}).locale(this.locale()).humanize(!f):this.localeData().invalidDate()}function Fg(a){return this.to(ue(),a)}function Ja(a){var f;return a===void 0?this._locale._abbr:(f=Vt(a),f!=null&&(this._locale=f),this)}var Xa=z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return a===void 0?this.localeData():this.locale(a)});function Za(){return this._locale}var Cn=1e3,Wi=60*Cn,Mn=60*Wi,eh=(365*400+97)*24*Mn;function Hi(a,f){return(a%f+f)%f}function th(a,f,d){return a<100&&a>=0?new Date(a+400,f,d)-eh:new Date(a,f,d).valueOf()}function ih(a,f,d){return a<100&&a>=0?Date.UTC(a+400,f,d)-eh:Date.UTC(a,f,d)}function Wg(a){var f,d;if(a=at(a),a===void 0||a==="millisecond"||!this.isValid())return this;switch(d=this._isUTC?ih:th,a){case"year":f=d(this.year(),0,1);break;case"quarter":f=d(this.year(),this.month()-this.month()%3,1);break;case"month":f=d(this.year(),this.month(),1);break;case"week":f=d(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":f=d(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":f=d(this.year(),this.month(),this.date());break;case"hour":f=this._d.valueOf(),f-=Hi(f+(this._isUTC?0:this.utcOffset()*Wi),Mn);break;case"minute":f=this._d.valueOf(),f-=Hi(f,Wi);break;case"second":f=this._d.valueOf(),f-=Hi(f,Cn);break}return this._d.setTime(f),i.updateOffset(this,!0),this}function Hg(a){var f,d;if(a=at(a),a===void 0||a==="millisecond"||!this.isValid())return this;switch(d=this._isUTC?ih:th,a){case"year":f=d(this.year()+1,0,1)-1;break;case"quarter":f=d(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":f=d(this.year(),this.month()+1,1)-1;break;case"week":f=d(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":f=d(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":f=d(this.year(),this.month(),this.date()+1)-1;break;case"hour":f=this._d.valueOf(),f+=Mn-Hi(f+(this._isUTC?0:this.utcOffset()*Wi),Mn)-1;break;case"minute":f=this._d.valueOf(),f+=Wi-Hi(f,Wi)-1;break;case"second":f=this._d.valueOf(),f+=Cn-Hi(f,Cn)-1;break}return this._d.setTime(f),i.updateOffset(this,!0),this}function Yg(){return this._d.valueOf()-(this._offset||0)*6e4}function Vg(){return Math.floor(this.valueOf()/1e3)}function zg(){return new Date(this.valueOf())}function $g(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function Ug(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function jg(){return this.isValid()?this.toISOString():null}function qg(){return D(this)}function Gg(){return b({},k(this))}function Kg(){return k(this).overflow}function Qg(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}H("N",0,0,"eraAbbr"),H("NN",0,0,"eraAbbr"),H("NNN",0,0,"eraAbbr"),H("NNNN",0,0,"eraName"),H("NNNNN",0,0,"eraNarrow"),H("y",["y",1],"yo","eraYear"),H("y",["yy",2],0,"eraYear"),H("y",["yyy",3],0,"eraYear"),H("y",["yyyy",4],0,"eraYear"),E("N",bo),E("NN",bo),E("NNN",bo),E("NNNN",l0),E("NNNNN",a0),le(["N","NN","NNN","NNNN","NNNNN"],function(a,f,d,m){var y=d._locale.erasParse(a,m,d._strict);y?k(d).era=y:k(d).invalidEra=a}),E("y",Bi),E("yy",Bi),E("yyy",Bi),E("yyyy",Bi),E("yo",h0),le(["y","yy","yyy","yyyy"],Ie),le(["yo"],function(a,f,d,m){var y;d._locale._eraYearOrdinalRegex&&(y=a.match(d._locale._eraYearOrdinalRegex)),d._locale.eraYearOrdinalParse?f[Ie]=d._locale.eraYearOrdinalParse(a,y):f[Ie]=parseInt(a,10)});function Jg(a,f){var d,m,y,x=this._eras||Vt("en")._eras;for(d=0,m=x.length;d<m;++d){switch(typeof x[d].since){case"string":y=i(x[d].since).startOf("day"),x[d].since=y.valueOf();break}switch(typeof x[d].until){case"undefined":x[d].until=1/0;break;case"string":y=i(x[d].until).startOf("day").valueOf(),x[d].until=y.valueOf();break}}return x}function Xg(a,f,d){var m,y,x=this.eras(),C,B,$;for(a=a.toUpperCase(),m=0,y=x.length;m<y;++m)if(C=x[m].name.toUpperCase(),B=x[m].abbr.toUpperCase(),$=x[m].narrow.toUpperCase(),d)switch(f){case"N":case"NN":case"NNN":if(B===a)return x[m];break;case"NNNN":if(C===a)return x[m];break;case"NNNNN":if($===a)return x[m];break}else if([C,B,$].indexOf(a)>=0)return x[m]}function Zg(a,f){var d=a.since<=a.until?1:-1;return f===void 0?i(a.since).year():i(a.since).year()+(f-a.offset)*d}function e0(){var a,f,d,m=this.localeData().eras();for(a=0,f=m.length;a<f;++a)if(d=this.clone().startOf("day").valueOf(),m[a].since<=d&&d<=m[a].until||m[a].until<=d&&d<=m[a].since)return m[a].name;return""}function t0(){var a,f,d,m=this.localeData().eras();for(a=0,f=m.length;a<f;++a)if(d=this.clone().startOf("day").valueOf(),m[a].since<=d&&d<=m[a].until||m[a].until<=d&&d<=m[a].since)return m[a].narrow;return""}function i0(){var a,f,d,m=this.localeData().eras();for(a=0,f=m.length;a<f;++a)if(d=this.clone().startOf("day").valueOf(),m[a].since<=d&&d<=m[a].until||m[a].until<=d&&d<=m[a].since)return m[a].abbr;return""}function s0(){var a,f,d,m,y=this.localeData().eras();for(a=0,f=y.length;a<f;++a)if(d=y[a].since<=y[a].until?1:-1,m=this.clone().startOf("day").valueOf(),y[a].since<=m&&m<=y[a].until||y[a].until<=m&&m<=y[a].since)return(this.year()-i(y[a].since).year())*d+y[a].offset;return this.year()}function n0(a){return l(this,"_erasNameRegex")||wo.call(this),a?this._erasNameRegex:this._erasRegex}function r0(a){return l(this,"_erasAbbrRegex")||wo.call(this),a?this._erasAbbrRegex:this._erasRegex}function o0(a){return l(this,"_erasNarrowRegex")||wo.call(this),a?this._erasNarrowRegex:this._erasRegex}function bo(a,f){return f.erasAbbrRegex(a)}function l0(a,f){return f.erasNameRegex(a)}function a0(a,f){return f.erasNarrowRegex(a)}function h0(a,f){return f._eraYearOrdinalRegex||Bi}function wo(){var a=[],f=[],d=[],m=[],y,x,C,B,$,ee=this.eras();for(y=0,x=ee.length;y<x;++y)C=Ft(ee[y].name),B=Ft(ee[y].abbr),$=Ft(ee[y].narrow),f.push(C),a.push(B),d.push($),m.push(C),m.push(B),m.push($);this._erasRegex=new RegExp("^("+m.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+f.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+d.join("|")+")","i")}H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100});function On(a,f){H(0,[a,a.length],0,f)}On("gggg","weekYear"),On("ggggg","weekYear"),On("GGGG","isoWeekYear"),On("GGGGG","isoWeekYear"),E("G",pn),E("g",pn),E("GG",fe,tt),E("gg",fe,tt),E("GGGG",to,eo),E("gggg",to,eo),E("GGGGG",dn,fn),E("ggggg",dn,fn),ms(["gggg","ggggg","GGGG","GGGGG"],function(a,f,d,m){f[m.substr(0,2)]=X(a)}),ms(["gg","GG"],function(a,f,d,m){f[m]=i.parseTwoDigitYear(a)});function c0(a){return sh.call(this,a,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function f0(a){return sh.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function u0(){return Yt(this.year(),1,4)}function d0(){return Yt(this.isoWeekYear(),1,4)}function p0(){var a=this.localeData()._week;return Yt(this.year(),a.dow,a.doy)}function m0(){var a=this.localeData()._week;return Yt(this.weekYear(),a.dow,a.doy)}function sh(a,f,d,m,y){var x;return a==null?ws(this,m,y).year:(x=Yt(a,m,y),f>x&&(f=x),g0.call(this,a,f,d,m,y))}function g0(a,f,d,m,y){var x=Na(a,f,d,m,y),C=bs(x.year,0,x.dayOfYear);return this.year(C.getUTCFullYear()),this.month(C.getUTCMonth()),this.date(C.getUTCDate()),this}H("Q",0,"Qo","quarter"),E("Q",Sa),le("Q",function(a,f){f[Wt]=(X(a)-1)*3});function y0(a){return a==null?Math.ceil((this.month()+1)/3):this.month((a-1)*3+this.month()%3)}H("D",["DD",2],"Do","date"),E("D",fe,Ei),E("DD",fe,tt),E("Do",function(a,f){return a?f._dayOfMonthOrdinalParse||f._ordinalParse:f._dayOfMonthOrdinalParseLenient}),le(["D","DD"],St),le("Do",function(a,f){f[St]=X(a.match(fe)[0])});var nh=Ii("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear"),E("DDD",un),E("DDDD",Ca),le(["DDD","DDDD"],function(a,f,d){d._dayOfYear=X(a)});function b0(a){var f=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return a==null?f:this.add(a-f,"d")}H("m",["mm",2],0,"minute"),E("m",fe,io),E("mm",fe,tt),le(["m","mm"],yt);var w0=Ii("Minutes",!1);H("s",["ss",2],0,"second"),E("s",fe,io),E("ss",fe,tt),le(["s","ss"],Ht);var k0=Ii("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return this.millisecond()*10}),H(0,["SSSSS",5],0,function(){return this.millisecond()*100}),H(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),H(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),H(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),H(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),E("S",un,Sa),E("SS",un,tt),E("SSS",un,Ca);var ti,rh;for(ti="SSSS";ti.length<=9;ti+="S")E(ti,Bi);function x0(a,f){f[xi]=X(("0."+a)*1e3)}for(ti="S";ti.length<=9;ti+="S")le(ti,x0);rh=Ii("Milliseconds",!1),H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");function v0(){return this._isUTC?"UTC":""}function S0(){return this._isUTC?"Coordinated Universal Time":""}var T=P.prototype;T.add=mg,T.calendar=vg,T.clone=Sg,T.diff=_g,T.endOf=Hg,T.format=Ng,T.from=Bg,T.fromNow=Eg,T.to=Ig,T.toNow=Fg,T.get=Lp,T.invalidAt=Kg,T.isAfter=Cg,T.isBefore=Mg,T.isBetween=Og,T.isSame=Dg,T.isSameOrAfter=Ag,T.isSameOrBefore=Tg,T.isValid=qg,T.lang=Xa,T.locale=Ja,T.localeData=Za,T.max=qm,T.min=jm,T.parsingFlags=Gg,T.set=Np,T.startOf=Wg,T.subtract=gg,T.toArray=$g,T.toObject=Ug,T.toDate=zg,T.toISOString=Rg,T.inspect=Lg,typeof Symbol<"u"&&Symbol.for!=null&&(T[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),T.toJSON=jg,T.toString=Pg,T.unix=Vg,T.valueOf=Yg,T.creationData=Qg,T.eraName=e0,T.eraNarrow=t0,T.eraAbbr=i0,T.eraYear=s0,T.year=Da,T.isLeapYear=Rp,T.weekYear=c0,T.isoWeekYear=f0,T.quarter=T.quarters=y0,T.month=Ra,T.daysInMonth=zp,T.week=T.weeks=Jp,T.isoWeek=T.isoWeeks=Xp,T.weeksInYear=p0,T.weeksInWeekYear=m0,T.isoWeeksInYear=u0,T.isoWeeksInISOWeekYear=d0,T.date=nh,T.day=T.days=fm,T.weekday=um,T.isoWeekday=dm,T.dayOfYear=b0,T.hour=T.hours=km,T.minute=T.minutes=w0,T.second=T.seconds=k0,T.millisecond=T.milliseconds=rh,T.utcOffset=ig,T.utc=ng,T.local=rg,T.parseZone=og,T.hasAlignedHourOffset=lg,T.isDST=ag,T.isLocal=cg,T.isUtcOffset=fg,T.isUtc=ja,T.isUTC=ja,T.zoneAbbr=v0,T.zoneName=S0,T.dates=z("dates accessor is deprecated. Use date instead.",nh),T.months=z("months accessor is deprecated. Use month instead",Ra),T.years=z("years accessor is deprecated. Use year instead",Da),T.zone=z("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",sg),T.isDSTShifted=z("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",hg);function C0(a){return ue(a*1e3)}function M0(){return ue.apply(null,arguments).parseZone()}function oh(a){return a}var ne=De.prototype;ne.calendar=Qe,ne.longDateFormat=pp,ne.invalidDate=gp,ne.ordinal=wp,ne.preparse=oh,ne.postformat=oh,ne.relativeTime=xp,ne.pastFuture=vp,ne.set=ie,ne.eras=Jg,ne.erasParse=Xg,ne.erasConvertYear=Zg,ne.erasAbbrRegex=r0,ne.erasNameRegex=n0,ne.erasNarrowRegex=o0,ne.months=Wp,ne.monthsShort=Hp,ne.monthsParse=Vp,ne.monthsRegex=Up,ne.monthsShortRegex=$p,ne.week=qp,ne.firstDayOfYear=Qp,ne.firstDayOfWeek=Kp,ne.weekdays=om,ne.weekdaysMin=am,ne.weekdaysShort=lm,ne.weekdaysParse=cm,ne.weekdaysRegex=pm,ne.weekdaysShortRegex=mm,ne.weekdaysMinRegex=gm,ne.isPM=bm,ne.meridiem=xm;function Dn(a,f,d,m){var y=Vt(),x=w().set(m,f);return y[d](x,a)}function lh(a,f,d){if(u(a)&&(f=a,a=void 0),a=a||"",f!=null)return Dn(a,f,d,"month");var m,y=[];for(m=0;m<12;m++)y[m]=Dn(a,m,d,"month");return y}function ko(a,f,d,m){typeof a=="boolean"?(u(f)&&(d=f,f=void 0),f=f||""):(f=a,d=f,a=!1,u(f)&&(d=f,f=void 0),f=f||"");var y=Vt(),x=a?y._week.dow:0,C,B=[];if(d!=null)return Dn(f,(d+x)%7,m,"day");for(C=0;C<7;C++)B[C]=Dn(f,(C+x)%7,m,"day");return B}function O0(a,f){return lh(a,f,"months")}function D0(a,f){return lh(a,f,"monthsShort")}function A0(a,f,d){return ko(a,f,d,"weekdays")}function T0(a,f,d){return ko(a,f,d,"weekdaysShort")}function _0(a,f,d){return ko(a,f,d,"weekdaysMin")}ei("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var f=a%10,d=X(a%100/10)===1?"th":f===1?"st":f===2?"nd":f===3?"rd":"th";return a+d}}),i.lang=z("moment.lang is deprecated. Use moment.locale instead.",ei),i.langData=z("moment.langData is deprecated. Use moment.localeData instead.",Vt);var zt=Math.abs;function P0(){var a=this._data;return this._milliseconds=zt(this._milliseconds),this._days=zt(this._days),this._months=zt(this._months),a.milliseconds=zt(a.milliseconds),a.seconds=zt(a.seconds),a.minutes=zt(a.minutes),a.hours=zt(a.hours),a.months=zt(a.months),a.years=zt(a.years),this}function ah(a,f,d,m){var y=bt(f,d);return a._milliseconds+=m*y._milliseconds,a._days+=m*y._days,a._months+=m*y._months,a._bubble()}function R0(a,f){return ah(this,a,f,1)}function L0(a,f){return ah(this,a,f,-1)}function hh(a){return a<0?Math.floor(a):Math.ceil(a)}function N0(){var a=this._milliseconds,f=this._days,d=this._months,m=this._data,y,x,C,B,$;return a>=0&&f>=0&&d>=0||a<=0&&f<=0&&d<=0||(a+=hh(xo(d)+f)*864e5,f=0,d=0),m.milliseconds=a%1e3,y=ht(a/1e3),m.seconds=y%60,x=ht(y/60),m.minutes=x%60,C=ht(x/60),m.hours=C%24,f+=ht(C/24),$=ht(ch(f)),d+=$,f-=hh(xo($)),B=ht(d/12),d%=12,m.days=f,m.months=d,m.years=B,this}function ch(a){return a*4800/146097}function xo(a){return a*146097/4800}function B0(a){if(!this.isValid())return NaN;var f,d,m=this._milliseconds;if(a=at(a),a==="month"||a==="quarter"||a==="year")switch(f=this._days+m/864e5,d=this._months+ch(f),a){case"month":return d;case"quarter":return d/3;case"year":return d/12}else switch(f=this._days+Math.round(xo(this._months)),a){case"week":return f/7+m/6048e5;case"day":return f+m/864e5;case"hour":return f*24+m/36e5;case"minute":return f*1440+m/6e4;case"second":return f*86400+m/1e3;case"millisecond":return Math.floor(f*864e5)+m;default:throw new Error("Unknown unit "+a)}}function $t(a){return function(){return this.as(a)}}var fh=$t("ms"),E0=$t("s"),I0=$t("m"),F0=$t("h"),W0=$t("d"),H0=$t("w"),Y0=$t("M"),V0=$t("Q"),z0=$t("y"),$0=fh;function U0(){return bt(this)}function j0(a){return a=at(a),this.isValid()?this[a+"s"]():NaN}function Si(a){return function(){return this.isValid()?this._data[a]:NaN}}var q0=Si("milliseconds"),G0=Si("seconds"),K0=Si("minutes"),Q0=Si("hours"),J0=Si("days"),X0=Si("months"),Z0=Si("years");function ey(){return ht(this.days()/7)}var Ut=Math.round,Yi={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ty(a,f,d,m,y){return y.relativeTime(f||1,!!d,a,m)}function iy(a,f,d,m){var y=bt(a).abs(),x=Ut(y.as("s")),C=Ut(y.as("m")),B=Ut(y.as("h")),$=Ut(y.as("d")),ee=Ut(y.as("M")),$e=Ut(y.as("w")),jt=Ut(y.as("y")),ii=x<=d.ss&&["s",x]||x<d.s&&["ss",x]||C<=1&&["m"]||C<d.m&&["mm",C]||B<=1&&["h"]||B<d.h&&["hh",B]||$<=1&&["d"]||$<d.d&&["dd",$];return d.w!=null&&(ii=ii||$e<=1&&["w"]||$e<d.w&&["ww",$e]),ii=ii||ee<=1&&["M"]||ee<d.M&&["MM",ee]||jt<=1&&["y"]||["yy",jt],ii[2]=f,ii[3]=+a>0,ii[4]=m,ty.apply(null,ii)}function sy(a){return a===void 0?Ut:typeof a=="function"?(Ut=a,!0):!1}function ny(a,f){return Yi[a]===void 0?!1:f===void 0?Yi[a]:(Yi[a]=f,a==="s"&&(Yi.ss=f-1),!0)}function ry(a,f){if(!this.isValid())return this.localeData().invalidDate();var d=!1,m=Yi,y,x;return typeof a=="object"&&(f=a,a=!1),typeof a=="boolean"&&(d=a),typeof f=="object"&&(m=Object.assign({},Yi,f),f.s!=null&&f.ss==null&&(m.ss=f.s-1)),y=this.localeData(),x=iy(this,!d,m,y),d&&(x=y.pastFuture(+this,x)),y.postformat(x)}var vo=Math.abs;function Vi(a){return(a>0)-(a<0)||+a}function An(){if(!this.isValid())return this.localeData().invalidDate();var a=vo(this._milliseconds)/1e3,f=vo(this._days),d=vo(this._months),m,y,x,C,B=this.asSeconds(),$,ee,$e,jt;return B?(m=ht(a/60),y=ht(m/60),a%=60,m%=60,x=ht(d/12),d%=12,C=a?a.toFixed(3).replace(/\.?0+$/,""):"",$=B<0?"-":"",ee=Vi(this._months)!==Vi(B)?"-":"",$e=Vi(this._days)!==Vi(B)?"-":"",jt=Vi(this._milliseconds)!==Vi(B)?"-":"",$+"P"+(x?ee+x+"Y":"")+(d?ee+d+"M":"")+(f?$e+f+"D":"")+(y||m||a?"T":"")+(y?jt+y+"H":"")+(m?jt+m+"M":"")+(a?jt+C+"S":"")):"P0D"}var te=xn.prototype;te.isValid=Xm,te.abs=P0,te.add=R0,te.subtract=L0,te.as=B0,te.asMilliseconds=fh,te.asSeconds=E0,te.asMinutes=I0,te.asHours=F0,te.asDays=W0,te.asWeeks=H0,te.asMonths=Y0,te.asQuarters=V0,te.asYears=z0,te.valueOf=$0,te._bubble=N0,te.clone=U0,te.get=j0,te.milliseconds=q0,te.seconds=G0,te.minutes=K0,te.hours=Q0,te.days=J0,te.weeks=ey,te.months=X0,te.years=Z0,te.humanize=ry,te.toISOString=An,te.toString=An,te.toJSON=An,te.locale=Ja,te.localeData=Za,te.toIsoString=z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",An),te.lang=Xa,H("X",0,0,"unix"),H("x",0,0,"valueOf"),E("x",pn),E("X",Op),le("X",function(a,f,d){d._d=new Date(parseFloat(a)*1e3)}),le("x",function(a,f,d){d._d=new Date(X(a))});//! moment.js
return i.version="2.30.1",n(ue),i.fn=T,i.min=Gm,i.max=Km,i.now=Qm,i.utc=w,i.unix=C0,i.months=O0,i.isDate=p,i.locale=ei,i.invalid=R,i.duration=bt,i.isMoment=Y,i.weekdays=A0,i.parseZone=M0,i.localeData=Vt,i.isDuration=vn,i.monthsShort=D0,i.weekdaysMin=_0,i.defineLocale=ao,i.updateLocale=Mm,i.locales=Om,i.weekdaysShort=T0,i.normalizeUnits=at,i.relativeTimeRounding=sy,i.relativeTimeThreshold=ny,i.calendarFormat=xg,i.prototype=T,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i})})(nd);var tx=nd.exports;const ix=Zk(tx),sx={class:"w-full text-sm text-left text-gray-600 dark:text-gray-400"},nx=J("thead",{class:"text-xs text-white uppercase bg-gray-500 dark:bg-gray-700 dark:text-gray-400"},[J("tr",null,[J("th",{scope:"col",class:"px-6 py-3"}," Hash "),J("th",{scope:"col",class:"px-6 py-3"}," Filename "),J("th",{scope:"col",class:"px-6 py-3"}," Date Uploaded "),J("th",{scope:"col",class:"px-6 py-3"}," Status "),J("th",{scope:"col",class:"px-6 py-3"}," Action ")])],-1),rx={class:"px-4 py-2"},ox={class:"px-4 py-2"},lx={class:"px-4 py-2"},ax={class:"px-4 py-2 space-x-5"},hx=J("span",null,"Verified",-1),cx={class:"px-4 py-2 space-x-5"},fx=["onClick"],ux=["onClick"],dx={__name:"transaction-table",props:{transactionData:Object},setup(s){function e(t){return ix(t).format("MMMM Do YYYY, h:mm:ss a")}return(t,i)=>{const n=Ul("font-awesome-icon");return Me(),qe("div",null,[J("table",sx,[nx,J("tbody",null,[(Me(!0),qe(oy,null,ly(s.transactionData,(r,o)=>(Me(),qe("tr",{class:"bg-gray-200 border-b dark:bg-gray-800 dark:border-gray-700",key:o},[J("td",rx,Qi(r.Hash),1),J("td",ox,Qi(r.FileName),1),J("td",lx,Qi(e(r.DateUploaded)),1),J("td",ax,[hx,Rt(n,{icon:["fas","fa-check-circle"],class:"text-yellow-500"})]),J("td",cx,[J("a",{onClick:l=>t.$emit("showData",{transaction_title:r.FileName,transaction_description:r.Details}),class:"font-medium text-black dark:text-blue-500 hover:underline hover:cursor-pointer hover:text-yellow-600 border-solid border-2 px-2 py-1"},[Rt(n,{icon:["fas","eye"]})],8,fx),J("a",{onClick:ay(l=>t.data.download(r.s3FileName,r.FileName),["prevent"]),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline hover:cursor-pointer hover:text-yellow-600"},[Rt(n,{icon:["fas","download"],class:"text-black"})],8,ux)])]))),128))])])])}}},px={},mx=J("div",{class:"flex items-center justify-center w-full h-56 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-800 dark:border-gray-700"},[J("div",{class:"px-3 py-1 text-xs font-medium leading-none text-center text-blue-800 bg-blue-200 rounded-full animate-pulse dark:bg-blue-900 dark:text-blue-200"}," loading...")],-1),gx=[mx];function yx(s,e){return Me(),qe("div",null,gx)}const bx=jl(px,[["render",yx]]),wx={data(){return{syncStatus:!0,lastSyncDateTime:new Date().toLocaleString()}},methods:{triggerSync(){setTimeout(()=>{this.syncStatus=Math.random()<.5,this.lastSyncDateTime=new Date().toLocaleString()},1500)}},computed:{tooltipText(){return this.lastSyncDateTime?`Last synced on ${this.lastSyncDateTime}`:`Last synced on ${this.lastSyncDateTime}`}}},rd=s=>(cf("data-v-dd2ccf6c"),s=s(),ff(),s),kx={class:"status-container"},xx={class:"sync-section"},vx=rd(()=>J("span",{class:"icon-information"},"ⓘ",-1)),Sx=rd(()=>J("span",{class:"description-text"},"QLDB-S3 Sync Status: ",-1)),Cx={key:0,class:"icon"},Mx={key:1,class:"icon"},Ox=["title"],Dx={class:"text-background"};function Ax(s,e,t,i,n,r){const o=Ul("font-awesome-icon");return Me(),qe("div",kx,[J("div",xx,[vx,Sx,n.syncStatus?(Me(),qe("span",Cx,[Rt(o,{class:"text-green-600",icon:["fas","circle-check"]})])):(Me(),qe("span",Mx," ⚠ ")),J("p",{class:ur(["status-message",{"status-error":!n.syncStatus,"status-success":n.syncStatus}]),title:r.tooltipText},[J("span",Dx,Qi(n.syncStatus?"SYNCED":"NOT SYNCED"),1)],10,Ox)])])}const Tx=jl(wx,[["render",Ax],["__scopeId","data-v-dd2ccf6c"]]),_x={data(){return{fileWatcherConnected:!1,lastCheckDateTime:new Date().toLocaleString()}},methods:{checkConnection(){setTimeout(()=>{this.fileWatcherConnected=Math.random()<.5,this.lastCheckDateTime=new Date().toLocaleString()},1500)}},computed:{tooltipText(){return this.lastCheckDateTime?`Last connection check on ${this.lastCheckDateTime}`:`Last connection check on ${this.lastCheckDateTime}`}}},od=s=>(cf("data-v-ced586a8"),s=s(),ff(),s),Px={class:"file-watcher-container"},Rx={class:"watcher-section"},Lx=od(()=>J("span",{class:"icon-information"},"ⓘ",-1)),Nx=od(()=>J("span",{class:"description-text"},"AFUMS Connection Status: ",-1)),Bx=["title"],Ex={class:"text-background"};function Ix(s,e,t,i,n,r){return Me(),qe("div",Px,[J("div",Rx,[Lx,Nx,J("span",{class:ur(["icon",{"icon-solid":n.fileWatcherConnected,"icon-hollow":!n.fileWatcherConnected}])},null,2),J("p",{class:ur(["status-message",{"status-error":!n.fileWatcherConnected,"status-success":n.fileWatcherConnected}]),title:r.tooltipText},[J("span",Ex,Qi(n.fileWatcherConnected?"CONNECTED":"DISCONNECTED"),1)],10,Bx)])])}const Fx=jl(_x,[["render",Ix],["__scopeId","data-v-ced586a8"]]),Wx=s=>{let{state:e}=s,t=e.doc.lineAt(e.selection.main.from),i=da(s.state,t.from);return i.line?Hx(s):i.block?Vx(s):!1};function ua(s,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=s(e,t);return n?(i(t.update(n)),!0):!1}}const Hx=ua(Ux,0),Yx=ua(ld,0),Vx=ua((s,e)=>ld(s,e,$x(e)),0);function da(s,e){let t=s.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const As=50;function zx(s,{open:e,close:t},i,n){let r=s.sliceDoc(i-As,i),o=s.sliceDoc(n,n+As),l=/\s*$/.exec(r)[0].length,h=/^\s*/.exec(o)[0].length,c=r.length-l;if(r.slice(c-e.length,c)==e&&o.slice(h,h+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:n+h,margin:h&&1}};let u,p;n-i<=2*As?u=p=s.sliceDoc(i,n):(u=s.sliceDoc(i,i+As),p=s.sliceDoc(n-As,n));let g=/^\s*/.exec(u)[0].length,b=/\s*$/.exec(p)[0].length,w=p.length-b-t.length;return u.slice(g,g+e.length)==e&&p.slice(w,w+t.length)==t?{open:{pos:i+g+e.length,margin:/\s/.test(u.charAt(g+e.length))?1:0},close:{pos:n-b-t.length,margin:/\s/.test(p.charAt(w-1))?1:0}}:null}function $x(s){let e=[];for(let t of s.selection.ranges){let i=s.doc.lineAt(t.from),n=t.to<=i.to?i:s.doc.lineAt(t.to),r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function ld(s,e,t=e.selection.ranges){let i=t.map(r=>da(e,r.from).block);if(!i.every(r=>r))return null;let n=t.map((r,o)=>zx(e,i[o],r.from,r.to));if(s!=2&&!n.every(r=>r))return{changes:e.changes(t.map((r,o)=>n[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(s!=1&&n.some(r=>r)){let r=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let h=i[o],{open:c,close:u}=l;r.push({from:c.pos-h.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+h.close.length})}return{changes:r}}return null}function Ux(s,e,t=e.selection.ranges){let i=[],n=-1;for(let{from:r,to:o}of t){let l=i.length,h=1e9,c=da(e,r).line;if(c){for(let u=r;u<=o;){let p=e.doc.lineAt(u);if(p.from>n&&(r==o||o>p.from)){n=p.from;let g=/^\s*/.exec(p.text)[0].length,b=g==p.length,w=p.text.slice(g,g+c.length)==c?g:-1;g<p.text.length&&g<h&&(h=g),i.push({line:p,comment:w,token:c,indent:g,empty:b,single:!1})}u=p.to+1}if(h<1e9)for(let u=l;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=h);i.length==l+1&&(i[l].single=!0)}}if(s!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:h,indent:c,empty:u,single:p}of i)(p||!u)&&r.push({from:l.from+c,insert:h+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(s!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:h}of i)if(l>=0){let c=o.from+l,u=c+h.length;o.text[u-o.from]==" "&&u++,r.push({from:c,to:u})}return{changes:r}}return null}const Fl=Xt.define(),jx=Xt.define(),qx=F.define(),ad=F.define({combine(s){return Et(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,n)=>e(i,n)||t(i,n)})}}),hd=Be.define({create(){return Nt.empty},update(s,e){let t=e.state.facet(ad),i=e.annotation(Fl);if(i){let h=Xe.fromTransaction(e,i.selection),c=i.side,u=c==0?s.undone:s.done;return h?u=_r(u,u.length,t.minDepth,h):u=ud(u,e.startState.selection),new Nt(c==0?i.rest:u,c==0?u:i.rest)}let n=e.annotation(jx);if((n=="full"||n=="before")&&(s=s.isolate()),e.annotation(Oe.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let r=Xe.fromTransaction(e),o=e.annotation(Oe.time),l=e.annotation(Oe.userEvent);return r?s=s.addChanges(r,o,l,t,e):e.selection&&(s=s.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(n=="full"||n=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new Nt(s.done.map(Xe.fromJSON),s.undone.map(Xe.fromJSON))}});function Gx(s={}){return[hd,ad.of(s),I.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?cd:e.inputType=="historyRedo"?Wl:null;return i?(e.preventDefault(),i(t)):!1}})]}function qr(s,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let n=t.field(hd,!1);if(!n)return!1;let r=n.pop(s,t,e);return r?(i(r),!0):!1}}const cd=qr(0,!1),Wl=qr(1,!1),Kx=qr(0,!0),Qx=qr(1,!0);class Xe{constructor(e,t,i,n,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new Xe(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new Xe(e.changes&&Ce.fromJSON(e.changes),[],e.mapped&&Bt.fromJSON(e.mapped),e.startSelection&&O.fromJSON(e.startSelection),e.selectionsAfter.map(O.fromJSON))}static fromTransaction(e,t){let i=ft;for(let n of e.startState.facet(qx)){let r=n(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new Xe(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,ft)}static selection(e){return new Xe(void 0,ft,void 0,void 0,e)}}function _r(s,e,t,i){let n=e+1>t+20?e-t-1:0,r=s.slice(n,e);return r.push(i),r}function Jx(s,e){let t=[],i=!1;return s.iterChangedRanges((n,r)=>t.push(n,r)),e.iterChangedRanges((n,r,o,l)=>{for(let h=0;h<t.length;){let c=t[h++],u=t[h++];l>=c&&o<=u&&(i=!0)}}),i}function Xx(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function fd(s,e){return s.length?e.length?s.concat(e):s:e}const ft=[],Zx=200;function ud(s,e){if(s.length){let t=s[s.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Zx));return i.length&&i[i.length-1].eq(e)?s:(i.push(e),_r(s,s.length-1,1e9,t.setSelAfter(i)))}else return[Xe.selection([e])]}function ev(s){let e=s[s.length-1],t=s.slice();return t[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Uo(s,e){if(!s.length)return s;let t=s.length,i=ft;for(;t;){let n=tv(s[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let r=s.slice(0,t);return r[t-1]=n,r}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[Xe.selection(i)]:ft}function tv(s,e,t){let i=fd(s.selectionsAfter.length?s.selectionsAfter.map(l=>l.map(e)):ft,t);if(!s.changes)return Xe.selection(i);let n=s.changes.map(e),r=e.mapDesc(s.changes,!0),o=s.mapped?s.mapped.composeDesc(r):r;return new Xe(n,q.mapEffects(s.effects,e),o,s.startSelection.map(r),i)}const iv=/^(input\.type|delete)($|\.)/;class Nt{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new Nt(this.done,this.undone):this}addChanges(e,t,i,n,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||iv.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<n.newGroupDelay&&n.joinToEvent(r,Jx(l.changes,e.changes))||i=="input.type.compose")?o=_r(o,o.length-1,n.minDepth,new Xe(e.changes.compose(l.changes),fd(e.effects,l.effects),l.mapped,l.startSelection,ft)):o=_r(o,o.length,n.minDepth,e),new Nt(o,ft,t,i)}addSelection(e,t,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:ft;return r.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Xx(r[r.length-1],e)?this:new Nt(ud(this.done,e),this.undone,t,i)}addMapping(e){return new Nt(Uo(this.done,e),Uo(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let r=n[n.length-1],o=r.selectionsAfter[0]||t.selection;if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:Fl.of({side:e,rest:ev(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=n.length==1?ft:n.slice(0,n.length-1);return r.mapped&&(l=Uo(l,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:Fl.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Nt.empty=new Nt(ft,ft);const sv=[{key:"Mod-z",run:cd,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Wl,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Wl,preventDefault:!0},{key:"Mod-u",run:Kx,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Qx,preventDefault:!0}];function us(s,e){return O.create(s.ranges.map(e),s.mainIndex)}function It(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function vt({state:s,dispatch:e},t){let i=us(s.selection,t);return i.eq(s.selection,!0)?!1:(e(It(s,i)),!0)}function Gr(s,e){return O.cursor(e?s.to:s.from)}function dd(s,e){return vt(s,t=>t.empty?s.moveByChar(t,e):Gr(t,e))}function Ye(s){return s.textDirectionAt(s.state.selection.main.head)==me.LTR}const pd=s=>dd(s,!Ye(s)),md=s=>dd(s,Ye(s));function gd(s,e){return vt(s,t=>t.empty?s.moveByGroup(t,e):Gr(t,e))}const nv=s=>gd(s,!Ye(s)),rv=s=>gd(s,Ye(s));function ov(s,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function Kr(s,e,t){let i=He(s).resolveInner(e.head),n=t?Q.closedBy:Q.openedBy;for(let h=e.head;;){let c=t?i.childAfter(h):i.childBefore(h);if(!c)break;ov(s,c,n)?i=c:h=t?c.to:c.from}let r=i.type.prop(n),o,l;return r&&(o=t?Lt(s,i.from,1):Lt(s,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,O.cursor(l,t?-1:1)}const lv=s=>vt(s,e=>Kr(s.state,e,!Ye(s))),av=s=>vt(s,e=>Kr(s.state,e,Ye(s)));function yd(s,e){return vt(s,t=>{if(!t.empty)return Gr(t,e);let i=s.moveVertically(t,e);return i.head!=t.head?i:s.moveToLineBoundary(t,e)})}const bd=s=>yd(s,!1),wd=s=>yd(s,!0);function kd(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,t=0,i=0,n;if(e){for(let r of s.state.facet(I.scrollMargins)){let o=r(s);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}n=s.scrollDOM.clientHeight-t-i}else n=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(s.defaultLineHeight,n-5)}}function xd(s,e){let t=kd(s),{state:i}=s,n=us(i.selection,o=>o.empty?s.moveVertically(o,e,t.height):Gr(o,e));if(n.eq(i.selection))return!1;let r;if(t.selfScroll){let o=s.coordsAtPos(i.selection.main.head),l=s.scrollDOM.getBoundingClientRect(),h=l.top+t.marginTop,c=l.bottom-t.marginBottom;o&&o.top>h&&o.bottom<c&&(r=I.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-h}))}return s.dispatch(It(i,n),{effects:r}),!0}const Yc=s=>xd(s,!1),Hl=s=>xd(s,!0);function ki(s,e,t){let i=s.lineBlockAt(e.head),n=s.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=s.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let r=/^\s*/.exec(s.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(n=O.cursor(i.from+r))}return n}const hv=s=>vt(s,e=>ki(s,e,!0)),cv=s=>vt(s,e=>ki(s,e,!1)),fv=s=>vt(s,e=>ki(s,e,!Ye(s))),uv=s=>vt(s,e=>ki(s,e,Ye(s))),dv=s=>vt(s,e=>O.cursor(s.lineBlockAt(e.head).from,1)),pv=s=>vt(s,e=>O.cursor(s.lineBlockAt(e.head).to,-1));function mv(s,e,t){let i=!1,n=us(s.selection,r=>{let o=Lt(s,r.head,-1)||Lt(s,r.head,1)||r.head>0&&Lt(s,r.head-1,1)||r.head<s.doc.length&&Lt(s,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return t?O.range(r.anchor,l):O.cursor(l)});return i?(e(It(s,n)),!0):!1}const gv=({state:s,dispatch:e})=>mv(s,e,!1);function mt(s,e){let t=us(s.state.selection,i=>{let n=e(i);return O.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return t.eq(s.state.selection)?!1:(s.dispatch(It(s.state,t)),!0)}function vd(s,e){return mt(s,t=>s.moveByChar(t,e))}const Sd=s=>vd(s,!Ye(s)),Cd=s=>vd(s,Ye(s));function Md(s,e){return mt(s,t=>s.moveByGroup(t,e))}const yv=s=>Md(s,!Ye(s)),bv=s=>Md(s,Ye(s)),wv=s=>mt(s,e=>Kr(s.state,e,!Ye(s))),kv=s=>mt(s,e=>Kr(s.state,e,Ye(s)));function Od(s,e){return mt(s,t=>s.moveVertically(t,e))}const Dd=s=>Od(s,!1),Ad=s=>Od(s,!0);function Td(s,e){return mt(s,t=>s.moveVertically(t,e,kd(s).height))}const Vc=s=>Td(s,!1),zc=s=>Td(s,!0),xv=s=>mt(s,e=>ki(s,e,!0)),vv=s=>mt(s,e=>ki(s,e,!1)),Sv=s=>mt(s,e=>ki(s,e,!Ye(s))),Cv=s=>mt(s,e=>ki(s,e,Ye(s))),Mv=s=>mt(s,e=>O.cursor(s.lineBlockAt(e.head).from)),Ov=s=>mt(s,e=>O.cursor(s.lineBlockAt(e.head).to)),$c=({state:s,dispatch:e})=>(e(It(s,{anchor:0})),!0),Uc=({state:s,dispatch:e})=>(e(It(s,{anchor:s.doc.length})),!0),jc=({state:s,dispatch:e})=>(e(It(s,{anchor:s.selection.main.anchor,head:0})),!0),qc=({state:s,dispatch:e})=>(e(It(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),Dv=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),Av=({state:s,dispatch:e})=>{let t=Qr(s).map(({from:i,to:n})=>O.range(i,Math.min(n+1,s.doc.length)));return e(s.update({selection:O.create(t),userEvent:"select"})),!0},Tv=({state:s,dispatch:e})=>{let t=us(s.selection,i=>{var n;let r=He(s).resolveStack(i.from,1);for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&(!((n=l.parent)===null||n===void 0)&&n.parent))return O.range(l.to,l.from)}return i});return e(It(s,t)),!0},_v=({state:s,dispatch:e})=>{let t=s.selection,i=null;return t.ranges.length>1?i=O.create([t.main]):t.main.empty||(i=O.create([O.cursor(t.main.head)])),i?(e(It(s,i)),!0):!1};function ln(s,e){if(s.state.readOnly)return!1;let t="delete.selection",{state:i}=s,n=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let h=e(r);h<o?(t="delete.backward",h=qn(s,h,!1)):h>o&&(t="delete.forward",h=qn(s,h,!0)),o=Math.min(o,h),l=Math.max(l,h)}else o=qn(s,o,!1),l=qn(s,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:O.cursor(o,o<r.head?-1:1)}});return n.changes.empty?!1:(s.dispatch(i.update(n,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?I.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function qn(s,e,t){if(s instanceof I)for(let i of s.state.facet(I.atomicRanges).map(n=>n(s)))i.between(e,e,(n,r)=>{n<e&&r>e&&(e=t?r:n)});return e}const _d=(s,e)=>ln(s,t=>{let i=t.from,{state:n}=s,r=n.doc.lineAt(i),o,l;if(!e&&i>r.from&&i<r.from+200&&!/[^ \t]/.test(o=r.text.slice(0,i-r.from))){if(o[o.length-1]=="	")return i-1;let h=fs(o,n.tabSize),c=h%Dr(n)||Dr(n);for(let u=0;u<c&&o[o.length-1-u]==" ";u++)i--;l=i}else l=Ne(r.text,i-r.from,e,e)+r.from,l==i&&r.number!=(e?n.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(r.text.slice(l-r.from,i-r.from))&&(l=Ne(r.text,l-r.from,!1,!1)+r.from);return l}),Yl=s=>_d(s,!1),Pd=s=>_d(s,!0),Rd=(s,e)=>ln(s,t=>{let i=t.head,{state:n}=s,r=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==t.head&&r.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let h=Ne(r.text,i-r.from,e)+r.from,c=r.text.slice(Math.min(i,h)-r.from,Math.max(i,h)-r.from),u=o(c);if(l!=null&&u!=l)break;(c!=" "||i!=t.head)&&(l=u),i=h}return i}),Ld=s=>Rd(s,!1),Pv=s=>Rd(s,!0),Rv=s=>ln(s,e=>{let t=s.lineBlockAt(e.head).to;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),Lv=s=>ln(s,e=>{let t=s.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),Nv=s=>ln(s,e=>{let t=s.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),Bv=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:re.of(["",""])},range:O.cursor(i.from)}));return e(s.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},Ev=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(i=>{if(!i.empty||i.from==0||i.from==s.doc.length)return{range:i};let n=i.from,r=s.doc.lineAt(n),o=n==r.from?n-1:Ne(r.text,n-r.from,!1)+r.from,l=n==r.to?n+1:Ne(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:s.doc.slice(n,l).append(s.doc.slice(o,n))},range:O.cursor(l)}});return t.changes.empty?!1:(e(s.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Qr(s){let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.from),r=s.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=s.doc.lineAt(i.to-1)),t>=n.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:n.from,to:r.to,ranges:[i]});t=r.number+1}return e}function Nd(s,e,t){if(s.readOnly)return!1;let i=[],n=[];for(let r of Qr(s)){if(t?r.to==s.doc.length:r.from==0)continue;let o=s.doc.lineAt(t?r.to+1:r.from-1),l=o.length+1;if(t){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+s.lineBreak});for(let h of r.ranges)n.push(O.range(Math.min(s.doc.length,h.anchor+l),Math.min(s.doc.length,h.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:s.lineBreak+o.text});for(let h of r.ranges)n.push(O.range(h.anchor-l,h.head-l))}}return i.length?(e(s.update({changes:i,scrollIntoView:!0,selection:O.create(n,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Iv=({state:s,dispatch:e})=>Nd(s,e,!1),Fv=({state:s,dispatch:e})=>Nd(s,e,!0);function Bd(s,e,t){if(s.readOnly)return!1;let i=[];for(let n of Qr(s))t?i.push({from:n.from,insert:s.doc.slice(n.from,n.to)+s.lineBreak}):i.push({from:n.to,insert:s.lineBreak+s.doc.slice(n.from,n.to)});return e(s.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Wv=({state:s,dispatch:e})=>Bd(s,e,!1),Hv=({state:s,dispatch:e})=>Bd(s,e,!0),Yv=s=>{if(s.state.readOnly)return!1;let{state:e}=s,t=e.changes(Qr(e).map(({from:n,to:r})=>(n>0?n--:r<e.doc.length&&r++,{from:n,to:r}))),i=us(e.selection,n=>s.moveVertically(n,!0)).map(t);return s.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Vv(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=He(s).resolveInner(e),i=t.childBefore(e),n=t.childAfter(e),r;return i&&n&&i.to<=e&&n.from>=e&&(r=i.type.prop(Q.closedBy))&&r.indexOf(n.name)>-1&&s.doc.lineAt(i.to).from==s.doc.lineAt(n.from).from&&!/\S/.test(s.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const zv=Ed(!1),$v=Ed(!0);function Ed(s){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:r,to:o}=n,l=e.doc.lineAt(r),h=!s&&r==o&&Vv(e,r);s&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new Ur(e,{simulateBreak:r,simulateDoubleBreak:!!h}),u=ha(c,r);for(u==null&&(u=fs(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;h?{from:r,to:o}=h:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let p=["",Qs(e,u)];return h&&p.push(Qs(e,c.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:re.of(p)},range:O.cursor(r+1+p[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function pa(s,e){let t=-1;return s.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=s.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,n,i),t=l.number),o=l.to+1}let r=s.changes(n);return{changes:n,range:O.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const Uv=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=Object.create(null),i=new Ur(s,{overrideIndentation:r=>{let o=t[r];return o??-1}}),n=pa(s,(r,o,l)=>{let h=ha(i,r.from);if(h==null)return;/\S/.test(r.text)||(h=0);let c=/^\s*/.exec(r.text)[0],u=Qs(s,h);(c!=u||l.from<r.from+c.length)&&(t[r.from]=h,o.push({from:r.from,to:r.from+c.length,insert:u}))});return n.changes.empty||e(s.update(n,{userEvent:"indent"})),!0},Id=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(pa(s,(t,i)=>{i.push({from:t.from,insert:s.facet($r)})}),{userEvent:"input.indent"})),!0),Fd=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(pa(s,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let r=fs(n,s.tabSize),o=0,l=Qs(s,Math.max(0,r-Dr(s)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),jv=[{key:"Ctrl-b",run:pd,shift:Sd,preventDefault:!0},{key:"Ctrl-f",run:md,shift:Cd},{key:"Ctrl-p",run:bd,shift:Dd},{key:"Ctrl-n",run:wd,shift:Ad},{key:"Ctrl-a",run:dv,shift:Mv},{key:"Ctrl-e",run:pv,shift:Ov},{key:"Ctrl-d",run:Pd},{key:"Ctrl-h",run:Yl},{key:"Ctrl-k",run:Rv},{key:"Ctrl-Alt-h",run:Ld},{key:"Ctrl-o",run:Bv},{key:"Ctrl-t",run:Ev},{key:"Ctrl-v",run:Hl}],qv=[{key:"ArrowLeft",run:pd,shift:Sd,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:nv,shift:yv,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:fv,shift:Sv,preventDefault:!0},{key:"ArrowRight",run:md,shift:Cd,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:rv,shift:bv,preventDefault:!0},{mac:"Cmd-ArrowRight",run:uv,shift:Cv,preventDefault:!0},{key:"ArrowUp",run:bd,shift:Dd,preventDefault:!0},{mac:"Cmd-ArrowUp",run:$c,shift:jc},{mac:"Ctrl-ArrowUp",run:Yc,shift:Vc},{key:"ArrowDown",run:wd,shift:Ad,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Uc,shift:qc},{mac:"Ctrl-ArrowDown",run:Hl,shift:zc},{key:"PageUp",run:Yc,shift:Vc},{key:"PageDown",run:Hl,shift:zc},{key:"Home",run:cv,shift:vv,preventDefault:!0},{key:"Mod-Home",run:$c,shift:jc},{key:"End",run:hv,shift:xv,preventDefault:!0},{key:"Mod-End",run:Uc,shift:qc},{key:"Enter",run:zv},{key:"Mod-a",run:Dv},{key:"Backspace",run:Yl,shift:Yl},{key:"Delete",run:Pd},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ld},{key:"Mod-Delete",mac:"Alt-Delete",run:Pv},{mac:"Mod-Backspace",run:Lv},{mac:"Mod-Delete",run:Nv}].concat(jv.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),Gv=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:lv,shift:wv},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:av,shift:kv},{key:"Alt-ArrowUp",run:Iv},{key:"Shift-Alt-ArrowUp",run:Wv},{key:"Alt-ArrowDown",run:Fv},{key:"Shift-Alt-ArrowDown",run:Hv},{key:"Escape",run:_v},{key:"Mod-Enter",run:$v},{key:"Alt-l",mac:"Ctrl-l",run:Av},{key:"Mod-i",run:Tv,preventDefault:!0},{key:"Mod-[",run:Fd},{key:"Mod-]",run:Id},{key:"Mod-Alt-\\",run:Uv},{key:"Shift-Mod-k",run:Yv},{key:"Shift-Mod-\\",run:gv},{key:"Mod-/",run:Wx},{key:"Alt-A",run:Yx}].concat(qv),Kv={key:"Tab",run:Id,shift:Fd};function ce(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];typeof n=="string"?s.setAttribute(i,n):n!=null&&(s[i]=n)}e++}for(;e<arguments.length;e++)Wd(s,arguments[e]);return s}function Wd(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Wd(s,e[t]);else throw new RangeError("Unsupported child node: "+e)}const Gc=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class as{constructor(e,t,i=0,n=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=r?l=>r(Gc(l)):Gc,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Pe(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Jl(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ct(e);let n=this.normalize(t);for(let r=0,o=i;;r++){let l=n.charCodeAt(r),h=this.match(l,o,this.bufferPos+this.bufferStart);if(r==n.length-1){if(h)return this.value=h,this;break}o==i&&r<t.length&&t.charCodeAt(r)==l&&o++}}}match(e,t,i){let n=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[r+1],to:i}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:i}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(as.prototype[Symbol.iterator]=function(){return this});const Hd={from:-1,to:-1,match:/.*/.exec("")},ma="gm"+(/x/.unicode==null?"":"u");class Yd{constructor(e,t,i,n=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=Hd,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Vd(e,t,i,n,r);this.re=new RegExp(t,ma+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=Pr(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,n=i+t[0].length;if(this.matchPos=Pr(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const jo=new WeakMap;class is{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let n=jo.get(e);if(!n||n.from>=i||n.to<=t){let l=new is(t,e.sliceString(t,i));return jo.set(e,l),l}if(n.from==t&&n.to==i)return n;let{text:r,from:o}=n;return o>t&&(r=e.sliceString(t,o)+r,o=t),n.to<i&&(r+=e.sliceString(n.to,i)),jo.set(e,new is(o,r)),new is(t,r.slice(t-o,i-o))}}class Vd{constructor(e,t,i,n,r){this.text=e,this.to=r,this.done=!1,this.value=Hd,this.matchPos=Pr(e,n),this.re=new RegExp(t,ma+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=is.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,n=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this.matchPos=Pr(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=is.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Yd.prototype[Symbol.iterator]=Vd.prototype[Symbol.iterator]=function(){return this});function Qv(s){try{return new RegExp(s,ma),!0}catch{return!1}}function Pr(s,e){if(e>=s.length)return e;let t=s.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function Vl(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),t=ce("input",{class:"cm-textfield",name:"line",value:e}),i=ce("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),s.dispatch({effects:Rr.of(!1)}),s.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},ce("label",s.state.phrase("Go to line"),": ",t)," ",ce("button",{class:"cm-button",type:"submit"},s.state.phrase("go")));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:o}=s,l=o.doc.lineAt(o.selection.main.head),[,h,c,u,p]=r,g=u?+u.slice(1):0,b=c?+c:l.number;if(c&&p){let k=b/100;h&&(k=k*(h=="-"?-1:1)+l.number/o.doc.lines),b=Math.round(o.doc.lines*k)}else c&&h&&(b=b*(h=="-"?-1:1)+l.number);let w=o.doc.line(Math.max(1,Math.min(o.doc.lines,b))),v=O.cursor(w.from+Math.max(0,Math.min(g,w.length)));s.dispatch({effects:[Rr.of(!1),I.scrollIntoView(v.from,{y:"center"})],selection:v}),s.focus()}return{dom:i}}const Rr=q.define(),Kc=Be.define({create(){return!0},update(s,e){for(let t of e.effects)t.is(Rr)&&(s=t.value);return s},provide:s=>Ks.from(s,e=>e?Vl:null)}),Jv=s=>{let e=Gs(s,Vl);if(!e){let t=[Rr.of(!0)];s.state.field(Kc,!1)==null&&t.push(q.appendConfig.of([Kc,Xv])),s.dispatch({effects:t}),e=Gs(s,Vl)}return e&&e.dom.querySelector("input").select(),!0},Xv=I.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Zv={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},zd=F.define({combine(s){return Et(s,Zv,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function eS(s){let e=[rS,nS];return s&&e.push(zd.of(s)),e}const tS=V.mark({class:"cm-selectionMatch"}),iS=V.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Qc(s,e,t,i){return(t==0||s(e.sliceDoc(t-1,t))!=ye.Word)&&(i==e.doc.length||s(e.sliceDoc(i,i+1))!=ye.Word)}function sS(s,e,t,i){return s(e.sliceDoc(t,t+1))==ye.Word&&s(e.sliceDoc(i-1,i))==ye.Word}const nS=ke.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(zd),{state:t}=s,i=t.selection;if(i.ranges.length>1)return V.none;let n=i.main,r,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return V.none;let h=t.wordAt(n.head);if(!h)return V.none;o=t.charCategorizer(n.head),r=t.sliceDoc(h.from,h.to)}else{let h=n.to-n.from;if(h<e.minSelectionLength||h>200)return V.none;if(e.wholeWords){if(r=t.sliceDoc(n.from,n.to),o=t.charCategorizer(n.head),!(Qc(o,t,n.from,n.to)&&sS(o,t,n.from,n.to)))return V.none}else if(r=t.sliceDoc(n.from,n.to),!r)return V.none}let l=[];for(let h of s.visibleRanges){let c=new as(t.doc,r,h.from,h.to);for(;!c.next().done;){let{from:u,to:p}=c.value;if((!o||Qc(o,t,u,p))&&(n.empty&&u<=n.from&&p>=n.to?l.push(iS.range(u,p)):(u>=n.to||p<=n.from)&&l.push(tS.range(u,p)),l.length>e.maxMatches))return V.none}}return V.set(l)}},{decorations:s=>s.decorations}),rS=I.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),oS=({state:s,dispatch:e})=>{let{selection:t}=s,i=O.create(t.ranges.map(n=>s.wordAt(n.head)||O.cursor(n.head)),t.mainIndex);return i.eq(t)?!1:(e(s.update({selection:i})),!0)};function lS(s,e){let{main:t,ranges:i}=s.selection,n=s.wordAt(t.head),r=n&&n.from==t.from&&n.to==t.to;for(let o=!1,l=new as(s.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new as(s.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(h=>h.from==l.value.from))continue;if(r){let h=s.wordAt(l.value.from);if(!h||h.from!=l.value.from||h.to!=l.value.to)continue}return l.value}}const aS=({state:s,dispatch:e})=>{let{ranges:t}=s.selection;if(t.some(r=>r.from===r.to))return oS({state:s,dispatch:e});let i=s.sliceDoc(t[0].from,t[0].to);if(s.selection.ranges.some(r=>s.sliceDoc(r.from,r.to)!=i))return!1;let n=lS(s,i);return n?(e(s.update({selection:s.selection.addRange(O.range(n.from,n.to),!1),effects:I.scrollIntoView(n.to)})),!0):!1},ds=F.define({combine(s){return Et(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new kS(e),scrollToMatch:e=>I.scrollIntoView(e)})}});class $d{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Qv(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new uS(this):new cS(this)}getCursor(e,t=0,i){let n=e.doc?e:Z.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Ui(this,n,t,i):$i(this,n,t,i)}}class Ud{constructor(e){this.spec=e}}function $i(s,e,t,i){return new as(e.doc,s.unquoted,t,i,s.caseSensitive?void 0:n=>n.toLowerCase(),s.wholeWord?hS(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function hS(s,e){return(t,i,n,r)=>((r>t||r+n.length<i)&&(r=Math.max(0,t-2),n=s.sliceString(r,Math.min(s.length,i+2))),(e(Lr(n,t-r))!=ye.Word||e(Nr(n,t-r))!=ye.Word)&&(e(Nr(n,i-r))!=ye.Word||e(Lr(n,i-r))!=ye.Word))}class cS extends Ud{constructor(e){super(e)}nextMatch(e,t,i){let n=$i(this.spec,e,i,e.doc.length).nextOverlapping();return n.done&&(n=$i(this.spec,e,0,t).nextOverlapping()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=i;;){let r=Math.max(t,n-1e4-this.spec.unquoted.length),o=$i(this.spec,e,r,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==t)return null;n-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=$i(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=$i(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}function Ui(s,e,t,i){return new Yd(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?fS(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Lr(s,e){return s.slice(Ne(s,e,!1),e)}function Nr(s,e){return s.slice(e,Ne(s,e))}function fS(s){return(e,t,i)=>!i[0].length||(s(Lr(i.input,i.index))!=ye.Word||s(Nr(i.input,i.index))!=ye.Word)&&(s(Nr(i.input,i.index+i[0].length))!=ye.Word||s(Lr(i.input,i.index+i[0].length))!=ye.Word)}class uS extends Ud{nextMatch(e,t,i){let n=Ui(this.spec,e,i,e.doc.length).next();return n.done&&(n=Ui(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=1;;n++){let r=Math.max(t,i-n*1e4),o=Ui(this.spec,e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==t||l.from>r+10))return l;if(r==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=Ui(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=Ui(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}const Js=q.define(),ga=q.define(),ui=Be.define({create(s){return new qo(zl(s).create(),null)},update(s,e){for(let t of e.effects)t.is(Js)?s=new qo(t.value.create(),s.panel):t.is(ga)&&(s=new qo(s.query,t.value?ya:null));return s},provide:s=>Ks.from(s,e=>e.panel)});class qo{constructor(e,t){this.query=e,this.panel=t}}const dS=V.mark({class:"cm-searchMatch"}),pS=V.mark({class:"cm-searchMatch cm-searchMatch-selected"}),mS=ke.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(ui))}update(s){let e=s.state.field(ui);(e!=s.startState.field(ui)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return V.none;let{view:t}=this,i=new mi;for(let n=0,r=t.visibleRanges,o=r.length;n<o;n++){let{from:l,to:h}=r[n];for(;n<o-1&&h>r[n+1].from-2*250;)h=r[++n].to;s.highlight(t.state,l,h,(c,u)=>{let p=t.state.selection.ranges.some(g=>g.from==c&&g.to==u);i.add(c,u,p?pS:dS)})}return i.finish()}},{decorations:s=>s.decorations});function an(s){return e=>{let t=e.state.field(ui,!1);return t&&t.query.spec.valid?s(e,t):Gd(e)}}const Br=an((s,{query:e})=>{let{to:t}=s.state.selection.main,i=e.nextMatch(s.state,t,t);if(!i)return!1;let n=O.single(i.from,i.to),r=s.state.facet(ds);return s.dispatch({selection:n,effects:[ba(s,i),r.scrollToMatch(n.main,s)],userEvent:"select.search"}),qd(s),!0}),Er=an((s,{query:e})=>{let{state:t}=s,{from:i}=t.selection.main,n=e.prevMatch(t,i,i);if(!n)return!1;let r=O.single(n.from,n.to),o=s.state.facet(ds);return s.dispatch({selection:r,effects:[ba(s,n),o.scrollToMatch(r.main,s)],userEvent:"select.search"}),qd(s),!0}),gS=an((s,{query:e})=>{let t=e.matchAll(s.state,1e3);return!t||!t.length?!1:(s.dispatch({selection:O.create(t.map(i=>O.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),yS=({state:s,dispatch:e})=>{let t=s.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:n}=t.main,r=[],o=0;for(let l=new as(s.doc,s.sliceDoc(i,n));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(O.range(l.value.from,l.value.to))}return e(s.update({selection:O.create(r,o),userEvent:"select.search.matches"})),!0},Jc=an((s,{query:e})=>{let{state:t}=s,{from:i,to:n}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,i,i);if(!r)return!1;let o=[],l,h,c=[];if(r.from==i&&r.to==n&&(h=t.toText(e.getReplacement(r)),o.push({from:r.from,to:r.to,insert:h}),r=e.nextMatch(t,r.from,r.to),c.push(I.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),r){let u=o.length==0||o[0].from>=r.to?0:r.to-r.from-h.length;l=O.single(r.from-u,r.to-u),c.push(ba(s,r)),c.push(t.facet(ds).scrollToMatch(l.main,s))}return s.dispatch({changes:o,selection:l,effects:c,userEvent:"input.replace"}),!0}),bS=an((s,{query:e})=>{if(s.state.readOnly)return!1;let t=e.matchAll(s.state,1e9).map(n=>{let{from:r,to:o}=n;return{from:r,to:o,insert:e.getReplacement(n)}});if(!t.length)return!1;let i=s.state.phrase("replaced $ matches",t.length)+".";return s.dispatch({changes:t,effects:I.announce.of(i),userEvent:"input.replace.all"}),!0});function ya(s){return s.state.facet(ds).createPanel(s)}function zl(s,e){var t,i,n,r,o;let l=s.selection.main,h=l.empty||l.to>l.from+100?"":s.sliceDoc(l.from,l.to);if(e&&!h)return e;let c=s.facet(ds);return new $d({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:c.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal,regexp:(r=e==null?void 0:e.regexp)!==null&&r!==void 0?r:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function jd(s){let e=Gs(s,ya);return e&&e.dom.querySelector("[main-field]")}function qd(s){let e=jd(s);e&&e==s.root.activeElement&&e.select()}const Gd=s=>{let e=s.state.field(ui,!1);if(e&&e.panel){let t=jd(s);if(t&&t!=s.root.activeElement){let i=zl(s.state,e.query.spec);i.valid&&s.dispatch({effects:Js.of(i)}),t.focus(),t.select()}}else s.dispatch({effects:[ga.of(!0),e?Js.of(zl(s.state,e.query.spec)):q.appendConfig.of(vS)]});return!0},Kd=s=>{let e=s.state.field(ui,!1);if(!e||!e.panel)return!1;let t=Gs(s,ya);return t&&t.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:ga.of(!1)}),!0},wS=[{key:"Mod-f",run:Gd,scope:"editor search-panel"},{key:"F3",run:Br,shift:Er,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Br,shift:Er,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Kd,scope:"editor search-panel"},{key:"Mod-Shift-l",run:yS},{key:"Mod-Alt-g",run:Jv},{key:"Mod-d",run:aS,preventDefault:!0}];class kS{constructor(e){this.view=e;let t=this.query=e.state.field(ui).query.spec;this.commit=this.commit.bind(this),this.searchField=ce("input",{value:t.search,placeholder:st(e,"Find"),"aria-label":st(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ce("input",{value:t.replace,placeholder:st(e,"Replace"),"aria-label":st(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ce("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=ce("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=ce("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(n,r,o){return ce("button",{class:"cm-button",name:n,onclick:r,type:"button"},o)}this.dom=ce("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>Br(e),[st(e,"next")]),i("prev",()=>Er(e),[st(e,"previous")]),i("select",()=>gS(e),[st(e,"all")]),ce("label",null,[this.caseField,st(e,"match case")]),ce("label",null,[this.reField,st(e,"regexp")]),ce("label",null,[this.wordField,st(e,"by word")]),...e.state.readOnly?[]:[ce("br"),this.replaceField,i("replace",()=>Jc(e),[st(e,"replace")]),i("replaceAll",()=>bS(e),[st(e,"replace all")])],ce("button",{name:"close",onclick:()=>Kd(e),"aria-label":st(e,"close"),type:"button"},["×"])])}commit(){let e=new $d({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Js.of(e)}))}keydown(e){zb(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Er:Br)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Jc(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Js)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ds).top}}function st(s,e){return s.state.phrase(e)}const Gn=30,Kn=/[\s\.,:;?!]/;function ba(s,{from:e,to:t}){let i=s.state.doc.lineAt(e),n=s.state.doc.lineAt(t).to,r=Math.max(i.from,e-Gn),o=Math.min(n,t+Gn),l=s.state.sliceDoc(r,o);if(r!=i.from){for(let h=0;h<Gn;h++)if(!Kn.test(l[h+1])&&Kn.test(l[h])){l=l.slice(h);break}}if(o!=n){for(let h=l.length-1;h>l.length-Gn;h--)if(!Kn.test(l[h-1])&&Kn.test(l[h])){l=l.slice(0,h);break}}return I.announce.of(`${s.state.phrase("current match")}. ${l} ${s.state.phrase("on line")} ${i.number}.`)}const xS=I.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),vS=[ui,cs.low(mS),xS];class Qd{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=He(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),r=n.search(Jd(e,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function Xc(s){let e=Object.keys(s).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function SS(s){let e=Object.create(null),t=Object.create(null);for(let{label:n}of s){e[n[0]]=!0;for(let r=1;r<n.length;r++)t[n[r]]=!0}let i=Xc(e)+Xc(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function CS(s){let e=s.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:SS(e);return n=>{let r=n.matchBefore(i);return r||n.explicit?{from:r?r.from:n.pos,options:e,validFor:t}:null}}class Zc{constructor(e,t,i,n){this.completion=e,this.source=t,this.match=i,this.score=n}}function di(s){return s.selection.main.from}function Jd(s,e){var t;let{source:i}=s,n=e&&i[0]!="^",r=i[i.length-1]!="$";return!n&&!r?s:new RegExp(`${n?"^":""}(?:${i})${r?"$":""}`,(t=s.flags)!==null&&t!==void 0?t:s.ignoreCase?"i":"")}const MS=Xt.define();function OS(s,e,t,i){let{main:n}=s.selection,r=t-n.from,o=i-n.from;return Object.assign(Object.assign({},s.changeByRange(l=>l!=n&&t!=i&&s.sliceDoc(l.from+r,l.from+o)!=s.sliceDoc(t,i)?{range:l}:{changes:{from:l.from+r,to:i==n.from?l.to:l.from+o,insert:e},range:O.cursor(l.from+r+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const ef=new WeakMap;function DS(s){if(!Array.isArray(s))return s;let e=ef.get(s);return e||ef.set(s,e=CS(s)),e}const Ir=q.define(),Xs=q.define();class AS{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Pe(e,t),n=ct(i);this.chars.push(i);let r=e.slice(t,t+n),o=r.toUpperCase();this.folded.push(Pe(o==r?r.toLowerCase():o,0)),t+=n}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:t,folded:i,any:n,precise:r,byWord:o}=this;if(t.length==1){let D=Pe(e,0),R=ct(D),_=R==e.length?0:-100;if(D!=t[0])if(D==i[0])_+=-200;else return!1;return this.ret(_,[0,R])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=t.length,c=0;if(l<0){for(let D=0,R=Math.min(e.length,200);D<R&&c<h;){let _=Pe(e,D);(_==t[c]||_==i[c])&&(n[c++]=D),D+=ct(_)}if(c<h)return!1}let u=0,p=0,g=!1,b=0,w=-1,v=-1,k=/[a-z]/.test(e),S=!0;for(let D=0,R=Math.min(e.length,200),_=0;D<R&&p<h;){let A=Pe(e,D);l<0&&(u<h&&A==t[u]&&(r[u++]=D),b<h&&(A==t[b]||A==i[b]?(b==0&&(w=D),v=D+1,b++):b=0));let N,P=A<255?A>=48&&A<=57||A>=97&&A<=122?2:A>=65&&A<=90?1:0:(N=Jl(A))!=N.toLowerCase()?1:N!=N.toUpperCase()?2:0;(!D||P==1&&k||_==0&&P!=0)&&(t[p]==A||i[p]==A&&(g=!0)?o[p++]=D:o.length&&(S=!1)),_=P,D+=ct(A)}return p==h&&o[0]==0&&S?this.result(-100+(g?-200:0),o,e):b==h&&w==0?this.ret(-200-e.length+(v==e.length?0:-100),[0,v]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):b==h?this.ret(-900-e.length,[w,v]):p==h?this.result(-100+(g?-200:0)+-700+(S?0:-1100),o,e):t.length==2?!1:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,i){let n=[],r=0;for(let o of t){let l=o+(this.astral?ct(Pe(i,o)):1);r&&n[r-1]==o?n[r-1]=l:(n[r++]=o,n[r++]=l)}return this.ret(e-i.length,n)}}const Le=F.define({combine(s){return Et(s,{activateOnTyping:!0,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:TS,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>tf(e(i),t(i)),optionClass:(e,t)=>i=>tf(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function tf(s,e){return s?e?s+" "+e:s:e}function TS(s,e,t,i,n,r){let o=s.textDirection==me.RTL,l=o,h=!1,c="top",u,p,g=e.left-n.left,b=n.right-e.right,w=i.right-i.left,v=i.bottom-i.top;if(l&&g<Math.min(w,b)?l=!1:!l&&b<Math.min(w,g)&&(l=!0),w<=(l?g:b))u=Math.max(n.top,Math.min(t.top,n.bottom-v))-e.top,p=Math.min(400,l?g:b);else{h=!0,p=Math.min(400,(o?e.right:n.right-e.left)-30);let D=n.bottom-e.bottom;D>=v||D>e.top?u=t.bottom-e.top:(c="bottom",u=e.bottom-t.top)}let k=(e.bottom-e.top)/r.offsetHeight,S=(e.right-e.left)/r.offsetWidth;return{style:`${c}: ${u/k}px; max-width: ${p/S}px`,class:"cm-completionInfo-"+(h?o?"left-narrow":"right-narrow":l?"left":"right")}}function _S(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,h=0;for(let c=0;c<r.length;){let u=r[c++],p=r[c++];u>h&&o.appendChild(document.createTextNode(l.slice(h,u)));let g=o.appendChild(document.createElement("span"));g.appendChild(document.createTextNode(l.slice(u,p))),g.className="cm-completionMatchedText",h=p}return h<l.length&&o.appendChild(document.createTextNode(l.slice(h))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function Go(s,e,t){if(s<=t)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let i=Math.floor((s-e)/t);return{from:s-(i+1)*t,to:s-i*t}}class PS{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:r,selected:o}=n.open,l=e.state.facet(Le);this.optionContent=_S(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Go(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{let{options:c}=e.state.field(t).open;for(let u=h.target,p;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(p=/-(\d+)$/.exec(u.id))&&+p[1]<c.length){this.applyCompletion(e,c[+p[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Le).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:Xs.of(null)})}),this.showOptions(r,n.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:r,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=r)&&(this.range=Go(r.length,o,e.state.facet(Le).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((t=n.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Go(t.options.length,t.selected,this.view.state.facet(Le).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:n}=i;if(!n)return;let r=typeof n=="string"?document.createTextNode(n):n(i);if(!r)return;"then"in r?r.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>dt(this.view.state,o,"completion info")):this.addInfoPane(r,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:r}=e;i.appendChild(n),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&LS(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return n.top>Math.min(r.bottom,t.bottom)-10||n.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(Le).positionInfo(this.view,t,n,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions"));let r=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:h}=e[o],{section:c}=l;if(c){let g=typeof c=="string"?c:c.name;if(g!=r&&(o>i.from||i.from==0))if(r=g,typeof c!="string"&&c.header)n.appendChild(c.header(c));else{let b=n.appendChild(document.createElement("completion-section"));b.textContent=g}}const u=n.appendChild(document.createElement("li"));u.id=t+"-"+o,u.setAttribute("role","option");let p=this.optionClass(l);p&&(u.className=p);for(let g of this.optionContent){let b=g(l,this.view.state,this.view,h);b&&u.appendChild(b)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function RS(s,e){return t=>new PS(t,s,e)}function LS(s,e){let t=s.getBoundingClientRect(),i=e.getBoundingClientRect(),n=t.height/s.offsetHeight;i.top<t.top?s.scrollTop-=(t.top-i.top)/n:i.bottom>t.bottom&&(s.scrollTop+=(i.bottom-t.bottom)/n)}function sf(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function NS(s,e){let t=[],i=null,n=h=>{t.push(h);let{section:c}=h.completion;if(c){i||(i=[]);let u=typeof c=="string"?c:c.name;i.some(p=>p.name==u)||i.push(typeof c=="string"?{name:u}:c)}};for(let h of s)if(h.hasResult()){let c=h.result.getMatch;if(h.result.filter===!1)for(let u of h.result.options)n(new Zc(u,h.source,c?c(u):[],1e9-t.length));else{let u=new AS(e.sliceDoc(h.from,h.to));for(let p of h.result.options)if(u.match(p.label)){let g=p.displayLabel?c?c(p,u.matched):[]:u.matched;n(new Zc(p,h.source,g,u.score+(p.boost||0)))}}}if(i){let h=Object.create(null),c=0,u=(p,g)=>{var b,w;return((b=p.rank)!==null&&b!==void 0?b:1e9)-((w=g.rank)!==null&&w!==void 0?w:1e9)||(p.name<g.name?-1:1)};for(let p of i.sort(u))c-=1e5,h[p.name]=c;for(let p of t){let{section:g}=p.completion;g&&(p.score+=h[typeof g=="string"?g:g.name])}}let r=[],o=null,l=e.facet(Le).compareCompletions;for(let h of t.sort((c,u)=>u.score-c.score||l(c.completion,u.completion))){let c=h.completion;!o||o.label!=c.label||o.detail!=c.detail||o.type!=null&&c.type!=null&&o.type!=c.type||o.apply!=c.apply||o.boost!=c.boost?r.push(h):sf(h.completion)>sf(o)&&(r[r.length-1]=h),o=h.completion}return r}class Ki{constructor(e,t,i,n,r,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=r,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ki(this.options,nf(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,n,r){let o=NS(e,t);if(!o.length)return n&&e.some(h=>h.state==1)?new Ki(n.options,n.attrs,n.tooltip,n.timestamp,n.selected,!0):null;let l=t.facet(Le).selectOnOpen?0:-1;if(n&&n.selected!=l&&n.selected!=-1){let h=n.options[n.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==h){l=c;break}}return new Ki(o,nf(i,l),{pos:e.reduce((h,c)=>c.hasResult()?Math.min(h,c.from):h,1e8),create:WS,above:r.aboveCursor},n?n.timestamp:Date.now(),l,!1)}map(e){return new Ki(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Fr{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Fr(IS,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Le),r=(i.override||t.languageDataAt("autocomplete",di(t)).map(DS)).map(l=>(this.active.find(c=>c.source==l)||new Je(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((l,h)=>l==this.active[h])&&(r=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!BS(r,this.active)?o=Ki.build(r,t,this.id,o,i):o&&o.disabled&&!r.some(l=>l.state==1)&&(o=null),!o&&r.every(l=>l.state!=1)&&r.some(l=>l.hasResult())&&(r=r.map(l=>l.hasResult()?new Je(l.source,0):l));for(let l of e.effects)l.is(Zd)&&(o=o&&o.setSelected(l.value,this.id));return r==this.active&&o==this.open?this:new Fr(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:ES}}function BS(s,e){if(s==e)return!0;for(let t=0,i=0;;){for(;t<s.length&&!s[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let n=t==s.length,r=i==e.length;if(n||r)return n==r;if(s[t++].result!=e[i++].result)return!1}}const ES={"aria-autocomplete":"list"};function nf(s,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(t["aria-activedescendant"]=s+"-"+e),t}const IS=[];function $l(s){return s.isUserEvent("input.type")?"input":s.isUserEvent("delete.backward")?"delete":null}class Je{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=$l(e),n=this;i?n=n.handleUserEvent(e,i,t):e.docChanged?n=n.handleChange(e):e.selection&&n.state!=0&&(n=new Je(n.source,0));for(let r of e.effects)if(r.is(Ir))n=new Je(n.source,1,r.value?di(e.state):-1);else if(r.is(Xs))n=new Je(n.source,0);else if(r.is(Xd))for(let o of r.value)o.source==n.source&&(n=o);return n}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new Je(this.source,1)}handleChange(e){return e.changes.touchesRange(di(e.startState))?new Je(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Je(this.source,this.state,e.mapPos(this.explicitPos))}}class ss extends Je{constructor(e,t,i,n,r){super(e,2,t),this.result=i,this.from=n,this.to=r}hasResult(){return!0}handleUserEvent(e,t,i){var n;let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=di(e.state);if((this.explicitPos<0?l<=r:l<this.from)||l>o||t=="delete"&&di(e.startState)==this.from)return new Je(this.source,t=="input"&&i.activateOnTyping?1:0);let h=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return FS(this.result.validFor,e.state,r,o)?new ss(this.source,h,this.result,r,o):this.result.update&&(c=this.result.update(this.result,r,o,new Qd(e.state,l,h>=0)))?new ss(this.source,h,c,c.from,(n=c.to)!==null&&n!==void 0?n:di(e.state)):new Je(this.source,1,h)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Je(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new ss(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function FS(s,e,t,i){if(!s)return!1;let n=e.sliceDoc(t,i);return typeof s=="function"?s(n,t,i,e):Jd(s,!0).test(n)}const Xd=q.define({map(s,e){return s.map(t=>t.map(e))}}),Zd=q.define(),rt=Be.define({create(){return Fr.start()},update(s,e){return s.update(e)},provide:s=>[aa.from(s,e=>e.tooltip),I.contentAttributes.from(s,e=>e.attrs)]});function ep(s,e){const t=e.completion.apply||e.completion.label;let i=s.state.field(rt).active.find(n=>n.source==e.source);return i instanceof ss?(typeof t=="string"?s.dispatch(Object.assign(Object.assign({},OS(s.state,t,i.from,i.to)),{annotations:MS.of(e.completion)})):t(s,e.completion,i.from,i.to),!0):!1}const WS=RS(rt,ep);function Qn(s,e="option"){return t=>{let i=t.state.field(rt,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Le).interactionDelay)return!1;let n=1,r;e=="page"&&(r=Wu(t,i.open.tooltip))&&(n=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(s?1:-1):s?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:Zd.of(l)}),!0}}const HS=s=>{let e=s.state.field(rt,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(Le).interactionDelay?!1:ep(s,e.open.options[e.open.selected])},YS=s=>s.state.field(rt,!1)?(s.dispatch({effects:Ir.of(!0)}),!0):!1,VS=s=>{let e=s.state.field(rt,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(s.dispatch({effects:Xs.of(null)}),!0)};class zS{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const $S=50,US=1e3,jS=ke.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of s.state.field(rt).active)e.state==1&&this.startQuery(e)}update(s){let e=s.state.field(rt);if(!s.selectionSet&&!s.docChanged&&s.startState.field(rt)==e)return;let t=s.transactions.some(n=>(n.selection||n.docChanged)&&!$l(n));for(let n=0;n<this.running.length;n++){let r=this.running[n];if(t||r.updates.length+s.transactions.length>$S&&Date.now()-r.time>US){for(let o of r.context.abortListeners)try{o()}catch(l){dt(this.view.state,l)}r.context.abortListeners=null,this.running.splice(n--,1)}else r.updates.push(...s.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),s.transactions.some(n=>n.effects.some(r=>r.is(Ir)))&&(this.pendingStart=!0);let i=this.pendingStart?50:s.state.facet(Le).activateOnTypingDelay;if(this.debounceUpdate=e.active.some(n=>n.state==1&&!this.running.some(r=>r.active.source==n.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let n of s.transactions)$l(n)=="input"?this.composing=2:this.composing==2&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:s}=this.view,e=s.field(rt);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(s){let{state:e}=this.view,t=di(e),i=new Qd(e,t,s.explicitPos==t),n=new zS(s,i);this.running.push(n),Promise.resolve(s.source(i)).then(r=>{n.context.aborted||(n.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Xs.of(null)}),dt(this.view.state,r)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Le).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Le);for(let i=0;i<this.running.length;i++){let n=this.running[i];if(n.done===void 0)continue;if(this.running.splice(i--,1),n.done){let o=new ss(n.active.source,n.active.explicitPos,n.done,n.done.from,(s=n.done.to)!==null&&s!==void 0?s:di(n.updates.length?n.updates[0].startState:this.view.state));for(let l of n.updates)o=o.update(l,t);if(o.hasResult()){e.push(o);continue}}let r=this.view.state.field(rt).active.find(o=>o.source==n.active.source);if(r&&r.state==1)if(n.done==null){let o=new Je(n.active.source,0);for(let l of n.updates)o=o.update(l,t);o.state!=1&&e.push(o)}else this.startQuery(r)}e.length&&this.view.dispatch({effects:Xd.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(rt,!1);if(e&&e.tooltip&&this.view.state.facet(Le).closeOnBlur){let t=e.open&&Wu(this.view,e.open.tooltip);(!t||!t.dom.contains(s.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Xs.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ir.of(!1)}),20),this.composing=0}}}),qS=I.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Zs={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ti=q.define({map(s,e){let t=e.mapPos(s,-1,je.TrackAfter);return t??void 0}}),wa=new class extends Pi{};wa.startSide=1;wa.endSide=-1;const tp=Be.define({create(){return se.empty},update(s,e){if(s=s.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);s=s.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(Ti)&&(s=s.update({add:[wa.range(t.value,t.value+1)]}));return s}});function GS(){return[QS,tp]}const Ko="()[]{}<>";function ip(s){for(let e=0;e<Ko.length;e+=2)if(Ko.charCodeAt(e)==s)return Ko.charAt(e+1);return Jl(s<128?s:s+1)}function sp(s,e){return s.languageDataAt("closeBrackets",e)[0]||Zs}const KS=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),QS=I.inputHandler.of((s,e,t,i)=>{if((KS?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let n=s.state.selection.main;if(i.length>2||i.length==2&&ct(Pe(i,0))==1||e!=n.from||t!=n.to)return!1;let r=ZS(s.state,i);return r?(s.dispatch(r),!0):!1}),JS=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=sp(s,s.selection.main.head).brackets||Zs.brackets,n=null,r=s.changeByRange(o=>{if(o.empty){let l=eC(s.doc,o.head);for(let h of i)if(h==l&&Jr(s.doc,o.head)==ip(Pe(h,0)))return{changes:{from:o.head-h.length,to:o.head+h.length},range:O.cursor(o.head-h.length)}}return{range:n=o}});return n||e(s.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},XS=[{key:"Backspace",run:JS}];function ZS(s,e){let t=sp(s,s.selection.main.head),i=t.brackets||Zs.brackets;for(let n of i){let r=ip(Pe(n,0));if(e==n)return r==n?sC(s,n,i.indexOf(n+n+n)>-1,t):tC(s,n,r,t.before||Zs.before);if(e==r&&np(s,s.selection.main.from))return iC(s,n,r)}return null}function np(s,e){let t=!1;return s.field(tp).between(0,s.doc.length,i=>{i==e&&(t=!0)}),t}function Jr(s,e){let t=s.sliceString(e,e+2);return t.slice(0,ct(Pe(t,0)))}function eC(s,e){let t=s.sliceString(e-2,e);return ct(Pe(t,0))==t.length?t:t.slice(1)}function tC(s,e,t,i){let n=null,r=s.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Ti.of(o.to+e.length),range:O.range(o.anchor+e.length,o.head+e.length)};let l=Jr(s.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:Ti.of(o.head+e.length),range:O.cursor(o.head+e.length)}:{range:n=o}});return n?null:s.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function iC(s,e,t){let i=null,n=s.changeByRange(r=>r.empty&&Jr(s.doc,r.head)==t?{changes:{from:r.head,to:r.head+t.length,insert:t},range:O.cursor(r.head+t.length)}:i={range:r});return i?null:s.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function sC(s,e,t,i){let n=i.stringPrefixes||Zs.stringPrefixes,r=null,o=s.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Ti.of(l.to+e.length),range:O.range(l.anchor+e.length,l.head+e.length)};let h=l.head,c=Jr(s.doc,h),u;if(c==e){if(rf(s,h))return{changes:{insert:e+e,from:h},effects:Ti.of(h+e.length),range:O.cursor(h+e.length)};if(np(s,h)){let g=t&&s.sliceDoc(h,h+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:h,to:h+g.length,insert:g},range:O.cursor(h+g.length)}}}else{if(t&&s.sliceDoc(h-2*e.length,h)==e+e&&(u=of(s,h-2*e.length,n))>-1&&rf(s,u))return{changes:{insert:e+e+e+e,from:h},effects:Ti.of(h+e.length),range:O.cursor(h+e.length)};if(s.charCategorizer(h)(c)!=ye.Word&&of(s,h,n)>-1&&!nC(s,h,e,n))return{changes:{insert:e+e,from:h},effects:Ti.of(h+e.length),range:O.cursor(h+e.length)}}return{range:r=l}});return r?null:s.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function rf(s,e){let t=He(s).resolveInner(e+1);return t.parent&&t.from==e}function nC(s,e,t,i){let n=He(s).resolveInner(e,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=s.sliceDoc(n.from,Math.min(n.to,n.from+t.length+r)),h=l.indexOf(t);if(!h||h>-1&&i.indexOf(l.slice(0,h))>-1){let u=n.firstChild;for(;u&&u.from==n.from&&u.to-u.from>t.length+h;){if(s.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=n.to==e&&n.parent;if(!c)break;n=c}return!1}function of(s,e,t){let i=s.charCategorizer(e);if(i(s.sliceDoc(e-1,e))!=ye.Word)return e;for(let n of t){let r=e-n.length;if(s.sliceDoc(r,e)==n&&i(s.sliceDoc(r-1,r))!=ye.Word)return r}return-1}function rC(s={}){return[rt,Le.of(s),jS,oC,qS]}const rp=[{key:"Ctrl-Space",run:YS},{key:"Escape",run:VS},{key:"ArrowDown",run:Qn(!0)},{key:"ArrowUp",run:Qn(!1)},{key:"PageDown",run:Qn(!0,"page")},{key:"PageUp",run:Qn(!1,"page")},{key:"Enter",run:HS}],oC=cs.highest(Vr.computeN([Le],s=>s.facet(Le).defaultKeymap?[rp]:[]));class lC{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Oi{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let n=e,r=i.facet(ap).markerFilter;r&&(n=r(n,i));let o=V.set(n.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?V.widget({widget:new gC(l),diagnostic:l}).range(l.from):V.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l,inclusive:!0}).range(l.from,l.to)),!0);return new Oi(o,t,hs(o))}}function hs(s,e=null,t=0){let i=null;return s.between(t,1e9,(n,r,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new lC(n,r,o.diagnostic),!1}),i}function aC(s,e){let t=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(i=>i.is(op))||s.changes.touchesRange(t.from,t.to))}function hC(s,e){return s.field(lt,!1)?e:e.concat(q.appendConfig.of(wC))}const op=q.define(),ka=q.define(),lp=q.define(),lt=Be.define({create(){return new Oi(V.none,null,null)},update(s,e){if(e.docChanged){let t=s.diagnostics.map(e.changes),i=null;if(s.selected){let n=e.changes.mapPos(s.selected.from,1);i=hs(t,s.selected.diagnostic,n)||hs(t,null,n)}s=new Oi(t,s.panel,i)}for(let t of e.effects)t.is(op)?s=Oi.init(t.value,s.panel,e.state):t.is(ka)?s=new Oi(s.diagnostics,t.value?Xr.open:null,s.selected):t.is(lp)&&(s=new Oi(s.diagnostics,s.panel,t.value));return s},provide:s=>[Ks.from(s,e=>e.panel),I.decorations.from(s,e=>e.diagnostics)]}),cC=V.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function fC(s,e,t){let{diagnostics:i}=s.state.field(lt),n=[],r=2e8,o=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(h,c,{spec:u})=>{e>=h&&e<=c&&(h==c||(e>h||t>0)&&(e<c||t<0))&&(n.push(u.diagnostic),r=Math.min(h,r),o=Math.max(c,o))});let l=s.state.facet(ap).tooltipFilter;return l&&(n=l(n,s.state)),n.length?{pos:r,end:o,above:s.state.doc.lineAt(r).to<o,create(){return{dom:uC(s,n)}}}:null}function uC(s,e){return ce("ul",{class:"cm-tooltip-lint"},e.map(t=>cp(s,t,!1)))}const dC=s=>{let e=s.state.field(lt,!1);(!e||!e.panel)&&s.dispatch({effects:hC(s.state,[ka.of(!0)])});let t=Gs(s,Xr.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},lf=s=>{let e=s.state.field(lt,!1);return!e||!e.panel?!1:(s.dispatch({effects:ka.of(!1)}),!0)},pC=s=>{let e=s.state.field(lt,!1);if(!e)return!1;let t=s.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(s.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},mC=[{key:"Mod-Shift-m",run:dC,preventDefault:!0},{key:"F8",run:pC}],ap=F.define({combine(s){return Object.assign({sources:s.map(e=>e.source).filter(e=>e!=null)},Et(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function hp(s){let e=[];if(s)e:for(let{name:t}of s){for(let i=0;i<t.length;i++){let n=t[i];if(/[a-zA-Z]/.test(n)&&!e.some(r=>r.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function cp(s,e,t){var i;let n=t?hp(e.actions):[];return ce("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ce("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=!1,h=g=>{if(g.preventDefault(),l)return;l=!0;let b=hs(s.state.field(lt).diagnostics,e);b&&r.apply(s,b.from,b.to)},{name:c}=r,u=n[o]?c.indexOf(n[o]):-1,p=u<0?c:[c.slice(0,u),ce("u",c.slice(u,u+1)),c.slice(u+1)];return ce("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${c}${u<0?"":` (access key "${n[o]})"`}.`},p)}),e.source&&ce("div",{class:"cm-diagnosticSource"},e.source))}class gC extends Zt{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return ce("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class af{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=cp(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Xr{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)lf(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=hp(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let h=hs(this.view.state.field(lt).diagnostics,r);h&&r.actions[l].apply(e,h.from,h.to)}}else return;n.preventDefault()},i=n=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(n.target)&&this.moveSelection(r)};this.list=ce("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=ce("div",{class:"cm-panel-lint"},this.list,ce("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>lf(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(lt).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(lt),i=0,n=!1,r=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:h})=>{let c=-1,u;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==h.diagnostic){c=p;break}c<0?(u=new af(this.view,h.diagnostic),this.items.splice(i,0,u),n=!0):(u=this.items[c],c>i&&(this.items.splice(i,c-i),n=!0)),t&&u.diagnostic==t.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),r=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new af(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{let h=l.height/this.list.offsetHeight;o.top<l.top?this.list.scrollTop-=(l.top-o.top)/h:o.bottom>l.bottom&&(this.list.scrollTop+=(o.bottom-l.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(lt),i=hs(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:lp.of(i)})}static open(e){return new Xr(e)}}function yC(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function Jn(s){return yC(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const bC=I.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Jn("#d11")},".cm-lintRange-warning":{backgroundImage:Jn("orange")},".cm-lintRange-info":{backgroundImage:Jn("#999")},".cm-lintRange-hint":{backgroundImage:Jn("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),wC=[lt,I.decorations.compute([lt],s=>{let{selected:e,panel:t}=s.field(lt);return!e||!t||e.from==e.to?V.none:V.set([cC.range(e.from,e.to)])}),Pw(fC,{hideOn:aC}),bC],kC=[Hw(),zw(),ow(),Gx(),bk(),Kb(),ew(),Z.allowMultipleSelections.of(!0),nk(),ed(vk,{fallback:!0}),Tk(),GS(),rC(),kw(),Sw(),uw(),eS(),Vr.of([...XS,...Gv,...wS,...sv,...pk,...rp,...mC])];/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var xC=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[kC]}),vC=Symbol("vue-codemirror-global-config"),Ue,SC=function(s){var e=s.onUpdate,t=s.onChange,i=s.onFocus,n=s.onBlur,r=function(o,l){var h={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&l.indexOf(c)<0&&(h[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var u=0;for(c=Object.getOwnPropertySymbols(o);u<c.length;u++)l.indexOf(c[u])<0&&Object.prototype.propertyIsEnumerable.call(o,c[u])&&(h[c[u]]=o[c[u]])}return h}(s,["onUpdate","onChange","onFocus","onBlur"]);return Z.create({doc:r.doc,selection:r.selection,extensions:(Array.isArray(r.extensions)?r.extensions:[r.extensions]).concat([I.updateListener.of(function(o){e(o),o.docChanged&&t(o.state.doc.toString(),o),o.focusChanged&&(o.view.hasFocus?i(o):n(o))})])})},ji=function(s){var e=new en;return{compartment:e,run:function(t){e.get(s.state)?s.dispatch({effects:e.reconfigure(t)}):s.dispatch({effects:q.appendConfig.of(e.of(t))})}}},hf=function(s,e){var t=ji(s),i=t.compartment,n=t.run;return function(r){var o=i.get(s.state);n(r??o!==e?e:[])}},Xn={type:Boolean,default:void 0},CC={autofocus:Xn,disabled:Xn,indentWithTab:Xn,tabSize:Number,placeholder:String,style:Object,autoDestroy:Xn,phrases:Object,root:Object,extensions:Array,selection:Object},MC={modelValue:{type:String,default:""}},OC=Object.assign(Object.assign({},CC),MC);(function(s){s.Change="change",s.Update="update",s.Focus="focus",s.Blur="blur",s.Ready="ready",s.ModelUpdate="update:modelValue"})(Ue||(Ue={}));var Di={};Di[Ue.Change]=function(s,e){return!0},Di[Ue.Update]=function(s){return!0},Di[Ue.Focus]=function(s){return!0},Di[Ue.Blur]=function(s){return!0},Di[Ue.Ready]=function(s){return!0};var fp={};fp[Ue.ModelUpdate]=Di[Ue.Change];var DC=Object.assign(Object.assign({},Di),fp),AC=hy({name:"VueCodemirror",props:Object.assign({},OC),emits:Object.assign({},DC),setup:function(s,e){var t=er(),i=er(),n=er(),r=Object.assign(Object.assign({},xC),cy(vC,{})),o=fy(function(){var l={};return Object.keys(my(s)).forEach(function(h){var c;h!=="modelValue"&&(l[h]=(c=s[h])!==null&&c!==void 0?c:r[h])}),l});return uy(function(){var l;i.value=SC({doc:s.modelValue,selection:o.value.selection,extensions:(l=r.extensions)!==null&&l!==void 0?l:[],onFocus:function(c){return e.emit(Ue.Focus,c)},onBlur:function(c){return e.emit(Ue.Blur,c)},onUpdate:function(c){return e.emit(Ue.Update,c)},onChange:function(c,u){c!==s.modelValue&&(e.emit(Ue.Change,c,u),e.emit(Ue.ModelUpdate,c,u))}}),n.value=function(c){return new I(Object.assign({},c))}({state:i.value,parent:t.value,root:o.value.root});var h=function(c){var u=function(){return c.state.doc.toString()},p=ji(c).run,g=hf(c,[I.editable.of(!1),Z.readOnly.of(!0)]),b=hf(c,Vr.of([Kv])),w=ji(c).run,v=ji(c).run,k=ji(c).run,S=ji(c).run;return{focus:function(){return c.focus()},getDoc:u,setDoc:function(D){D!==u()&&c.dispatch({changes:{from:0,to:c.state.doc.length,insert:D}})},reExtensions:p,toggleDisabled:g,toggleIndentWithTab:b,setTabSize:function(D){w([Z.tabSize.of(D),$r.of(" ".repeat(D))])},setPhrases:function(D){v([Z.phrases.of(D)])},setPlaceholder:function(D){k(gw(D))},setStyle:function(D){D===void 0&&(D={}),S(I.theme({"&":Object.assign({},D)}))}}}(n.value);si(function(){return s.modelValue},function(c){c!==h.getDoc()&&h.setDoc(c)}),si(function(){return s.extensions},function(c){return h.reExtensions(c||[])},{immediate:!0}),si(function(){return o.value.disabled},function(c){return h.toggleDisabled(c)},{immediate:!0}),si(function(){return o.value.indentWithTab},function(c){return h.toggleIndentWithTab(c)},{immediate:!0}),si(function(){return o.value.tabSize},function(c){return h.setTabSize(c)},{immediate:!0}),si(function(){return o.value.phrases},function(c){return h.setPhrases(c||{})},{immediate:!0}),si(function(){return o.value.placeholder},function(c){return h.setPlaceholder(c)},{immediate:!0}),si(function(){return o.value.style},function(c){return h.setStyle(c)},{immediate:!0}),o.value.autofocus&&h.focus(),e.emit(Ue.Ready,{state:i.value,view:n.value,container:t.value})}),dy(function(){o.value.autoDestroy&&n.value&&function(l){l.destroy()}(n.value)}),function(){return py("div",{class:"v-codemirror",style:{display:"contents"},ref:t})}}}),TC=AC;const _C={class:"p-4 h-auto"},PC={class:"flex align-items-center justify-between"},RC={class:"flex align-items-center justify-content-center"},LC={class:"border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-96 mb-4"},NC={class:"text-xl font-semibold text-gray-900 dark:text-white"},BC={__name:"TransactionContent",setup(s){const e=gy();e.getData(!0);let t=So(""),i=So(""),n=So(!1);function r(c){t.value=c.transaction_title,i.value=c.transaction_description,n.value=!n.value}const o=[Ik(),Gk],l=er(),h=c=>{l.value=c.view};return(c,u)=>(Me(),qe("main",_C,[J("div",PC,[J("div",RC,[Rt(Tx),Rt(Fx)]),Rt(Jk,{loading:Ct(e).loading,onReload:u[0]||(u[0]=p=>Ct(e).getData(!0))},null,8,["loading"])]),J("div",LC,[Ct(e).loading?(Me(),Zn(bx,{key:0})):(Me(),Zn(dx,{key:1,transactionData:Ct(e).api_data,onShowData:r},null,8,["transactionData"]))]),Ct(n)?(Me(),Zn(yy,{key:0,onCloseModal:u[2]||(u[2]=p=>dh(n)?n.value=!Ct(n):n=!Ct(n))},{header:uh(()=>[J("h3",NC,Qi(Ct(t)),1)]),content:uh(()=>[Rt(Ct(TC),{"aria-readonly":"true",modelValue:Ct(i),"onUpdate:modelValue":u[1]||(u[1]=p=>dh(i)?i.value=p:i=p),placeholder:"Code goes here...",style:{height:"400px"},autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:o,onReady:h},null,8,["modelValue"])]),_:1})):Ns("",!0)]))}},EC={class:"p-4 m-4"},YC={__name:"Transaction",setup(s){return(e,t)=>(Me(),qe("main",EC,[Rt(BC)]))}};export{YC as default};
